{"version":3,"file":"node_modules_arcgis_core_views_2d_layers_GraphicsLayerView2D_js.js","mappings":"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","sources":["./node_modules/@arcgis/core/views/2d/layers/GraphicsLayerView2D.js","./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import{isSome as s}from\"../../../core/arrayUtils.js\";import e from\"../../../core/Collection.js\";import{makeHandle as h}from\"../../../core/handleUtils.js\";import{destroyMaybe as r}from\"../../../core/maybe.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/has.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import g from\"./graphics/GraphicContainer.js\";import c from\"./graphics/GraphicsView2D.js\";import l from\"../../layers/LayerView.js\";let n=class extends(p(l)){constructor(){super(...arguments),this._highlightIds=new Map}attach(){this.graphicsView=new c({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this.layer.graphics,container:new g(this.view.featuresTilingScheme)}),this._updateHighlight(),this.container.addChild(this.graphicsView.container),this.addAttachHandles(this.layer.on(\"graphic-update\",this.graphicsView.graphicUpdateHandler))}detach(){this.container.removeAllChildren(),this.graphicsView=r(this.graphicsView)}async hitTest(i){return this.graphicsView?this.graphicsView.hitTest(i).map((t=>({type:\"graphic\",graphic:t,mapPoint:i,layer:this.layer}))):null}async fetchPopupFeatures(i){return this.graphicsView?this.graphicsView.hitTest(i).filter((i=>!!i.popupTemplate)):[]}queryGraphics(){return Promise.resolve(this.graphicsView.graphics)}update(i){this.graphicsView.processUpdate(i)}moveStart(){}viewChange(){this.graphicsView.viewChange()}moveEnd(){}isUpdating(){return!this.graphicsView||this.graphicsView.updating}highlight(i){let r;\"number\"==typeof i?r=[i]:i instanceof t?r=[i.uid]:Array.isArray(i)&&i.length>0?r=\"number\"==typeof i[0]?i:i.map((i=>i&&i.uid)):e.isCollection(i)&&i.length>0&&(r=i.map((i=>i&&i.uid)).toArray());const a=r?.filter(s);return a?.length?(this._addHighlight(a),h((()=>this._removeHighlight(a)))):h()}_addHighlight(i){for(const t of i)if(this._highlightIds.has(t)){const i=this._highlightIds.get(t);this._highlightIds.set(t,i+1)}else this._highlightIds.set(t,1);this._updateHighlight()}_removeHighlight(i){for(const t of i)if(this._highlightIds.has(t)){const i=this._highlightIds.get(t)-1;0===i?this._highlightIds.delete(t):this._highlightIds.set(t,i)}this._updateHighlight()}_updateHighlight(){this.graphicsView?.setHighlight(Array.from(this._highlightIds.keys()))}};i([a()],n.prototype,\"graphicsView\",void 0),n=i([o(\"esri.views.2d.layers.GraphicsLayerView2D\")],n);const d=n;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"../../engine/webgl/enums.js\";import r from\"./BaseGraphicContainer.js\";class i extends r{renderChildren(r){this.attributeView.update(),this.children.some((e=>e.hasData))&&(this.attributeView.bindTextures(r.context,!1),super.renderChildren(r),r.drawPhase===e.MAP&&this._renderChildren(r),this.hasHighlight&&r.drawPhase===e.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}export{i as default};\n"],"names":["_","i","t","isSome","s","e","makeHandle","h","destroyMaybe","r","property","a","subclass","o","LayerView2DMixin","p","g","c","l","n","constructor","arguments","_highlightIds","Map","attach","graphicsView","requestUpdateCallback","requestUpdate","view","graphics","layer","container","featuresTilingScheme","_updateHighlight","addChild","addAttachHandles","on","graphicUpdateHandler","detach","removeAllChildren","hitTest","map","type","graphic","mapPoint","fetchPopupFeatures","filter","popupTemplate","queryGraphics","Promise","resolve","update","processUpdate","moveStart","viewChange","moveEnd","isUpdating","updating","highlight","uid","Array","isArray","length","isCollection","toArray","_addHighlight","_removeHighlight","has","get","set","delete","setHighlight","from","keys","prototype","d","default","WGLDrawPhase","renderChildren","attributeView","children","some","hasData","bindTextures","context","drawPhase","MAP","_renderChildren","hasHighlight","HIGHLIGHT","_renderHighlight","_boundsRenderer","doRender","painter","effects","bind","defines","draw","unbind"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1]}