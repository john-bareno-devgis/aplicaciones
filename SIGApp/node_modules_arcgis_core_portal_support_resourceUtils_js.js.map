{"version":3,"file":"node_modules_arcgis_core_portal_support_resourceUtils_js.js","mappings":"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","sources":["./node_modules/@arcgis/core/portal/support/resourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{join as r,getPathExtension as a}from\"../../core/urlUtils.js\";async function o(e,t={},a){await e.load(a);const o=r(e.itemUrl,\"resources\"),{start:s=1,num:n=10,sortOrder:l=\"asc\",sortField:u=\"created\"}=t,c={query:{start:s,num:n,sortOrder:l,sortField:u,token:e.apiKey},signal:a?.signal},i=await e.portal.request(o,c);return{total:i.total,nextStart:i.nextStart,resources:i.resources.map((({created:t,size:r,resource:a})=>({created:new Date(t),size:r,resource:e.resourceFromPath(a)})))}}async function s(e,a,o,s){if(!e.hasPath())throw new t(`portal-item-resource-${a}:invalid-path`,\"Resource does not have a valid path\");const n=e.portalItem;await n.load(s);const l=r(n.userItemUrl,\"add\"===a?\"addResources\":\"updateResources\"),[c,i]=u(e.path),p=new FormData;return c&&\".\"!==c&&p.append(\"resourcesPrefix\",c),null!=s&&s.compress&&p.append(\"compress\",\"true\"),p.append(\"fileName\",i),p.append(\"file\",o,i),p.append(\"f\",\"json\"),s?.access&&p.append(\"access\",s.access),await n.portal.request(l,{method:\"post\",body:p,signal:s?.signal}),e}async function n(e,a,o){if(!a.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(o);const s=r(e.userItemUrl,\"removeResources\");await e.portal.request(s,{method:\"post\",query:{resource:a.path},signal:o?.signal}),a.portalItem=null}async function l(e,t){await e.load(t);const a=r(e.userItemUrl,\"removeResources\");return e.portal.request(a,{method:\"post\",query:{deleteAll:!0},signal:t?.signal})}function u(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function c(e){const[t,r]=i(e),[a,o]=u(t);return[a,o,r]}function i(e){const t=a(e);return null==t?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function p(t){if(\"blob\"===t.type)return t.blob;if(\"json\"===t.type)return new Blob([t.jsonString],{type:\"application/json\"});return(await e(t.url,{responseType:\"blob\"})).data}function d(e,t){if(!e.hasPath())return null;const[a,,o]=c(e.path);return e.portalItem.resourceFromPath(r(a,t+o))}function m(e,t){if(!e.hasPath())return null;const[a,,o]=c(e.path);return e.portalItem.resourceFromPath(r(a,t+o))}export{s as addOrUpdateResource,p as contentToBlob,o as fetchResources,d as getSiblingOfSameType,m as getSiblingOfSameTypeI,l as removeAllResources,n as removeResource,c as splitPrefixFileNameAndExtension};\n"],"names":["e","t","join","r","getPathExtension","a","o","load","itemUrl","start","s","num","n","sortOrder","l","sortField","u","c","query","token","apiKey","signal","i","portal","request","total","nextStart","resources","map","created","size","resource","Date","resourceFromPath","hasPath","portalItem","userItemUrl","path","p","FormData","append","compress","access","method","body","deleteAll","lastIndexOf","slice","length","type","blob","Blob","jsonString","url","responseType","data","d","m","addOrUpdateResource","contentToBlob","fetchResources","getSiblingOfSameType","getSiblingOfSameTypeI","removeAllResources","removeResource","splitPrefixFileNameAndExtension"],"sourceRoot":"webpack:///","x_google_ignoreList":[0]}