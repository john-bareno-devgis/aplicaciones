"use strict";
(self["webpackChunkrealgis"] = self["webpackChunkrealgis"] || []).push([["default-node_modules_arcgis_core_views_draw_DrawOperation_js-node_modules_arcgis_core_views_d-04e862"],{

/***/ 25399:
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/draw/DrawManipulator.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DrawManipulator": () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Evented.js */ 95442);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/

class t {
  constructor({
    grabbableForEvent: t
  }) {
    this.events = new _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__["default"](), this.interactive = !0, this.selectable = !1, this.cursor = null, this.grabbable = !0, this.consumesClicks = !0, this.grabbableForEvent = t;
  }
  destroy() {}
  intersectionDistance(e, t) {
    return 0;
  }
  attach() {}
  detach() {}
  onElevationChange() {}
  onViewChange() {}
}


/***/ }),

/***/ 44565:
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/draw/DrawOperation.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DrawOperation": () => (/* binding */ k),
/* harmony export */   "defaultCursor": () => (/* binding */ H),
/* harmony export */   "defaultLoadingCursor": () => (/* binding */ j)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ 18100);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Accessor.js */ 2299);
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Evented.js */ 95442);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/lang.js */ 88684);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/maybe.js */ 53661);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/promiseUtils.js */ 30801);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/reactiveUtils.js */ 7521);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/screenUtils.js */ 55798);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ 9497);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ 83382);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ 20891);
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../core/accessorSupport/diffUtils.js */ 51118);
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../core/support/UpdatingHandles.js */ 58454);
/* harmony import */ var _layers_graphics_dehydratedFeatureComparison_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../layers/graphics/dehydratedFeatureComparison.js */ 48119);
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../support/elevationInfoUtils.js */ 64316);
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../ViewingMode.js */ 56108);
/* harmony import */ var _DrawingMode_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./DrawingMode.js */ 87272);
/* harmony import */ var _DrawManipulator_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./DrawManipulator.js */ 25399);
/* harmony import */ var _interactive_coordinateHelper_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../interactive/coordinateHelper.js */ 86944);
/* harmony import */ var _interactive_dragEventPipeline_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../interactive/dragEventPipeline.js */ 39160);
/* harmony import */ var _interactive_editGeometry_EditGeometry_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../interactive/editGeometry/EditGeometry.js */ 53906);
/* harmony import */ var _interactive_editGeometry_EditGeometryOperations_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../interactive/editGeometry/EditGeometryOperations.js */ 78350);
/* harmony import */ var _interactive_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../interactive/sketch/normalizedPoint.js */ 88268);
/* harmony import */ var _interactive_sketch_SketchLabelOptions_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../interactive/sketch/SketchLabelOptions.js */ 59794);
/* harmony import */ var _interactive_sketch_SketchTooltipOptions_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../interactive/sketch/SketchTooltipOptions.js */ 30496);
/* harmony import */ var _interactive_snapping_SnappingContext_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../interactive/snapping/SnappingContext.js */ 99513);
/* harmony import */ var _interactive_snapping_SnappingDragPipelineStep_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../interactive/snapping/SnappingDragPipelineStep.js */ 44940);
/* harmony import */ var _interactive_snapping_SnappingOperation_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../interactive/snapping/SnappingOperation.js */ 72576);
/* harmony import */ var _interactive_snapping_snappingUtils_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../interactive/snapping/snappingUtils.js */ 72189);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/





























const H = "crosshair",
  j = "progress";
let k = class extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__["default"].EventedMixin(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]) {
  constructor(e) {
    super(e), this._createOperationCompleted = !1, this._hideDefaultCursor = !1, this._pointerDownStates = new Set(), this._stagedScreenPoint = null, this._stagedPointerType = null, this._stagedPointerId = null, this._updatingHandles = new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_12__.UpdatingHandles(), this.constraint = void 0, this.isDraped = !0, this.labelOptions = new _interactive_sketch_SketchLabelOptions_js__WEBPACK_IMPORTED_MODULE_23__["default"](), this.tooltipOptions = new _interactive_sketch_SketchTooltipOptions_js__WEBPACK_IMPORTED_MODULE_24__["default"](), this.cursor = null, this.loading = !1, this.snapToSceneEnabled = null, this.lastVertex = null, null == e.elevationInfo && (this.elevationInfo = (0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_14__.getEffectiveElevationInfo)(!!e.hasZ));
  }
  initialize() {
    const {
        geometryType: e,
        view: t
      } = this,
      i = t.spatialReference,
      n = "viewingMode" in t.state ? t.state.viewingMode : _ViewingMode_js__WEBPACK_IMPORTED_MODULE_15__.ViewingMode.Local,
      o = "segment" === e || "multipoint" === e ? "polyline" : e;
    this.coordinateHelper = (0,_interactive_coordinateHelper_js__WEBPACK_IMPORTED_MODULE_18__.createCoordinateHelper)(this.hasZ, this.hasM, i), this._editGeometryOperations = new _interactive_editGeometry_EditGeometryOperations_js__WEBPACK_IMPORTED_MODULE_21__.EditGeometryOperations(new _interactive_editGeometry_EditGeometry_js__WEBPACK_IMPORTED_MODULE_20__.EditGeometry(o, this.coordinateHelper)), this._snappingOperation = new _interactive_snapping_SnappingOperation_js__WEBPACK_IMPORTED_MODULE_27__.SnappingOperation({
      view: t,
      constrainResult: e => e ? this._getEffectiveDrawSurface()?.constrainZ(e) : void 0
    }), this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)(() => this.stagedVertex, e => {
      null != e && this.emit("cursor-update", {
        updated: null,
        vertices: [{
          componentIndex: 0,
          vertexIndex: this._activeComponent.vertices.length,
          coordinates: this.coordinateHelper.pointToArray(e)
        }],
        operation: "apply",
        type: "vertex-update"
      });
    }, {
      sync: !0,
      equals: (e, t) => (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.equalsMaybe)(e, t, _layers_graphics_dehydratedFeatureComparison_js__WEBPACK_IMPORTED_MODULE_13__.pointEquals)
    }), (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)(() => this.view.viewpoint, (e, t) => {
      e && t && (0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_11__.diff)(e, t) && this._onViewpointChange();
    })]), this._activeComponent = new _interactive_editGeometry_EditGeometry_js__WEBPACK_IMPORTED_MODULE_20__.Component(i, n), this._editGeometryOperations.data.components.push(this._activeComponent);
    const c = this.segmentLabels;
    null != c && (c.context = {
      view: t,
      editGeometryOperations: this._editGeometryOperations,
      elevationInfo: this.elevationInfo,
      labelOptions: this.labelOptions
    }, this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)(() => this.labelOptions.enabled, e => {
      c.visible = e;
    }, _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.syncAndInitial), this.on("cursor-update", () => {
      const e = this.stagedVertex;
      c.stagedVertex = null != e ? this.coordinateHelper.pointToVector(e) : null;
    })])), this.addHandles(this._editGeometryOperations.on(["vertex-add", "vertex-update", "vertex-remove"], e => {
      const t = e.vertices.map(e => ({
          componentIndex: 0,
          vertexIndex: e.index,
          coordinates: this.coordinateHelper.vectorToArray(e.pos)
        })),
        i = t.map(e => e.coordinates);
      switch (e.type) {
        case "vertex-add":
          this.emit(e.type, {
            ...e,
            added: i,
            vertices: t
          });
          break;
        case "vertex-update":
          this.emit(e.type, {
            ...e,
            updated: i,
            vertices: t
          });
          break;
        case "vertex-remove":
          this.emit(e.type, {
            ...e,
            removed: i,
            vertices: t
          });
      }
      const n = this._activeComponent.getLastVertex(),
        o = null != n ? this.coordinateHelper.vectorToDehydratedPoint(n.pos) : null;
      null != o && null != this.lastVertex && (0,_layers_graphics_dehydratedFeatureComparison_js__WEBPACK_IMPORTED_MODULE_13__.pointEquals)(this.lastVertex, o) || (this.lastVertex = o);
    }));
    const l = this._manipulator = new _DrawManipulator_js__WEBPACK_IMPORTED_MODULE_17__.DrawManipulator({
      grabbableForEvent: e => "click" !== this.drawingMode || "touch" === e.pointerType && this._snappingEnabled && 1 === this._pointerDownStates.size
    });
    this.manipulators.add(l), l.grabbable = "point" !== e, this.addHandles([this._createManipulatorDragPipeline(l), l.events.on("immediate-click", e => this._onImmediateClick(e)), l.events.on("immediate-double-click", e => this._onImmediateDoubleClick(e)), (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)(() => ({
      effectiveCursor: this.effectiveCursor
    }), ({
      effectiveCursor: e
    }) => {
      l.cursor = e;
    }, _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.syncAndInitial)]), (0,_interactive_snapping_snappingUtils_js__WEBPACK_IMPORTED_MODULE_28__.setupSnappingToggleHandles)(this, () => {
      const e = this.view.inputManager.latestPointerType ?? "mouse",
        t = this._getSnappingContext(e);
      null != this.snappingManager && this._updatingHandles.addPromise((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.ignoreAbortErrors)(this._snappingOperation.resnap(this.snappingManager, t)));
    });
  }
  destroy() {
    (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this.segmentLabels), (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._snappingOperation), this._editGeometryOperations = (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._editGeometryOperations), this._updatingHandles.destroy();
  }
  get _snappingEnabled() {
    return null != this.snappingManager && this.snappingManager.options.effectiveEnabled;
  }
  get _requiresScenePoint() {
    const e = this._getEffectiveDrawSurface();
    return "3d" === this.view.type && this.drawSurface !== e;
  }
  get canRedo() {
    return this._editGeometryOperations.canRedo;
  }
  get canUndo() {
    return this._editGeometryOperations.canUndo;
  }
  get committedVertices() {
    return this._activeComponent.vertices.map(e => this.coordinateHelper.vectorToArray(e.pos));
  }
  set drawingMode(e) {
    this._set("drawingMode", e ?? _DrawingMode_js__WEBPACK_IMPORTED_MODULE_16__.defaultDrawingMode);
  }
  get effectiveCursor() {
    return this.loading ? j : this._hideDefaultCursor ? null : this.cursor || H;
  }
  get interactive() {
    return this._manipulator.interactive;
  }
  set interactive(e) {
    this._manipulator.interactive = e;
  }
  get isCompleted() {
    return this._createOperationCompleted;
  }
  get numCommittedVertices() {
    return this._activeComponent.vertices.length;
  }
  get numVertices() {
    return null != this.stagedVertex ? this._activeComponent.vertices.length + 1 : this._activeComponent.vertices.length;
  }
  get snappingOptions() {
    return null != this.snappingManager ? this.snappingManager.options : null;
  }
  get stagedVertex() {
    const e = this._snappingOperation.stagedPoint,
      {
        constraint: t,
        elevationInfo: i,
        view: n
      } = this;
    if (!e || !t) return e;
    const o = (0,_interactive_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_22__.fromPoint)(e, n, i),
      r = o ? t.closestTo(o) : void 0;
    return r ? (0,_interactive_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_22__.toDehydratedPoint)(r, e.spatialReference) : e;
  }
  set stagedVertex(e) {
    this._snappingOperation.stagedPoint = (0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__.clone)(e);
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  get vertices() {
    const e = this.committedVertices;
    return null != this.stagedVertex && e.push(this.coordinateHelper.pointToArray(this.stagedVertex)), e;
  }
  cancel() {
    this.complete({
      aborted: !0
    });
  }
  commitStagedVertex() {
    if (this._snappingOperation.abort(), null != this.stagedVertex) {
      const {
        stagedVertex: e
      } = this;
      this.stagedVertex = null, this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e));
    }
  }
  complete(e) {
    const t = e && e.aborted || !1;
    this._snappingOperation.abort(), null != this.snappingManager && this.snappingManager.doneSnapping(), "segment" === this.geometryType || "point" === this.geometryType ? this.commitStagedVertex() : this.stagedVertex = null;
    const i = "multipoint" === this.geometryType && 0 === this.numVertices || "polyline" === this.geometryType && this.numVertices < 2 || "polygon" === this.geometryType && this.numVertices < 3;
    this._createOperationCompleted = !i, (this.isCompleted || t) && this.emit("complete", {
      vertices: this.vertices.map((e, t) => ({
        componentIndex: 0,
        vertexIndex: t,
        coordinates: e
      })),
      aborted: t,
      type: "complete"
    });
  }
  onInputEvent(e) {
    switch (e.type) {
      case "pointer-down":
        this._pointerDownStates.add(e.pointerId);
        break;
      case "pointer-up":
        this._pointerDownStates.delete(e.pointerId);
    }
    switch (e.type) {
      case "pointer-move":
        return this._onPointerMove(e);
      case "hold":
        return this._onHold(e);
    }
  }
  redo() {
    this._editGeometryOperations.redo();
  }
  undo() {
    null != this.snappingManager && this.snappingManager.doneSnapping(), this._editGeometryOperations.undo();
  }
  _closeOnClickVertexIndex(e) {
    const t = this._activeComponent;
    if ("polygon" === this.geometryType && t.vertices.length > 2) {
      if (this._vertexWithinPointerDistance(t.vertices[0].pos, e)) return 0;
      if (this._vertexWithinPointerDistance(t.vertices[t.vertices.length - 1].pos, e)) return t.vertices.length - 1;
    }
    return null;
  }
  _createManipulatorDragPipeline(e) {
    switch (this.drawingMode) {
      case "click":
        return this._createManipulatorDragPipelineClick(e);
      case "freehand":
        return this._createManipulatorDragPipelineFreehand(e);
      case "hybrid":
        return this._createManipulatorDragPipelineHybrid(e);
    }
  }
  _createManipulatorDragPipelineClick(e) {
    return (0,_interactive_dragEventPipeline_js__WEBPACK_IMPORTED_MODULE_19__.createManipulatorDragEventPipeline)(e, (e, t, i, n) => {
      const o = "touch" === n && this._snappingEnabled;
      if (this.isCompleted || !o) return;
      const {
        snappingStep: r,
        cancelSnapping: s
      } = (0,_interactive_snapping_SnappingDragPipelineStep_js__WEBPACK_IMPORTED_MODULE_26__.createSnapDragEventPipelineStep)({
        predicate: () => o,
        snappingManager: this.snappingManager,
        snappingContext: new _interactive_snapping_SnappingContext_js__WEBPACK_IMPORTED_MODULE_25__.SnappingContext({
          editGeometryOperations: this._editGeometryOperations,
          elevationInfo: this.elevationInfo,
          feature: this.graphic,
          pointer: n,
          visualizer: this.snappingVisualizer
        }),
        updatingHandles: this._updatingHandles,
        useZ: !this._requiresScenePoint
      });
      i = i.next(e => (o && null != this.snappingManager && this.snappingManager.doneSnapping(), e)).next(s), t.next(this._screenToMapDragEventStep()).next(e => ("start" === e.action && (this.stagedVertex = e.mapStart, ("segment" === this.geometryType || o && 0 === this.numVertices) && this.commitStagedVertex()), e)).next((0,_interactive_dragEventPipeline_js__WEBPACK_IMPORTED_MODULE_19__.sceneSnappingAtLocation)(this.view, this.elevationInfo)).next(...r).next(e => (o && (this.stagedVertex = e.mapEnd, "end" === e.action && this.commitStagedVertex()), e)).next(e => ("end" === e.action && ("segment" !== this.geometryType && "point" !== this.geometryType || this.complete()), e));
    });
  }
  _createManipulatorDragPipelineFreehand(e) {
    return (0,_interactive_dragEventPipeline_js__WEBPACK_IMPORTED_MODULE_19__.createManipulatorDragEventPipeline)(e, (e, t) => {
      this.isCompleted || t.next(this._screenToMapDragEventStep()).next(e => ("start" === e.action && (null == this.stagedVertex && (this.stagedVertex = e.mapStart), "segment" === this.geometryType && this.commitStagedVertex()), e)).next(e => {
        switch (e.action) {
          case "start":
          case "update":
            this.stagedVertex = e.mapEnd, "polygon" !== this.geometryType && "polyline" !== this.geometryType || this.commitStagedVertex();
            break;
          case "end":
            this.complete();
        }
        return e;
      });
    });
  }
  _createManipulatorDragPipelineHybrid(e) {
    return (0,_interactive_dragEventPipeline_js__WEBPACK_IMPORTED_MODULE_19__.createManipulatorDragEventPipeline)(e, (e, t) => {
      this.isCompleted || t.next(this._screenToMapDragEventStep()).next(e => ("start" === e.action && (null == this.stagedVertex && (this.stagedVertex = e.mapStart), this.commitStagedVertex()), e)).next(e => {
        switch (e.action) {
          case "start":
          case "update":
            this.stagedVertex = e.mapEnd, "polygon" !== this.geometryType && "polyline" !== this.geometryType || this.commitStagedVertex();
            break;
          case "end":
            "segment" !== this.geometryType && "point" !== this.geometryType || this.complete();
        }
        return e;
      });
    });
  }
  get _drawAtFixedElevation() {
    return ("segment" === this.geometryType || "polygon" === this.geometryType) && this.numCommittedVertices > 0;
  }
  _getEffectiveDrawSurface() {
    if (null == this.elevationDrawSurface) return this.drawSurface;
    if (!this.coordinateHelper.hasZ()) return this.elevationDrawSurface.defaultZ = null, this.elevationDrawSurface;
    let e = this.defaultZ,
      t = !1;
    return null != this.elevationInfo && "absolute-height" === this.elevationInfo.mode && (t = !0), null != this.snapToSceneEnabled && (t = this.snapToSceneEnabled), null != this.elevationInfo && "on-the-ground" === this.elevationInfo.mode && (t = !1), this._drawAtFixedElevation && (e = this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos), t = !1), t ? this.drawSurface : (this.elevationDrawSurface.defaultZ = e, this.elevationDrawSurface);
  }
  _mapToScreen(e) {
    return this._getEffectiveDrawSurface()?.mapToScreen(e);
  }
  _onHold(e) {
    this._snappingOperation.abort(), "click" === this.drawingMode && "touch" === e.pointerType && this._snappingEnabled && (this.stagedVertex = e.mapPoint), e.stopPropagation();
  }
  _onImmediateClick(e) {
    if ("mouse" === e.pointerType && 2 === e.button || this._manipulator.dragging) return;
    const t = this._activeComponent;
    if (null != this._closeOnClickVertexIndex(e.screenPoint)) return e.stopPropagation(), void this.complete();
    const i = this._screenToMap(e.screenPoint);
    if (null != i) switch (this.drawingMode) {
      case "freehand":
        "point" === this.geometryType && (null != this.stagedVertex ? this.commitStagedVertex() : this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)), this.complete());
        break;
      case "click":
      case "hybrid":
        this._snappingOperation.abort(), null != this.stagedVertex ? this.commitStagedVertex() : this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)), ("point" === this.geometryType || "segment" === this.geometryType && 2 === t.vertices.length || "segment" === this.geometryType && "hybrid" === this.drawingMode && 1 === t.vertices.length) && this.complete();
    }
    e.stopPropagation();
  }
  _onImmediateDoubleClick(e) {
    this._manipulator.dragging || "point" === this.geometryType || (this.complete(), e.stopPropagation());
  }
  _onPointerMove(e) {
    const t = (0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__.createScreenPoint)(e.x, e.y);
    this._stagedScreenPoint = t, this._stagedPointerType = e.pointerType, this._stagedPointerId = e.pointerId;
    const i = this._snappingOperation,
      n = this._manipulator;
    this._pointerDownStates.has(e.pointerId) || n.grabbing || !n.interactive ? i.abort() : (e.stopPropagation(), this._updateStagedVertexOnPointerMove(t, e.pointerType));
  }
  _onViewpointChange() {
    const e = this._manipulator;
    "mouse" === this._stagedPointerType && this._stagedScreenPoint && null != this._stagedPointerId && !this._pointerDownStates.has(this._stagedPointerId) && !e.grabbing && e.interactive ? this._updateStagedVertexOnPointerMove(this._stagedScreenPoint, this._stagedPointerType ?? "mouse") : this._snappingOperation.abort();
  }
  _updateStagedVertexOnPointerMove(e, t) {
    const i = this._snappingOperation,
      n = this._closeOnClickVertexIndex(e);
    if (null != n) return this._closeOnVertex(n), void i.abort();
    const o = this._screenToMap(e),
      r = this._requiresScenePoint ? this.drawSurface?.screenToMap(e) : null;
    if (null == o) return this._hideDefaultCursor = !0, void i.abort();
    this._hideDefaultCursor = !1;
    const a = this.snappingManager;
    if (null == a) return this.stagedVertex = o, void i.abort();
    const p = this._getSnappingContext(t);
    this._updatingHandles.addPromise((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.ignoreAbortErrors)(i.snap({
      point: o,
      scenePoint: r
    }, a, p)));
  }
  _closeOnVertex(e) {
    this.stagedVertex = null;
    const t = {
      componentIndex: 0,
      vertexIndex: e,
      coordinates: this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)
    };
    this.emit("cursor-update", {
      updated: null,
      vertices: [t],
      operation: "apply",
      type: "vertex-update"
    });
  }
  _screenToMap(e) {
    return this._getEffectiveDrawSurface()?.screenToMap(e);
  }
  _screenToMapDragEventStep() {
    let e = null;
    return t => {
      if ("start" === t.action && (e = this._screenToMap(t.screenStart)), null == e) return null;
      const i = this._screenToMap(t.screenEnd);
      return null != i ? {
        ...t,
        mapStart: e,
        mapEnd: i
      } : null;
    };
  }
  _vertexWithinPointerDistance(e, t) {
    const i = 25,
      n = this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));
    return null != n && G(n, t, i);
  }
  _getSnappingContext(e) {
    const t = this._drawAtFixedElevation ? this.elevationDrawSurface?.defaultZ : null;
    return new _interactive_snapping_SnappingContext_js__WEBPACK_IMPORTED_MODULE_25__.SnappingContext({
      editGeometryOperations: this._editGeometryOperations,
      elevationInfo: this.elevationInfo,
      pointer: e,
      feature: this.graphic,
      visualizer: this.snappingVisualizer,
      selfSnappingZ: null != t ? {
        value: t,
        elevationInfo: this.elevationInfo
      } : null
    });
  }
};
function G(e, t, i) {
  const n = e.x - t.x,
    o = e.y - t.y;
  return n * n + o * o <= i;
}
(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "_hideDefaultCursor", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "_snappingOperation", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "_snappingEnabled", null), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "graphic", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "constraint", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "defaultZ", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "isDraped", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  value: _DrawingMode_js__WEBPACK_IMPORTED_MODULE_16__.defaultDrawingMode
})], k.prototype, "drawingMode", null), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "elevationDrawSurface", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "elevationInfo", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0,
  type: _interactive_sketch_SketchLabelOptions_js__WEBPACK_IMPORTED_MODULE_23__["default"]
})], k.prototype, "labelOptions", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0,
  type: _interactive_sketch_SketchTooltipOptions_js__WEBPACK_IMPORTED_MODULE_24__["default"]
})], k.prototype, "tooltipOptions", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "geometryType", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "hasM", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "hasZ", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "cursor", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "effectiveCursor", null), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "loading", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "manipulators", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "drawSurface", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "segmentLabels", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "snappingManager", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "snappingVisualizer", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "snapToSceneEnabled", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "stagedVertex", null), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "lastVertex", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()], k.prototype, "updating", null), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({
  constructOnly: !0
})], k.prototype, "view", void 0), k = (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__.subclass)("esri.views.draw.DrawOperation")], k);


/***/ }),

/***/ 87272:
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/draw/DrawingMode.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "defaultDrawingMode": () => (/* binding */ e),
/* harmony export */   "drawingModes": () => (/* binding */ c)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const c = ["freehand", "hybrid", "click"],
  e = "click";


/***/ }),

/***/ 65363:
/*!**************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/draw/drawSurfaces.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ElevationDrawSurface": () => (/* binding */ r),
/* harmony export */   "MapDrawSurface": () => (/* binding */ c),
/* harmony export */   "SceneDrawSurface": () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/screenUtils.js */ 55798);
/* harmony import */ var _layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../layers/graphics/dehydratedPoint.js */ 86822);
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../layers/graphics/hydratedFeatures.js */ 52570);
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../support/elevationInfoUtils.js */ 64316);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/




class r {
  constructor(e, t, s, i = null) {
    this._elevationInfo = e, this.defaultZ = t, this._view = s, this._excludeGraphics = i;
  }
  screenToMap(t) {
    if (null != this.defaultZ) return this._view.sceneIntersectionHelper.intersectElevationFromScreen((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.createScreenPointArray)(t.x, t.y), this._elevationInfo, this.defaultZ, this._excludeGraphics);
    const s = this._view.sceneIntersectionHelper.intersectElevationFromScreen((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.createScreenPointArray)(t.x, t.y), this._elevationInfo, 0, this._excludeGraphics);
    return null != s && (s.z = void 0), s;
  }
  mapToScreen(e) {
    const s = (0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_1__.makeDehydratedPoint)(e.x, e.y, (0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__.getConvertedElevation)(this._view, e, this._elevationInfo), e.spatialReference);
    return this._view.toScreen(s);
  }
  constrainZ(e) {
    const {
      defaultZ: t
    } = this;
    return null != t && e.z !== t && ((e = (0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__.clonePoint)(e)).z = t), e;
  }
}
class o {
  constructor(e, t, s = []) {
    this.view = e, this.elevationInfo = t, this.exclude = s;
  }
  screenToMap(e) {
    const t = this.view.toMap(e, {
      exclude: this.exclude
    });
    return null != t && (t.z = (0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__.getZForElevationMode)(t, this.view, this.elevationInfo)), t;
  }
  mapToScreen(e) {
    let s = e;
    return null != this.elevationInfo && (s = (0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_1__.makeDehydratedPoint)(e.x, e.y, (0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__.getConvertedElevation)(this.view, e, this.elevationInfo), e.spatialReference)), this.view.toScreen(s);
  }
  constrainZ(e) {
    return e;
  }
}
class c {
  constructor(e, t = !1, s = 0) {
    this.view = e, this.hasZ = t, this.defaultZ = s, this.mapToScreen = t => e.toScreen(t), this.screenToMap = t ? t => {
      const i = e.toMap(t);
      return i.z = s, i;
    } : t => e.toMap(t);
  }
  constrainZ(e) {
    const {
      defaultZ: t
    } = this;
    return this.hasZ && e.z !== t && ((e = (0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__.clonePoint)(e)).z = t), e;
  }
}


/***/ }),

/***/ 4780:
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/draw/support/surfaceCoordinateSystems.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AffineCoordinateSystem": () => (/* binding */ W),
/* harmony export */   "SceneViewCoordinateSystem": () => (/* binding */ v),
/* harmony export */   "SurfaceCoordinateSystem": () => (/* binding */ R),
/* harmony export */   "createViewAlignedCoordinateSystem": () => (/* binding */ F),
/* harmony export */   "makeMapPoint": () => (/* binding */ w),
/* harmony export */   "makeSurfacePoint": () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../geometry.js */ 6010);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ 19420);
/* harmony import */ var _chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../chunks/mat2d.js */ 53072);
/* harmony import */ var _chunks_mat2df64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../chunks/mat2df64.js */ 7562);
/* harmony import */ var _chunks_quat_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../chunks/quat.js */ 50894);
/* harmony import */ var _chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../chunks/quatf64.js */ 29042);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../chunks/vec3.js */ 92950);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../chunks/vec3f64.js */ 77765);
/* harmony import */ var _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../geometry/support/Axis.js */ 40924);
/* harmony import */ var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../geometry/Point.js */ 72062);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/










function w(t, r, e = null) {
  return null != e ? [t, r, e] : [t, r];
}
function g(t, r, e = null) {
  return null != e ? {
    x: t,
    y: r,
    z: e
  } : {
    x: t,
    y: r
  };
}
class R {
  constructor(t) {
    this.spatialReference = t;
  }
  mapToLocalMultiple(r) {
    return r.map(t => this.mapToLocal(t)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.isSome);
  }
  get doUnnormalization() {
    return !1;
  }
}
class W extends R {
  constructor(t, a, o = null) {
    super(a), this._defaultZ = o, this.transform = (0,_chunks_mat2df64_js__WEBPACK_IMPORTED_MODULE_3__.c)(), this.transformInv = (0,_chunks_mat2df64_js__WEBPACK_IMPORTED_MODULE_3__.c)(), this.transform = (0,_chunks_mat2df64_js__WEBPACK_IMPORTED_MODULE_3__.a)(t), (0,_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_2__.i)(this.transformInv, this.transform);
  }
  makeMapPoint(t, r) {
    return w(t, r, this._defaultZ);
  }
  mapToLocal(t) {
    return g(this.transform[0] * t[0] + this.transform[2] * t[1] + this.transform[4], this.transform[1] * t[0] + this.transform[3] * t[1] + this.transform[5]);
  }
  localToMap(t) {
    return w(this.transformInv[0] * t.x + this.transformInv[2] * t.y + this.transformInv[4], this.transformInv[1] * t.x + this.transformInv[3] * t.y + this.transformInv[5], this._defaultZ);
  }
}
class v extends R {
  constructor(t, r) {
    super(t.spatialReference), this.view = t, this.defaultZ = null, this.pWS = (0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.c)(), this.tangentFrameUpWS = (0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.c)(), this.tangentFrameRightWS = (0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.c)(), this.tangentFrameForwardWS = (0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.c)(), this.localFrameRightWS = (0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.c)(), this.localFrameUpWS = (0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.c)(), this.worldToLocalTransform = (0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_5__.a)(), this.localToWorldTransform = (0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_5__.a)(), this.scale = 1, this.scale = t.resolution, this.referenceMapPoint = r, this.defaultZ = r.hasZ ? r.z : null;
    const e = t.state.camera.viewRight;
    this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint, this.pWS), this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS, _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__.Axis.X, this.tangentFrameRightWS), this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS, _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__.Axis.Y, this.tangentFrameUpWS), this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS, _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__.Axis.Z, this.tangentFrameForwardWS);
    const s = (0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.c)();
    (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_6__.i)(s, this.tangentFrameForwardWS, (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_6__.j)(e, this.tangentFrameForwardWS)), (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_6__.f)(this.localFrameRightWS, e, s), (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_6__.n)(this.localFrameRightWS, this.localFrameRightWS), (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_6__.b)(this.localFrameUpWS, this.tangentFrameForwardWS, this.localFrameRightWS), (0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_4__.r)(this.worldToLocalTransform, this.localFrameRightWS, this.tangentFrameRightWS), (0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_4__.i)(this.localToWorldTransform, this.worldToLocalTransform);
  }
  get doUnnormalization() {
    return "global" === this.view.viewingMode;
  }
  makeMapPoint(t, r) {
    return w(t, r, this.defaultZ);
  }
  mapToLocal(t) {
    const r = (0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.c)();
    this.view.renderCoordsHelper.toRenderCoords(new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_9__["default"]({
      x: t[0],
      y: t[1],
      spatialReference: this.spatialReference
    }), r), (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_6__.v)(r, r, this.worldToLocalTransform);
    const e = this.view.renderCoordsHelper.fromRenderCoords(r, this.view.spatialReference);
    return null != e ? g(e.x / this.scale, e.y / this.scale) : null;
  }
  localToMap(t) {
    const r = (0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.c)();
    this.view.renderCoordsHelper.toRenderCoords(new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_9__["default"]({
      x: t.x * this.scale,
      y: t.y * this.scale,
      spatialReference: this.spatialReference
    }), r), (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_6__.v)(r, r, this.localToWorldTransform);
    const e = this.view.renderCoordsHelper.fromRenderCoords(r, this.view.spatialReference);
    return null != e ? w(e.x, e.y, this.defaultZ) : null;
  }
}
function F(t, r) {
  if ("2d" === t.type) return new W(t.state.transform, t.spatialReference, r.length > 2 ? r[2] : null);
  if ("3d" === t.type) {
    const e = r.length > 2 ? new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_9__["default"]({
      x: r[0],
      y: r[1],
      z: r[2],
      spatialReference: t.spatialReference
    }) : new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_9__["default"]({
      x: r[0],
      y: r[1],
      spatialReference: t.spatialReference
    });
    return new v(t, e);
  }
  return null;
}


/***/ }),

/***/ 72576:
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/SnappingOperation.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SnappingOperation": () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ 18100);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Accessor.js */ 2299);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/maybe.js */ 53661);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ 30801);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ 9497);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ 83382);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ 19420);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/has.js */ 67087);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ 20891);
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../support/Scheduler.js */ 24903);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/










let p = class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__["default"] {
  constructor(t) {
    var _this;
    (super(t), _this = this), this.constrainResult = t => t, this._snapPoints = null, this._frameTask = null, this._abortController = null, this._stagedPoint = null, this._snap = (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.debounce)( /*#__PURE__*/function () {
      var _ref = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (t, s, o, r) {
        const n = _this._frameTask;
        if (null == n) return;
        const e = yield n.schedule(() => s.snap({
          ...t,
          context: o,
          signal: r
        }), r);
        e.valid && (yield n.schedule(() => {
          _this.stagedPoint = e.apply(), t !== _this._snapPoints && null != _this._snapPoints && (_this.stagedPoint = s.update({
            ..._this._snapPoints,
            context: o
          }));
        }, r));
      });
      return function (_x, _x2, _x3, _x4) {
        return _ref.apply(this, arguments);
      };
    }());
  }
  get stagedPoint() {
    return this._stagedPoint;
  }
  set stagedPoint(t) {
    this._stagedPoint = this.constrainResult(t);
  }
  initialize() {
    const t = "3d" === this.view.type ? this.view?.resourceController?.scheduler : null;
    this._frameTask = null != t ? t.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_10__.TaskPriority.SNAPPING) : _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_10__.ImmediateTask;
  }
  destroy() {
    this._abortController = (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.abortMaybe)(this._abortController), this._frameTask = (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.removeMaybe)(this._frameTask);
  }
  update(t, s, o) {
    this._snapPoints = t;
    const {
        point: r,
        scenePoint: n
      } = t,
      e = s.update({
        point: r,
        scenePoint: n,
        context: o
      });
    return this.stagedPoint = e, e;
  }
  snap(t, s, o) {
    var _this2 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const {
        point: r,
        scenePoint: n
      } = t;
      return _this2.stagedPoint = s.update({
        point: r,
        scenePoint: n,
        context: o
      }), _this2._snapPoints = t, null == _this2._abortController && (_this2._abortController = new AbortController()), _this2._snap(t, s, o, _this2._abortController.signal);
    })();
  }
  resnap(t, s) {
    var _this3 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      null != _this3._snapPoints && (yield _this3.snap(_this3._snapPoints, t, s));
    })();
  }
  abort() {
    this._abortController = (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.abortMaybe)(this._abortController), this._snapPoints = null;
  }
};
(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({
  constructOnly: !0
})], p.prototype, "view", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()], p.prototype, "stagedPoint", null), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()], p.prototype, "constrainResult", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()], p.prototype, "_stagedPoint", void 0), p = (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.interactive.snapping.SnappingOperation")], p);


/***/ })

}]);
//# sourceMappingURL=default-node_modules_arcgis_core_views_draw_DrawOperation_js-node_modules_arcgis_core_views_d-04e862.js.map