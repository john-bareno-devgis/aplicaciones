"use strict";
(self["webpackChunkrealgis"] = self["webpackChunkrealgis"] || []).push([["node_modules_arcgis_core_layers_graphics_sources_support_uploadAssets_js"],{

/***/ 85171:
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/support/uploadAssets.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "uploadAssets": () => (/* binding */ O)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../request.js */ 1897);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/has.js */ 67087);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Logger.js */ 28191);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ 30801);
/* harmony import */ var _core_time_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/time.js */ 69354);
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ 55050);
/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/uuid.js */ 28772);
/* harmony import */ var _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../geometry/support/meshUtils/External.js */ 92427);
/* harmony import */ var _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./uploadAssetErrors.js */ 77139);
/* harmony import */ var _uploadProgressWeights_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./uploadProgressWeights.js */ 32927);
/* harmony import */ var _uploads_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./uploads.js */ 29698);
/* harmony import */ var _support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../support/infoFor3D.js */ 11895);
/* harmony import */ var _support_progressUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../support/progressUtils.js */ 12928);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/













function O(_x, _x2, _x3) {
  return _O.apply(this, arguments);
}
function _O() {
  _O = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, e, t) {
    const r = s.length;
    if (!r) return t?.onProgress?.(1), [];
    const o = (0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_13__.makeProgressManager)(r, t?.onProgress, "uploadAssets");
    return Promise.all(s.map((s, r) => v(s, e, {
      ...t,
      onProgress: o.makeOnProgress(r)
    })));
  });
  return _O.apply(this, arguments);
}
function v(_x4, _x5, _x6) {
  return _v.apply(this, arguments);
}
function _v() {
  _v = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, {
    layer: e,
    ongoingUploads: t
  }, r) {
    const o = t.get(s);
    if (o) return o;
    if (!Z(e)) throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_9__.UnsupportedError();
    if (I(s, e)) return r?.onProgress?.(1), s;
    const n = k(s, e, r);
    t.set(s, n);
    try {
      yield n;
    } finally {
      t.delete(s);
    }
    return s;
  });
  return _v.apply(this, arguments);
}
function I(s, e) {
  const {
    parsedUrl: t
  } = e;
  return null != t && s.metadata.externalSources.some(s => (0,_geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_8__.externalIsOnService)(s, t));
}
function k(_x7, _x8, _x9) {
  return _k.apply(this, arguments);
}
function _k() {
  _k = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, e, r) {
    const {
        metadata: o
      } = s,
      {
        displaySource: n
      } = o,
      a = H(n?.source, e),
      i = !!a,
      c = o.externalSources.length > 0,
      u = i ? B(a, e, r) : c ? R(s, e, r) : C(s, e, r),
      l = yield u;
    return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(r), s.addExternalSources([l]), s;
  });
  return _k.apply(this, arguments);
}
function B(_x10, _x11, _x12) {
  return _B.apply(this, arguments);
}
function _B() {
  _B = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, e, t) {
    return {
      source: yield G(s, e, t),
      original: !0
    };
  });
  return _B.apply(this, arguments);
}
function R(_x13, _x14, _x15) {
  return _R.apply(this, arguments);
}
function _R() {
  _R = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, e, t) {
    const r = _(e),
      {
        externalSources: o
      } = s.metadata,
      n = q(o, e);
    if (!n) throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_9__.NoSupportedSourceError();
    const a = (0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_13__.makeProgressManager)(_uploadProgressWeights_js__WEBPACK_IMPORTED_MODULE_10__.uploadProgressWeights.uploadConvertibleSource, t?.onProgress, "uploadConvertibleSource"),
      i = yield G(n, e, {
        onProgress: a.makeOnProgress("uploadEditSource")
      });
    s.addExternalSources([{
      source: i,
      original: !0
    }]);
    const c = n.reduce((s, {
        asset: e
      }) => e instanceof File ? s + e.size : s, 0),
      u = a.simulate("serviceAssetsToGlb", (0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_13__.estimatedConversionTime)(c));
    try {
      return {
        source: yield V(i, e, r)
      };
    } finally {
      u.remove();
    }
  });
  return _R.apply(this, arguments);
}
function C(_x16, _x17, _x18) {
  return _C.apply(this, arguments);
}
function _C() {
  _C = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, e, t) {
    const r = (0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_13__.makeProgressManager)(_uploadProgressWeights_js__WEBPACK_IMPORTED_MODULE_10__.uploadProgressWeights.uploadLocalMesh, t?.onProgress, "uploadLocalMesh"),
      o = L(s, e, {
        ...t,
        onProgress: r.makeOnProgress("meshToAssetBlob")
      });
    return {
      source: yield J([o], e, {
        ...t,
        onProgress: r.makeOnProgress("uploadAssetBlobs")
      }),
      extent: s.extent.clone(),
      original: !0
    };
  });
  return _C.apply(this, arguments);
}
function L(_x19, _x20, _x21) {
  return _L.apply(this, arguments);
}
function _L() {
  _L = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, e, r) {
    const o = _(e),
      n = yield s.load(r),
      a = yield n.toBinaryGLTF({
        ignoreLocalTransform: !0
      });
    (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(r);
    const i = yield a.buffer();
    return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(r), {
      blob: new Blob([i.data], {
        type: i.type
      }),
      assetName: `${(0,_core_uuid_js__WEBPACK_IMPORTED_MODULE_7__.generateBracedUUID)()}.glb`,
      assetType: o
    };
  });
  return _L.apply(this, arguments);
}
function q(s, e) {
  for (const t of s) {
    const s = H(t.source, e);
    if (s) return s;
  }
  return null;
}
function H(s, e) {
  if (!s) return null;
  const {
      infoFor3D: {
        supportedFormats: t,
        editFormats: r
      }
    } = e,
    o = (0,_geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_8__.externalSourceToMultiPart)(s),
    n = new Array();
  let a = !1;
  for (let i = 0; i < o.length; ++i) {
    const s = $(o[i], t);
    if (!s) return null;
    r.includes(s.assetType) && (a = !0), n.push(s);
  }
  return a ? n : null;
}
function $(s, e) {
  const t = (0,_geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_8__.assetFormatId)(s, e);
  return t ? {
    asset: s,
    assetType: t
  } : null;
}
function G(_x22, _x23, _x24) {
  return _G.apply(this, arguments);
}
function _G() {
  _G = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, e, t) {
    return J(s.map(s => M(s, t)), e, t);
  });
  return _G.apply(this, arguments);
}
function J(_x25, _x26, _x27) {
  return _J.apply(this, arguments);
}
function _J() {
  _J = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, e, r) {
    const o = (0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_13__.makeProgressManager)(_uploadProgressWeights_js__WEBPACK_IMPORTED_MODULE_10__.uploadProgressWeights.uploadAssetBlobs, r?.onProgress, "uploadAssetBlobs"),
      n = yield z(s, e, {
        ...r,
        onProgress: o.makeOnProgress("prepareAssetItems")
      });
    (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(r);
    const a = n.map(({
        item: s
      }) => s),
      {
        uploadResults: i
      } = yield K(a, e, {
        ...r,
        onProgress: o.makeOnProgress("uploadAssetItems")
      });
    return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(r), s.map((s, t) => Q(n[t], i[t], e));
  });
  return _J.apply(this, arguments);
}
function M(_x28, _x29) {
  return _M.apply(this, arguments);
}
function _M() {
  _M = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, e) {
    const {
      asset: r,
      assetType: o
    } = s;
    if (r instanceof File) return {
      blob: r,
      assetName: r.name,
      assetType: o
    };
    const n = yield r.toBlob(e);
    return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(e), {
      blob: n,
      assetName: r.assetName,
      assetType: o
    };
  });
  return _M.apply(this, arguments);
}
function W(_x30, _x31, _x32) {
  return _W.apply(this, arguments);
}
function _W() {
  _W = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, e, r) {
    const {
      blob: n,
      assetType: a,
      assetName: c
    } = s;
    let u = null;
    try {
      const s = yield (0,_uploads_js__WEBPACK_IMPORTED_MODULE_11__.uploadItem)({
        data: n,
        name: c
      }, e.url, r);
      (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(r), u = {
        assetType: a,
        assetUploadId: s.itemID
      };
    } catch (l) {
      (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAbortError)(l), ss().warnOnce(`Service ${e.url} does not support the REST Uploads API.`);
    }
    if (!u) {
      const s = yield (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__.parseData)(n);
      if ((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(r), !s.isBase64) throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_9__.NotBase64Error();
      u = {
        assetType: a,
        assetData: s.data
      };
    }
    if (!u) throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_9__.UnableToPrepareOptionsError();
    return {
      item: u,
      assetName: c
    };
  });
  return _W.apply(this, arguments);
}
function z(s, e, r) {
  const o = (0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_13__.makeProgressManager)(s.length, r?.onProgress, "prepareAssetItems");
  return Promise.all(s.map( /*#__PURE__*/function () {
    var _ref = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, n) {
      const a = W(yield s, e, {
        ...r,
        onProgress: o.makeOnProgress(n)
      });
      return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(r), a;
    });
    return function (_x33, _x34) {
      return _ref.apply(this, arguments);
    };
  }()));
}
function K(_x35, _x36, _x37) {
  return _K.apply(this, arguments);
}
function _K() {
  _K = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, r, o) {
    const n = (0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_13__.simulateProgress)(o?.onProgress);
    try {
      const n = yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__.join)(r.parsedUrl.path, "uploadAssets"), {
        timeout: 0,
        query: {
          f: "json",
          assets: JSON.stringify(e)
        },
        method: "post",
        responseType: "json"
      });
      if ((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(o), n.data.uploadResults.length !== e.length) throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_9__.BadResponseError(e.length, n.data.uploadResults.length);
      return n.data;
    } finally {
      n.remove();
    }
  });
  return _K.apply(this, arguments);
}
function Q(s, e, t) {
  const {
    success: r
  } = e;
  if (!r) {
    const {
      error: t
    } = e;
    throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_9__.UploadFailedError(s.assetName, t);
  }
  const {
      assetHash: o
    } = e,
    {
      assetName: n,
      item: {
        assetType: a
      }
    } = s,
    {
      infoFor3D: {
        supportedFormats: i
      }
    } = t,
    c = (0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_12__.getFormatIdMimeType)(a, i);
  if (!c) throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_9__.UnsupportedFormatUploadedError(a);
  return new _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_8__.ServiceAsset(n, c, [new _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_8__.ServiceAssetPart(`${t.parsedUrl.path}/assets/${o}`, o)]);
}
function V(_x38, _x39, _x40) {
  return _V.apply(this, arguments);
}
function _V() {
  _V = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (s, e, t) {
    const r = s.map(({
        assetName: s,
        parts: e
      }) => ({
        assetName: s,
        assetHash: e[0].partHash
      })),
      o = e.capabilities?.operations.supportsAsyncConvert3D,
      n = {
        f: "json",
        assets: JSON.stringify(r),
        transportType: "esriTransportTypeUrl",
        targetFormat: t,
        async: o
      },
      i = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__.join)(e.parsedUrl.path, "convert3D");
    let c;
    try {
      c = (yield (o ? Y : X)(i, {
        query: n,
        responseType: "json",
        timeout: 0
      })).data;
    } catch (l) {
      throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_9__.Convert3DFailedError();
    }
    const {
      supportedFormats: u
    } = e.infoFor3D;
    return c.assets.map(s => {
      const e = (0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_12__.getMimeTypeFormatId)(s.contentType, u);
      if (!e) throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_9__.UnsupportedFormatUploadedError(e);
      return new _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_8__.ServiceAsset(s.assetName, s.contentType, [new _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_8__.ServiceAssetPart(s.assetURL, s.assetHash)]);
    });
  });
  return _V.apply(this, arguments);
}
function X(e, t) {
  return (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(e, t);
}
function Y(_x41, _x42) {
  return _Y.apply(this, arguments);
}
function _Y() {
  _Y = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t) {
    const o = (yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(e, t)).data.statusUrl;
    for (;;) {
      const e = (yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(o, {
        query: {
          f: "json"
        },
        responseType: "json"
      })).data;
      switch (e.status) {
        case "Completed":
          return (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(e.resultUrl, {
            query: {
              f: "json"
            },
            responseType: "json"
          });
        case "CompletedWithErrors":
          throw new Error(e.status);
        case "Failed ImportChanges":
        case "InProgress":
        case "Pending":
        case "ExportAttachments":
        case "ExportChanges":
        case "ExportingData":
        case "ExportingSnapshot":
        case "ImportAttachments":
        case "ProvisioningReplica":
        case "UnRegisteringReplica":
          break;
        default:
          throw new Error();
      }
      yield (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.after)(es);
    }
  });
  return _Y.apply(this, arguments);
}
function Z(s) {
  return !!s.infoFor3D && !!s.url;
}
function _(s) {
  const {
      infoFor3D: e
    } = s,
    t = (0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_12__.getMimeTypeFormatId)("model/gltf-binary", e.supportedFormats) ?? (0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_12__.getFilenameFormatId)("glb", e.supportedFormats);
  if (!t) throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_9__.NoGlbSupportError();
  return t;
}
function ss() {
  return _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger("esri.layers.graphics.sources.support.uploadAssets");
}
const es = (0,_core_time_js__WEBPACK_IMPORTED_MODULE_5__.Milliseconds)(1e3);


/***/ }),

/***/ 29698:
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/support/uploads.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "uploadItem": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../request.js */ 1897);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/has.js */ 67087);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ 30801);
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ 55050);
/* harmony import */ var _support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../support/arcgisLayerUrl.js */ 4583);
/* harmony import */ var _support_base64Utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../support/base64Utils.js */ 84222);
/* harmony import */ var _support_progressUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../support/progressUtils.js */ 12928);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/







const i = 1e6,
  p = 20 * i,
  l = 2e9,
  m = 3;
function c(_x, _x2, _x3) {
  return _c.apply(this, arguments);
}
function _c() {
  _c = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* ({
    data: r,
    name: c,
    description: u
  }, d, h) {
    let j = null;
    try {
      const w = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.join)(d, "uploads"),
        y = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.join)(w, "info"),
        {
          data: g
        } = yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(y, {
          query: {
            f: "json"
          },
          responseType: "json"
        });
      (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(h);
      const U = (0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_5__.isHostedAgolService)(d),
        q = g.maxUploadFileSize * i,
        z = U ? l : q,
        T = U ? Math.min(p, q) : p;
      if (r.size > z) throw new Error("Data too large");
      const A = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.join)(w, "register"),
        {
          data: E
        } = yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(A, {
          query: {
            f: "json",
            itemName: f(c),
            description: u
          },
          responseType: "json",
          method: "post"
        });
      if ((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(h), !E.success) throw new Error("Registration failed");
      const {
        itemID: P
      } = E.item;
      j = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.join)(w, P);
      const D = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.join)(j, "uploadPart"),
        I = Math.ceil(r.size / T),
        M = new Array();
      for (let e = 0; e < I; ++e) M.push(r.slice(e * T, Math.min((e + 1) * T, r.size)));
      const b = M.slice().reverse(),
        v = new Array(),
        x = (0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeProgressManager)(I, h?.onProgress, "uploadItem"),
        F = /*#__PURE__*/function () {
          var _ref = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
            for (; 0 !== b.length;) {
              const t = M.length - b.length,
                s = b.pop(),
                r = new FormData(),
                a = x.simulate(t, (0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_7__.estimatedTransferTime)(s.size));
              try {
                const a = s;
                r.append("f", "json"), r.append("file", a), r.append("partId", `${t}`);
                const {
                  data: n
                } = yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(D, {
                  timeout: 0,
                  body: r,
                  responseType: "json",
                  method: "post"
                });
                if ((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(h), !n.success) throw new Error("Part upload failed");
              } finally {
                a.remove();
              }
            }
          });
          return function F() {
            return _ref.apply(this, arguments);
          };
        }();
      for (let e = 0; e < m && 0 !== b.length; ++e) v.push(F());
      yield Promise.all(v);
      const _ = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.join)(j, "commit"),
        {
          data: C
        } = yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(_, {
          query: {
            f: "json",
            parts: M.map((e, o) => o).join(",")
          },
          responseType: "json",
          method: "post"
        });
      if ((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(h), !C.success) throw new Error("Commit failed");
      return C.item;
    } catch (w) {
      if (null != j) {
        const o = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.join)(j, "delete");
        yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(o, {
          query: {
            f: "json"
          },
          responseType: "json",
          method: "post"
        });
      }
      throw w;
    }
  });
  return _c.apply(this, arguments);
}
function f(e) {
  return e.replaceAll("/", "_").replaceAll("\\", "_");
}


/***/ })

}]);
//# sourceMappingURL=node_modules_arcgis_core_layers_graphics_sources_support_uploadAssets_js.js.map