{"version":3,"file":"default-node_modules_arcgis_core_views_2d_engine_BitmapContainer_js-node_modules_arcgis_core_-7c8422.js","mappings":"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","sources":["./node_modules/@arcgis/core/views/2d/engine/Bitmap.js","./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js","./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","./node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js","./node_modules/@arcgis/core/views/2d/viewStateUtils.js","./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{createResolver as t,onAbortOrThrow as e,throwIfNotAbortError as s}from\"../../../core/promiseUtils.js\";import{g as i,h as r,r as h,l as o,m as u}from\"../../../chunks/mat3.js\";import{c as a}from\"../../../chunks/mat3f32.js\";import{f as n}from\"../../../chunks/vec2f32.js\";import{DisplayObject as d}from\"./DisplayObject.js\";import l from\"./ImageryBitmapSource.js\";import{ContextType as c}from\"../../webgl/contextUtils.js\";import{SizedPixelFormat as _,PixelFormat as p,TextureWrapMode as m}from\"../../webgl/enums.js\";import{Texture as x}from\"../../webgl/Texture.js\";import{TextureDescriptor as g}from\"../../webgl/TextureDescriptor.js\";function f(t){return t&&\"render\"in t}function w(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function v(t){return f(t)?t instanceof l?t.getRenderedRasterPixels()?.renderedRasterPixels:w(t):t}class b extends d{constructor(t=null,e=!1){super(),this.blendFunction=\"standard\",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this._texture=null,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.immutable=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null),null!=this._uploadStatus&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){null==t&&null==this._source||(this._source=t,this.invalidateTexture(),this.requestRender())}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}async setSourceAsync(s,i){null!=this._uploadStatus&&this._uploadStatus.controller.abort();const r=new AbortController,h=t();return e(i,(()=>r.abort())),e(r,(t=>h.reject(t))),this._uploadStatus={controller:r,resolver:h},this.source=s,h.promise}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):this._source&&(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width))}updateTransitionProperties(t,e){t>=64&&(this.fadeTransitionEnabled=!1,this.inFadeTransition=!1),super.updateTransitionProperties(t,e)}setTransform(t){const e=i(this.transforms.dvs),[s,a]=t.toScreenNoRotation([0,0],[this.x,this.y]),d=this.resolution/this.pixelRatio/t.resolution,l=d*this.width,c=d*this.height,_=Math.PI*this.rotation/180;r(e,e,n(s,a)),r(e,e,n(l/2,c/2)),h(e,e,-_),r(e,e,n(-l/2,-c/2)),o(e,e,n(l,c)),u(this.transforms.dvs,t.displayViewMat3,e)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}async updateTexture({context:t,painter:e}){if(!this._textureInvalidated)return;if(this._textureInvalidated=!1,this._texture||(this._texture=this._createTexture(t)),!this.source)return void this._texture.setData(null);this._texture.resize(this._sourceWidth,this._sourceHeight);const i=v(this.source);try{if(null!=this._uploadStatus){const{controller:t,resolver:s}=this._uploadStatus,r={signal:t.signal},{width:h,height:o}=this,u=this._texture,a=e.textureUploadManager;await a.enqueueTextureUpdate({data:i,texture:u,width:h,height:o},r),s.resolve(),this._uploadStatus=null}else this._texture.setData(i);this.ready()}catch(r){s(r)}}onDetach(){this.destroy()}_createTransforms(){return{dvs:a()}}_createTexture(t){const e=this.immutable&&t.type===c.WEBGL2,s=new g;return s.internalFormat=e?_.RGBA8:p.RGBA,s.wrapMode=m.CLAMP_TO_EDGE,s.isImmutable=e,s.width=this._sourceWidth,s.height=this._sourceHeight,new x(t,s)}}export{b as Bitmap,f as isImageSource,w as rasterize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{brushes as e}from\"./brushes.js\";import{WGLDrawPhase as r}from\"./webgl/enums.js\";import s from\"./webgl/WGLContainer.js\";class a extends s{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(e){super.beforeRender(e),this._manageFade()}prepareRenderPasses(s){const a=s.registerRenderPass({name:\"bitmap\",brushes:[e.bitmap],target:()=>this.children,drawPhase:r.MAP});return[...super.prepareRenderPasses(s),a]}_manageFade(){this.children.reduce(((e,r)=>e+(r.inFadeTransition?1:0)),0)>=2?(this.children.forEach((e=>e.blendFunction=\"additive\")),this._hasCrossfade=!0):(this.children.forEach((e=>e.blendFunction=\"standard\")),this._hasCrossfade=!1)}}export{a as BitmapContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nclass l{constructor(l,e,t){this.pixelBlock=l,this.extent=e,this.originalPixelBlock=t}get width(){return null!=this.pixelBlock?this.pixelBlock.width:0}get height(){return null!=this.pixelBlock?this.pixelBlock.height:0}render(l){const e=this.pixelBlock;if(null==e)return;const t=this.filter({extent:this.extent,pixelBlock:this.originalPixelBlock??e});if(null==t.pixelBlock)return;t.pixelBlock.maskIsAlpha&&(t.pixelBlock.premultiplyAlpha=!0);const i=t.pixelBlock.getAsRGBA(),h=l.createImageData(t.pixelBlock.width,t.pixelBlock.height);h.data.set(i),l.putImageData(h,0,0)}getRenderedRasterPixels(){const l=this.filter({extent:this.extent,pixelBlock:this.pixelBlock});return null==l.pixelBlock?null:(l.pixelBlock.maskIsAlpha&&(l.pixelBlock.premultiplyAlpha=!0),{width:l.pixelBlock.width,height:l.pixelBlock.height,renderedRasterPixels:new Uint8Array(l.pixelBlock.getAsRGBA().buffer)})}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import\"../../../../core/has.js\";import{debounce as i,throwIfAborted as o,throwIfAbortError as r,eachAlways as s}from\"../../../../core/promiseUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as p}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{create as n,toExtent as m}from\"../../../../geometry/support/aaBoundingRect.js\";import{getInfo as l}from\"../../../../geometry/support/spatialReferenceUtils.js\";import h from\"../../../../layers/support/TileInfo.js\";import{getOuterSize as d,getBBox as c}from\"../../viewStateUtils.js\";import{Bitmap as u}from\"../../engine/Bitmap.js\";import g from\"../../tiling/TileInfoView.js\";import f from\"../../tiling/TileKey.js\";const y=n(),x=[0,0],S=new f(0,0,0,0),_={container:null,fetchSource:null,requestUpdate:null,imageMaxWidth:2048,imageMaxHeight:2048,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1};let w=class extends e{constructor(t){super(t),this._imagePromise=null,this.bitmaps=[],this.hidpi=_.hidpi,this.imageMaxWidth=_.imageMaxWidth,this.imageMaxHeight=_.imageMaxHeight,this.imageRotationSupported=_.imageRotationSupported,this.imageNormalizationSupported=_.imageNormalizationSupported,this.update=i((async(t,e)=>{if(o(e),!t.stationary||this.destroyed)return;const i=t.state,s=l(i.spatialReference),a=this.hidpi?t.pixelRatio:1,p=this.imageNormalizationSupported&&i.worldScreenWidth&&i.worldScreenWidth<i.size[0],n=this.imageMaxWidth??0,m=this.imageMaxHeight??0;p?(x[0]=i.worldScreenWidth,x[1]=i.size[1]):this.imageRotationSupported?(x[0]=i.size[0],x[1]=i.size[1]):d(x,i);const h=Math.floor(x[0]*a)>n||Math.floor(x[1]*a)>m,c=s&&(i.extent.xmin<s.valid[0]||i.extent.xmax>s.valid[1]),u=!this.imageNormalizationSupported&&c,g=!h&&!u,f=this.imageRotationSupported?i.rotation:0,y=this.container.children.slice();if(g){const t=p?i.paddedViewState.center:i.center;this._imagePromise&&console.error(\"Image promise was not defined!\"),this._imagePromise=this._singleExport(i,x,t,i.resolution,f,a,e)}else{let t=Math.min(n,m);u&&(t=Math.min(i.worldScreenWidth,t)),this._imagePromise=this._tiledExport(i,t,a,e)}try{const t=await this._imagePromise??[];o(e);const i=[];if(this._imagePromise=null,this.destroyed)return;this.bitmaps=t;for(const e of y)t.includes(e)||i.push(e.fadeOut().then((()=>{e.remove(),e.destroy()})));for(const e of t)i.push(e.fadeIn());await Promise.all(i)}catch(S){this._imagePromise=null,r(S)}}),5e3),this.updateExports=i((async t=>{const e=[];for(const i of this.container.children){if(!i.visible||!i.stage)return;e.push(t(i).then((()=>{i.invalidateTexture(),i.requestRender()})))}this._imagePromise=s(e).then((()=>this._imagePromise=null)),await this._imagePromise}))}destroy(){this.bitmaps.forEach((t=>t.destroy())),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}async _export(t,e,i,r,s,a){const p=await this.fetchSource(t,Math.floor(e*s),Math.floor(i*s),{rotation:r,pixelRatio:s,signal:a});o(a);const n=new u(null,!0);return n.x=t.xmin,n.y=t.ymax,n.resolution=t.width/e,n.rotation=r,n.pixelRatio=s,n.opacity=0,this.container.addChild(n),await n.setSourceAsync(p,a),o(a),n}async _singleExport(t,e,i,o,r,s,a){c(y,i,o,e);const p=m(y,t.spatialReference);return[await this._export(p,e[0],e[1],r,s,a)]}_tiledExport(t,e,i,o){const r=h.create({size:e,spatialReference:t.spatialReference,scales:[t.scale]}),s=new g(r),a=s.getTileCoverage(t);if(!a)return null;const p=[];return a.forEach(((r,a,n,l)=>{S.set(r,a,n,0),s.getTileBounds(y,S);const h=m(y,t.spatialReference);p.push(this._export(h,e,e,0,i,o).then((t=>(0!==l&&(S.set(r,a,n,l),s.getTileBounds(y,S),t.x=y[0],t.y=y[3]),t))))})),Promise.all(p)}};t([a()],w.prototype,\"_imagePromise\",void 0),t([a()],w.prototype,\"bitmaps\",void 0),t([a()],w.prototype,\"container\",void 0),t([a()],w.prototype,\"fetchSource\",void 0),t([a()],w.prototype,\"hidpi\",void 0),t([a()],w.prototype,\"imageMaxWidth\",void 0),t([a()],w.prototype,\"imageMaxHeight\",void 0),t([a()],w.prototype,\"imageRotationSupported\",void 0),t([a()],w.prototype,\"imageNormalizationSupported\",void 0),t([a()],w.prototype,\"requestUpdate\",void 0),t([a()],w.prototype,\"updating\",null),w=t([p(\"esri.views.2d.layers.support.ExportStrategy\")],w);const v=w;export{v as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nconst t=Math.PI/180;function n(n){return n*t}function o(t,o){const a=n(o.rotation),r=Math.abs(Math.cos(a)),s=Math.abs(Math.sin(a)),[u,c]=o.size;return t[0]=Math.round(c*s+u*r),t[1]=Math.round(c*r+u*s),t}function a(t,n,o,a){const[r,s]=n,[u,c]=a,h=.5*o;return t[0]=r-h*u,t[1]=s-h*c,t[2]=r+h*u,t[3]=s+h*c,t}export{a as getBBox,o as getOuterSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/reactiveUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";const a=a=>{let c=class extends a{initialize(){this.addHandles(o((()=>this.layer),\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([i(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{a as default};\n"],"names":["createResolver","t","onAbortOrThrow","e","throwIfNotAbortError","s","g","i","h","r","l","o","m","u","c","a","f","n","DisplayObject","d","ContextType","SizedPixelFormat","_","PixelFormat","p","TextureWrapMode","Texture","x","TextureDescriptor","w","document","createElement","width","height","render","getContext","v","getRenderedRasterPixels","renderedRasterPixels","b","constructor","blendFunction","_sourceWidth","_sourceHeight","_textureInvalidated","_texture","stencilRef","coordScale","_height","pixelRatio","resolution","rotation","_source","_width","y","immutable","source","requestRender","bind","destroy","dispose","_uploadStatus","controller","abort","isSourceScaled","invalidateTexture","beforeRender","updateTexture","setSourceAsync","AbortController","reject","resolver","promise","HTMLImageElement","naturalHeight","naturalWidth","updateTransitionProperties","fadeTransitionEnabled","inFadeTransition","setTransform","transforms","dvs","toScreenNoRotation","Math","PI","displayViewMat3","setSamplingProfile","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","bindTexture","context","painter","_createTexture","setData","resize","signal","textureUploadManager","enqueueTextureUpdate","data","texture","resolve","ready","onDetach","_createTransforms","type","WEBGL2","internalFormat","RGBA8","RGBA","wrapMode","CLAMP_TO_EDGE","isImmutable","Bitmap","isImageSource","rasterize","brushes","WGLDrawPhase","arguments","_hasCrossfade","requiresDedicatedFBO","_manageFade","prepareRenderPasses","registerRenderPass","name","bitmap","target","children","drawPhase","MAP","reduce","forEach","BitmapContainer","pixelBlock","extent","originalPixelBlock","filter","maskIsAlpha","premultiplyAlpha","getAsRGBA","createImageData","set","putImageData","Uint8Array","buffer","default","debounce","throwIfAborted","throwIfAbortError","eachAlways","property","subclass","create","toExtent","getInfo","getOuterSize","getBBox","S","container","fetchSource","requestUpdate","imageMaxWidth","imageMaxHeight","imageRotationSupported","imageNormalizationSupported","hidpi","_imagePromise","bitmaps","update","stationary","destroyed","state","spatialReference","worldScreenWidth","size","floor","xmin","valid","xmax","slice","paddedViewState","center","console","error","_singleExport","min","_tiledExport","includes","push","fadeOut","then","remove","fadeIn","Promise","all","updateExports","visible","stage","updating","_export","ymax","opacity","addChild","scales","scale","getTileCoverage","getTileBounds","prototype","abs","cos","sin","round","isAbortError","on","initialize","addHandles","layer","doRefresh","dataChanged","catch","getLogger"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1,2,3,4,5]}