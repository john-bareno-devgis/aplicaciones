"use strict";
(self["webpackChunkrealgis"] = self["webpackChunkrealgis"] || []).push([["node_modules_arcgis_core_layers_support_labelFormatUtils_js"],{

/***/ 16674:
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/labelFormatUtils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "createLabelFunction": () => (/* binding */ w),
/* harmony export */   "formatField": () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ 32995);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Logger.js */ 28191);
/* harmony import */ var _core_sql_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/sql.js */ 96204);
/* harmony import */ var _intl_date_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../intl/date.js */ 84836);
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../intl/number.js */ 39634);
/* harmony import */ var _domainUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./domainUtils.js */ 72472);
/* harmony import */ var _fieldUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./fieldUtils.js */ 32746);
/* harmony import */ var _labelUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./labelUtils.js */ 60802);
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../support/arcadeOnDemand.js */ 77238);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/









const m = _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger("esri.layers.support.labelFormatUtils"),
  p = {
    type: "simple",
    evaluate: () => null
  },
  d = {
    getAttribute: (e, r) => e.field(r)
  };
function w(_x, _x2, _x3) {
  return _w.apply(this, arguments);
}
function _w() {
  _w = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (r, n, o) {
    if (!r || !r.symbol || !n) return p;
    const a = r.where,
      l = (0,_labelUtils_js__WEBPACK_IMPORTED_MODULE_8__.getLabelExpression)(r);
    let i;
    if ("arcade" === l.type) {
      const r = yield (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_9__.createLabelExpression)(l.expression, o, n);
      if (null == r) return p;
      i = {
        type: "arcade",
        evaluate(t, n) {
          try {
            const e = "attributes" in t ? r.repurposeFeature(t) : t;
            e.contextTimeZone = n ?? null;
            const o = r.evaluate({
              $view: {
                timeZone: n
              },
              $feature: e
            }, r.services);
            if (null != o) return o.toString();
          } catch (o) {
            m.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("arcade-expression-error", "Encountered an error when evaluating label expression for feature", {
              error: o,
              feature: t,
              expression: l
            }));
          }
          return null;
        },
        needsHydrationToEvaluate: () => null == (0,_labelUtils_js__WEBPACK_IMPORTED_MODULE_8__.getSingleFieldArcadeExpression)(l.expression)
      };
    } else i = {
      type: "simple",
      evaluate: e => l.expression.replaceAll(/{[^}]*}/g, r => {
        const t = r.slice(1, -1),
          o = n.get(t);
        if (!o) return r;
        let a = null;
        if ("attributes" in e) {
          e && e.attributes && (a = e.attributes[o.name]);
        } else a = e.field(o.name);
        return null == a ? "" : g(a, o);
      })
    };
    if (a) {
      let r;
      try {
        r = yield (0,_core_sql_js__WEBPACK_IMPORTED_MODULE_3__.parseWhereClause)(a, n);
      } catch (s) {
        return m.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("bad-where-clause", "Encountered an error when evaluating where clause, ignoring", {
          where: a,
          error: s
        })), p;
      }
      const o = i.evaluate;
      i.evaluate = (t, n) => {
        const l = "attributes" in t ? void 0 : d;
        try {
          if (r.testFeature(t, l)) return o(t, n);
        } catch (s) {
          m.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("bad-where-clause", "Encountered an error when evaluating where clause for feature", {
            where: a,
            feature: t,
            error: s
          }));
        }
        return null;
      };
    }
    return i;
  });
  return _w.apply(this, arguments);
}
function g(e, r) {
  if (null == e) return "";
  const t = r.domain;
  if (t) if ("codedValue" === t.type || "coded-value" === t.type) {
    const r = e;
    for (const e of t.codedValues) if (e.code === r) return e.name;
  } else if ("range" === t.type) {
    const {
        max: n,
        min: o
      } = (0,_domainUtils_js__WEBPACK_IMPORTED_MODULE_6__.getDomainRange)(r),
      a = +e;
    if (null != o && null != n && o <= a && a <= n) return t.name;
  }
  let u = e;
  return (0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_7__.isDateField)(r) ? u = (0,_intl_date_js__WEBPACK_IMPORTED_MODULE_4__.formatDate)(u, (0,_intl_date_js__WEBPACK_IMPORTED_MODULE_4__.convertDateFormatToIntlOptions)("short-date")) : (0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_7__.isNumericField)(r) && (u = (0,_intl_number_js__WEBPACK_IMPORTED_MODULE_5__.formatNumber)(+u)), u || "";
}


/***/ })

}]);
//# sourceMappingURL=node_modules_arcgis_core_layers_support_labelFormatUtils_js.js.map