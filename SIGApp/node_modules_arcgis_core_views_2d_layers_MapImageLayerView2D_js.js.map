{"version":3,"file":"node_modules_arcgis_core_views_2d_layers_MapImageLayerView2D_js.js","mappings":"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","sources":["./node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js","./node_modules/@arcgis/core/views/layers/MapImageLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as r}from\"../../../core/reactiveUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GraphicsCollection as h}from\"../../../support/GraphicsCollection.js\";import{BitmapContainer as o}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import g from\"./graphics/GraphicsView2D.js\";import n from\"./graphics/HighlightGraphicContainer.js\";import l from\"./support/ExportStrategy.js\";import m from\"../../layers/LayerView.js\";import c from\"../../layers/MapImageLayerView.js\";import d from\"../../layers/RefreshableLayerView.js\";import{MapServiceLayerViewHelper as u}from\"../../layers/support/MapServiceLayerViewHelper.js\";import{createQueryGeometry as y}from\"../../support/drapedUtils.js\";let f=class extends(c(d(p(m)))){constructor(){super(...arguments),this._highlightGraphics=new h,this._updateHash=\"\"}fetchPopupFeatures(t,e){return this._popupHighlightHelper.fetchPopupFeatures(t,e)}update(t){const r=`${this.exportImageVersion}/${t.state.id}/${t.pixelRatio}/${t.stationary}`;this._updateHash!==r&&(this._updateHash=r,this.strategy.update(t).catch((t=>{i(t)||e.getLogger(this).error(t)})),t.stationary&&this._popupHighlightHelper.updateHighlightedFeatures(t.state.resolution)),this._highlightView.processUpdate(t)}attach(){const{imageMaxWidth:t,imageMaxHeight:e,version:i}=this.layer,s=i>=10.3,a=i>=10;this._bitmapContainer=new o,this.container.addChild(this._bitmapContainer),this._highlightView=new g({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new n(this.view.featuresTilingScheme),defaultPointSymbolEnabled:!1}),this.container.addChild(this._highlightView.container),this._popupHighlightHelper=new u({createFetchPopupFeaturesQueryGeometry:(t,e)=>y(t,e,this.view),highlightGraphics:this._highlightGraphics,highlightGraphicUpdated:(t,e)=>{this._highlightView.graphicUpdateHandler({graphic:t,property:e})},layerView:this,updatingHandles:this._updatingHandles}),this.strategy=new l({container:this._bitmapContainer,fetchSource:this.fetchImageBitmap.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:t,imageMaxHeight:e,imageRotationSupported:s,imageNormalizationSupported:a,hidpi:!0}),this.addAttachHandles(r((()=>this.exportImageVersion),(()=>this.requestUpdate()))),this.requestUpdate()}detach(){this.strategy.destroy(),this.container.removeAllChildren(),this._bitmapContainer.removeAllChildren(),this._highlightView.destroy(),this._popupHighlightHelper.destroy()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}supportsSpatialReference(t){return this.layer.serviceSupportsSpatialReference(t)}async doRefresh(){this._updateHash=\"\",this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(t,e,i,r){return this.layer.fetchImage(t,e,i,{timeExtent:this.timeExtent,floors:this.floors,...r})}fetchImageBitmap(t,e,i,r){return this.layer.fetchImageBitmap(t,e,i,{timeExtent:this.timeExtent,floors:this.floors,...r})}highlight(t){return this._popupHighlightHelper.highlight(t)}};t([s()],f.prototype,\"strategy\",void 0),t([s()],f.prototype,\"updating\",void 0),f=t([a(\"esri.views.2d.layers.MapImageLayerView2D\")],f);const w=f;export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as o}from\"../../layers/support/commonProperties.js\";import{ExportImageParameters as s}from\"../../layers/support/ExportImageParameters.js\";const p=p=>{let a=class extends p{initialize(){this.exportImageParameters=new s({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get floors(){return this.view?.floors??null}get exportImageVersion(){return this.exportImageParameters?.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),this.commitProperty(\"floors\"),(this._get(\"exportImageVersion\")||0)+1}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([r()],a.prototype,\"exportImageParameters\",void 0),e([r({readOnly:!0})],a.prototype,\"floors\",null),e([r({readOnly:!0})],a.prototype,\"exportImageVersion\",null),e([r()],a.prototype,\"layer\",void 0),e([r()],a.prototype,\"suspended\",void 0),e([r(o)],a.prototype,\"timeExtent\",void 0),a=e([t(\"esri.views.layers.MapImageLayerView\")],a),a};export{p as default};\n"],"names":["_","t","e","isAbortError","i","watch","r","property","s","subclass","a","GraphicsCollection","h","BitmapContainer","o","LayerView2DMixin","p","g","n","l","m","c","d","MapServiceLayerViewHelper","u","createQueryGeometry","y","f","constructor","arguments","_highlightGraphics","_updateHash","fetchPopupFeatures","_popupHighlightHelper","update","exportImageVersion","state","id","pixelRatio","stationary","strategy","catch","getLogger","error","updateHighlightedFeatures","resolution","_highlightView","processUpdate","attach","imageMaxWidth","imageMaxHeight","version","layer","_bitmapContainer","container","addChild","view","graphics","requestUpdateCallback","requestUpdate","featuresTilingScheme","defaultPointSymbolEnabled","createFetchPopupFeaturesQueryGeometry","highlightGraphics","highlightGraphicUpdated","graphicUpdateHandler","graphic","layerView","updatingHandles","_updatingHandles","fetchSource","fetchImageBitmap","bind","imageRotationSupported","imageNormalizationSupported","hidpi","addAttachHandles","detach","destroy","removeAllChildren","moveStart","viewChange","moveEnd","supportsSpatialReference","serviceSupportsSpatialReference","doRefresh","isUpdating","updating","updateRequested","fetchImage","timeExtent","floors","highlight","prototype","w","default","combinedViewLayerTimeExtentProperty","ExportImageParameters","initialize","exportImageParameters","commitProperty","_get","canResume","isEmpty","readOnly"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1]}