{"version":3,"file":"node_modules_arcgis_core_views_2d_layers_StreamLayerView2D_js.js","mappings":"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","sources":["./node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js","./node_modules/@arcgis/core/views/layers/StreamLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{handlesGroup as r,makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as i}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import l from\"./FeatureLayerView2D.js\";import{toJSONGeometryType as p}from\"./support/util.js\";import c from\"../../layers/StreamLayerView.js\";function u(e,t){if(null==e&&null==t)return null;const r={};return null!=t&&(r.geometry=t.toJSON()),null!=e&&(r.where=e),r}let d=class extends(c(l)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null,this._enabledEventTypes=new Set}initialize(){this.addHandles([i((()=>this.layer.customParameters),(e=>this._proxy.updateCustomParameters(e))),this.layer.on(\"send-message-to-socket\",(e=>this._proxy.sendMessageToSocket(e))),this.layer.on(\"send-message-to-client\",(e=>this._proxy.sendMessageToClient(e))),i((()=>this.layer.purgeOptions),(()=>this._update())),i((()=>this.suspended),this._onSuspendedChange.bind(this))],\"constructor\")}get connectionError(){return this.pipelineErrorString?new t(\"stream-controller\",this.pipelineErrorString):null}on(e,t){if(Array.isArray(e))return r(e.map((e=>this.on(e,t))));const i=[\"data-received\",\"message-received\"].includes(e);i&&(this._enabledEventTypes.add(e),this._proxy.enableEvent(e,!0));const n=super.on(e,t),o=this;return s((()=>{n.remove(),i&&(o._proxy.closed||o.hasEventListener(e)||o._proxy.enableEvent(e,!1))}))}queryLatestObservations(e,r){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new t(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),r).then((e=>{const t=a.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){this._proxy?.pauseStream()}_doResume(){this._proxy?.resumeStream()}_createClientOptions(){return{...super._createClientOptions(),setProperty:e=>{this.set(e.propertyName,e.value)}}}_createTileRendererHash(e){const t=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(u(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return super._createTileRendererHash(e)+t}async _createServiceOptions(){const e=this.layer,{objectIdField:t}=e,r=e.fields.map((e=>e.toJSON())),s=p(e.geometryType),i=e.timeInfo?.toJSON()||null,n=e.spatialReference?e.spatialReference.toJSON():null;return{type:\"stream\",isPaused:this._isUserPaused,fields:r,fieldsIndex:this.layer.fieldsIndex.toJSON(),geometryType:s,objectIdField:t,timeInfo:i,source:this.layer.parsedUrl,serviceFilter:u(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enabledEventTypes:Array.from(this._enabledEventTypes.values()),spatialReference:n,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:e.customParameters}}};e([n()],d.prototype,\"pipelineConnectionStatus\",void 0),e([n()],d.prototype,\"pipelineErrorString\",void 0),e([n({readOnly:!0})],d.prototype,\"connectionError\",null),e([n({readOnly:!0})],d.prototype,\"_streamConnectionStatus\",null),d=e([o(\"esri.views.2d.layers.StreamLayerView2D\")],d);const y=d;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import t from\"../../layers/support/FeatureFilter.js\";const o=o=>{let i=class extends o{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return this._isUserPaused?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:t})],i.prototype,\"filter\",void 0),i=s([r(\"esri.layers.mixins.StreamLayerView\")],i),i};export{o as default};\n"],"names":["_","e","t","handlesGroup","r","makeHandle","s","watch","i","property","n","subclass","o","a","l","toJSONGeometryType","p","c","u","geometry","toJSON","where","d","constructor","arguments","pipelineConnectionStatus","pipelineErrorString","_enabledEventTypes","Set","initialize","addHandles","layer","customParameters","_proxy","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","purgeOptions","_update","suspended","_onSuspendedChange","bind","connectionError","Array","isArray","map","includes","add","enableEvent","remove","closed","hasEventListener","queryLatestObservations","timeInfo","endField","startField","trackIdField","_cleanUpQuery","then","fromJSON","features","forEach","sourceLayer","detach","_streamConnectionStatus","_doPause","pauseStream","_doResume","resumeStream","_createClientOptions","setProperty","set","propertyName","value","_createTileRendererHash","JSON","stringify","definitionExpression","geometryDefinition","_createServiceOptions","objectIdField","fields","geometryType","spatialReference","type","isPaused","_isUserPaused","fieldsIndex","source","parsedUrl","serviceFilter","enabledEventTypes","from","values","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","prototype","readOnly","y","default","resume","pause","filter","connectionStatus"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1]}