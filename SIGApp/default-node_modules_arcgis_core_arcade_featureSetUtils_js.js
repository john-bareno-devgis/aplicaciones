"use strict";
(self["webpackChunkrealgis"] = self["webpackChunkrealgis"] || []).push([["default-node_modules_arcgis_core_arcade_featureSetUtils_js"],{

/***/ 16535:
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureSetCollection.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e {
  constructor() {
    this.declaredRootClass = "esri.arcade.featureSetCollection", this._layerById = {}, this._layerByName = {};
  }
  add(e, t, a) {
    this._layerById[t] = a, this._layerByName[e] = a;
  }
  featureSetByName(e, t = !0, a = ["*"]) {
    var _this = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return void 0 === _this._layerByName[e] ? null : _this._layerByName[e];
    })();
  }
  featureSetById(e, t = !0, a = ["*"]) {
    var _this2 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return void 0 === _this2._layerById[e] ? null : _this2._layerById[e];
    })();
  }
  castToText(e = !1) {
    return "object, FeatureSetCollection";
  }
}


/***/ }),

/***/ 42969:
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureSetUtils.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "constructAssociationMetaDataFeatureSetFromUrl": () => (/* binding */ T),
/* harmony export */   "constructFeatureSet": () => (/* binding */ g),
/* harmony export */   "constructFeatureSetFromPortalItem": () => (/* binding */ q),
/* harmony export */   "constructFeatureSetFromRelationship": () => (/* binding */ k),
/* harmony export */   "constructFeatureSetFromUrl": () => (/* binding */ F),
/* harmony export */   "convertToFeatureSet": () => (/* binding */ j),
/* harmony export */   "createFeatureSetCollectionFromMap": () => (/* binding */ D),
/* harmony export */   "createFeatureSetCollectionFromService": () => (/* binding */ E),
/* harmony export */   "initialiseMetaDataCache": () => (/* binding */ L)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../request.js */ 1897);
/* harmony import */ var _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./featureSetCollection.js */ 16535);
/* harmony import */ var _chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../chunks/languageUtils.js */ 44819);
/* harmony import */ var _featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./featureset/actions/AttributeFilter.js */ 57187);
/* harmony import */ var _featureset_actions_GroupBy_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./featureset/actions/GroupBy.js */ 33069);
/* harmony import */ var _featureset_actions_OrderBy_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./featureset/actions/OrderBy.js */ 89843);
/* harmony import */ var _featureset_actions_SpatialFilter_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./featureset/actions/SpatialFilter.js */ 5769);
/* harmony import */ var _featureset_actions_Top_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./featureset/actions/Top.js */ 98477);
/* harmony import */ var _featureset_sources_FeatureLayerDynamic_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./featureset/sources/FeatureLayerDynamic.js */ 67944);
/* harmony import */ var _featureset_sources_FeatureLayerMemory_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./featureset/sources/FeatureLayerMemory.js */ 3870);
/* harmony import */ var _featureset_sources_FeatureLayerRelated_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./featureset/sources/FeatureLayerRelated.js */ 69684);
/* harmony import */ var _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./featureset/support/cache.js */ 83865);
/* harmony import */ var _featureset_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./featureset/support/errorsupport.js */ 23373);
/* harmony import */ var _featureset_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./featureset/support/FeatureSet.js */ 7014);
/* harmony import */ var _featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./featureset/support/shared.js */ 84940);
/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../core/sql/WhereClause.js */ 63981);
/* harmony import */ var _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../layers/FeatureLayer.js */ 88749);
/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../portal/PortalItem.js */ 28518);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/


















function L() {
  null === _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache && (_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache = new _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"]());
}
function I(_x, _x2) {
  return _I.apply(this, arguments);
}
function _I() {
  _I = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t) {
    if (_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache) {
      const r = _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.getLayerInfo(e);
      if (r) {
        const a = yield r;
        return new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"]({
          url: e,
          outFields: t,
          sourceJSON: a
        });
      }
      const n = new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"]({
          url: e,
          outFields: t
        }),
        i = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
          return yield n.load(), n.sourceJSON;
        })();
      if (_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache) {
        _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.setLayerInfo(e, i);
        try {
          return yield i, n;
        } catch (a) {
          throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.clearLayerInfo(e), a;
        }
      }
      return yield i, n;
    }
    return new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"]({
      url: e,
      outFields: t
    });
  });
  return _I.apply(this, arguments);
}
function F(_x3, _x4, _x5, _x6, _x7) {
  return _F.apply(this, arguments);
}
function _F() {
  _F = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t, a, r, n, i = null) {
    return g(yield I(e, ["*"]), t, a, r, n, i);
  });
  return _F.apply(this, arguments);
}
function g(e, t = null, r = null, n = !0, i = null, s = null) {
  if (e instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"] || (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_3__.$)(e)) {
    const a = {
      layer: e,
      spatialReference: t,
      outFields: r,
      includeGeometry: n,
      lrucache: i,
      interceptor: s
    };
    return !0 == !(e.url || !e.source) ? new _featureset_sources_FeatureLayerMemory_js__WEBPACK_IMPORTED_MODULE_10__["default"](a) : new _featureset_sources_FeatureLayerDynamic_js__WEBPACK_IMPORTED_MODULE_9__["default"](a);
  }
  const l = g(e.parent, t, r, n, i, s);
  return l.filter(_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_16__.WhereClause.create(e.parent.subtypeField + "=" + e.subtypeCode.toString(), e.parent.fieldsIndex, l.dateFieldsTimeZoneDefaultUTC));
}
function A(_x8) {
  return _A.apply(this, arguments);
}
function _A() {
  _A = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (t) {
    if (null !== _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache) {
      const e = _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.getLayerInfo(t);
      if (null !== e) return e;
    }
    const a = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const a = yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(t, {
        responseType: "json",
        query: {
          f: "json"
        }
      });
      return a.data ? a.data : null;
    })();
    if (null !== _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache) {
      _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.setLayerInfo(t, a);
      try {
        return yield a;
      } catch (r) {
        throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.clearLayerInfo(t), r;
      }
    }
    return a;
  });
  return _A.apply(this, arguments);
}
function N(_x9, _x10) {
  return _N.apply(this, arguments);
}
function _N() {
  _N = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (t, a) {
    const r = "QUERYDATAELEMTS:" + a.toString() + ":" + t;
    if (null !== _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache) {
      const e = _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.getLayerInfo(r);
      if (null !== e) return e;
    }
    const n = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const r = yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(t + "/queryDataElements", {
        method: "post",
        responseType: "json",
        query: {
          layers: JSON.stringify([a.toString()]),
          f: "json"
        }
      });
      if (r.data) {
        const e = r.data;
        if (e.layerDataElements?.[0]) return e.layerDataElements[0];
      }
      throw new _featureset_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_13__.FeatureSetError(_featureset_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_13__.FeatureSetErrorCodes.DataElementsNotFound);
    })();
    if (null !== _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache) {
      _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.setLayerInfo(r, n);
      try {
        return yield n;
      } catch (i) {
        throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.clearLayerInfo(r), i;
      }
    }
    return n;
  });
  return _N.apply(this, arguments);
}
function C(_x11) {
  return _C.apply(this, arguments);
}
function _C() {
  _C = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (t) {
    if (null !== _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache) {
      const e = _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.getLayerInfo(t);
      if (null !== e) return e;
    }
    const a = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const a = yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(t, {
        responseType: "json",
        query: {
          f: "json"
        }
      });
      if (a.data) {
        const e = a.data;
        return e.layers || (e.layers = []), e.tables || (e.tables = []), e;
      }
      return {
        layers: [],
        tables: []
      };
    })();
    if (null !== _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache) {
      _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.setLayerInfo(t, a);
      try {
        return yield a;
      } catch (r) {
        throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.clearLayerInfo(t), r;
      }
    }
    return a;
  });
  return _C.apply(this, arguments);
}
function T(_x12, _x13) {
  return _T.apply(this, arguments);
}
function _T() {
  _T = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t) {
    const a = {
        metadata: null,
        networkId: -1,
        unVersion: 3,
        terminals: [],
        queryelem: null,
        layerNameLkp: {},
        lkp: null
      },
      r = yield C(e);
    if (a.metadata = r, void 0 !== r.controllerDatasetLayers?.utilityNetworkLayerId && null !== r.controllerDatasetLayers.utilityNetworkLayerId) {
      if (r.layers) for (const e of r.layers) a.layerNameLkp[e.id] = e.name;
      if (r.tables) for (const e of r.tables) a.layerNameLkp[e.id] = e.name;
      const n = r.controllerDatasetLayers.utilityNetworkLayerId;
      a.networkId = n;
      const i = yield N(e, n);
      if (i) {
        a.queryelem = i, a.queryelem?.dataElement && void 0 !== a.queryelem.dataElement.schemaGeneration && (a.unVersion = a.queryelem.dataElement.schemaGeneration), a.lkp = {}, a.queryelem.dataElement.domainNetworks || (a.queryelem.dataElement.domainNetworks = []);
        for (const e of a.queryelem.dataElement.domainNetworks) {
          for (const t of e.edgeSources ?? []) {
            const e = {
              layerId: t.layerId,
              sourceId: t.sourceId,
              className: a.layerNameLkp[t.layerId] ?? null
            };
            e.className && (a.lkp[e.className] = e);
          }
          for (const t of e.junctionSources ?? []) {
            const e = {
              layerId: t.layerId,
              sourceId: t.sourceId,
              className: a.layerNameLkp[t.layerId] ?? null
            };
            e.className && (a.lkp[e.className] = e);
          }
        }
        if (a.queryelem.dataElement.terminalConfigurations) for (const e of a.queryelem.dataElement.terminalConfigurations) for (const t of e.terminals) a.terminals.push({
          terminalId: t.terminalId,
          terminalName: t.terminalName
        });
        const r = yield A(e + "/" + n);
        if (void 0 !== r.systemLayers?.associationsTableId && null !== r.systemLayers.associationsTableId) {
          const n = [];
          a.unVersion >= 4 && (n.push("STATUS"), n.push("PERCENTALONG"));
          let i = yield F(e + "/" + r.systemLayers.associationsTableId.toString(), t, ["OBJECTID", "FROMNETWORKSOURCEID", "TONETWORKSOURCEID", "FROMGLOBALID", "TOGLOBALID", "TOTERMINALID", "FROMTERMINALID", "ASSOCIATIONTYPE", "ISCONTENTVISIBLE", "GLOBALID", ...n], !1, null, null);
          return yield i.load(), a.unVersion >= 4 && (i = i.filter(_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_16__.WhereClause.create("STATUS NOT IN (1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29, 30, 31, 33, 34, 35, 36, 37, 38, 39, 41, 42, 43, 44, 45, 46, 47, 49, 50, 51, 52, 53, 54, 55, 57, 58, 59, 60, 61, 62, 63)", i.getFieldsIndex(), i.dateFieldsTimeZoneDefaultUTC)), yield i.load()), {
            lkp: a.lkp,
            associations: i,
            unVersion: a.unVersion,
            terminals: a.terminals
          };
        }
        return {
          associations: null,
          unVersion: a.unVersion,
          lkp: null,
          terminals: []
        };
      }
      return {
        associations: null,
        unVersion: a.unVersion,
        lkp: null,
        terminals: []
      };
    }
    return {
      associations: null,
      unVersion: a.unVersion,
      lkp: null,
      terminals: []
    };
  });
  return _T.apply(this, arguments);
}
function k(_x14, _x15, _x16) {
  return _k.apply(this, arguments);
}
function _k() {
  _k = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t, a, r = null, n = null, i = !0, s = null, l = null) {
    let o = e.serviceUrl();
    if (!o) return null;
    o = "/" === o.charAt(o.length - 1) ? o + t.relatedTableId.toString() : o + "/" + t.relatedTableId.toString();
    const u = yield F(o, r, n, i, s, l);
    return new _featureset_sources_FeatureLayerRelated_js__WEBPACK_IMPORTED_MODULE_11__["default"]({
      layer: e,
      relatedLayer: u,
      relationship: t,
      objectId: a,
      spatialReference: r,
      outFields: n,
      includeGeometry: i,
      lrucache: s,
      interceptor: l
    });
  });
  return _k.apply(this, arguments);
}
_featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_4__["default"].registerAction(), _featureset_actions_GroupBy_js__WEBPACK_IMPORTED_MODULE_5__["default"].registerAction(), _featureset_actions_OrderBy_js__WEBPACK_IMPORTED_MODULE_6__["default"].registerAction(), _featureset_actions_SpatialFilter_js__WEBPACK_IMPORTED_MODULE_7__["default"].registerAction(), _featureset_actions_Top_js__WEBPACK_IMPORTED_MODULE_8__["default"].registerAction();
class b extends _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_2__["default"] {
  constructor(e, t = null, a = null, r = null) {
    super(), this._map = e, this._overridespref = t, this._lrucache = a, this._interceptor = r, this._instantLayers = [];
  }
  _makeAndAddFeatureSet(e, t = !0, a = null) {
    const r = g(e, this._overridespref, null === a ? ["*"] : a, t, this._lrucache, this._interceptor);
    return this._instantLayers.push({
      featureset: r,
      opitem: e,
      includeGeometry: t,
      outFields: JSON.stringify(a)
    }), r;
  }
  featureSetByName(e, t = !0, r = null) {
    var _this = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (void 0 !== _this._map.loaded && void 0 !== _this._map.load && !1 === _this._map.loaded) return yield _this._map.load(), _this.featureSetByName(e, t, r);
      null === r && (r = ["*"]), r = (r = r.slice(0)).sort();
      const n = JSON.stringify(r);
      for (let a = 0; a < _this._instantLayers.length; a++) {
        const r = _this._instantLayers[a];
        if (r.opitem.title === e && r.includeGeometry === t && r.outFields === n) return _this._instantLayers[a].featureset;
      }
      const i = [],
        s = _this._map.allLayers.find(t => {
          if (t instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"]) {
            if (t.title === e) return !0;
          } else if ((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_3__.$)(t)) {
            if (t.title === e) return !0;
            i.push(t);
          }
          return !1;
        });
      if (s) return _this._makeAndAddFeatureSet(s, t, r);
      if (_this._map.tables) {
        const a = _this._map.tables.find(t => !!(t.title && t.title === e || t.title && t.title === e));
        if (a) {
          if (a instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"]) return _this._makeAndAddFeatureSet(a, t, r);
          if (a._materializedTable) ;else {
            const e = a.outFields ? a : {
              ...a,
              outFields: ["*"]
            };
            a._materializedTable = new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"](e);
          }
          return yield a._materializedTable.load(), _this._makeAndAddFeatureSet(a._materializedTable, t, r);
        }
      }
      for (const a of i) {
        if ("not-loaded" === a.loadStatus || "loading" === a.loadStatus) try {
          yield a.load();
        } catch (l) {}
        const n = a.sublayers.find(t => t.title === e);
        if (n) return _this._makeAndAddFeatureSet(n, t, r);
      }
      return null;
    })();
  }
  featureSetById(e, t = !0, r = ["*"]) {
    var _this2 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (void 0 !== _this2._map.loaded && void 0 !== _this2._map.load && !1 === _this2._map.loaded) return yield _this2._map.load(), _this2.featureSetById(e, t, r);
      null === r && (r = ["*"]), r = (r = r.slice(0)).sort();
      const n = JSON.stringify(r);
      for (let a = 0; a < _this2._instantLayers.length; a++) {
        const r = _this2._instantLayers[a];
        if (r.opitem.id === e && r.includeGeometry === t && r.outFields === n) return _this2._instantLayers[a].featureset;
      }
      const i = [],
        s = _this2._map.allLayers.find(t => {
          if (t instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"]) {
            if (t.id === e) return !0;
          } else if ((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_3__.$)(t)) {
            if (t.id === e) return !0;
            i.push(t);
          }
          return !1;
        });
      if (s) return _this2._makeAndAddFeatureSet(s, t, r);
      if (_this2._map.tables) {
        const a = _this2._map.tables.find(t => t.id === e);
        if (a) {
          if (a instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"]) return _this2._makeAndAddFeatureSet(a, t, r);
          if (a._materializedTable) ;else {
            const e = {
              ...a,
              outFields: ["*"]
            };
            a._materializedTable = new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"](e);
          }
          return yield a._materializedTable.load(), _this2._makeAndAddFeatureSet(a._materializedTable, t, r);
        }
      }
      for (const a of i) {
        if ("not-loaded" === a.loadStatus || "loading" === a.loadStatus) try {
          yield a.load();
        } catch (l) {}
        const n = a.sublayers.find(t => t.id === e);
        if (n) return _this2._makeAndAddFeatureSet(n, t, r);
      }
      return null;
    })();
  }
}
class O extends _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_2__["default"] {
  constructor(e, t = null, a = null, r = null) {
    super(), this._url = e, this._overridespref = t, this._lrucache = a, this._interceptor = r, this.metadata = null, this._instantLayers = [];
  }
  get url() {
    return this._url;
  }
  _makeAndAddFeatureSet(e, t = !0, a = null) {
    const r = g(e, this._overridespref, null === a ? ["*"] : a, t, this._lrucache);
    return this._instantLayers.push({
      featureset: r,
      opitem: e,
      includeGeometry: t,
      outFields: JSON.stringify(a)
    }), r;
  }
  _loadMetaData() {
    var _this3 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const e = yield C(_this3._url);
      return _this3.metadata = e, e;
    })();
  }
  load() {
    return this._loadMetaData();
  }
  clone() {
    return new O(this._url, this._overridespref, this._lrucache, this._interceptor);
  }
  featureSetByName(e, t = !0, a = null) {
    var _this4 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      null === a && (a = ["*"]), a = (a = a.slice(0)).sort();
      const r = JSON.stringify(a);
      for (let s = 0; s < _this4._instantLayers.length; s++) {
        const a = _this4._instantLayers[s];
        if (a.opitem.title === e && a.includeGeometry === t && a.outFields === r) return _this4._instantLayers[s].featureset;
      }
      const n = yield _this4._loadMetaData();
      let i = null;
      for (const s of n.layers ?? []) s.name === e && (i = s);
      if (!i) for (const s of n.tables ?? []) s.name === e && (i = s);
      if (i) {
        const e = yield I(_this4._url + "/" + i.id, ["*"]);
        return _this4._makeAndAddFeatureSet(e, t, a);
      }
      return null;
    })();
  }
  featureSetById(e, t = !0, a = ["*"]) {
    var _this5 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      null === a && (a = ["*"]), a = (a = a.slice(0)).sort();
      const r = JSON.stringify(a);
      e = null != e ? e.toString() : "";
      for (let s = 0; s < _this5._instantLayers.length; s++) {
        const a = _this5._instantLayers[s];
        if (a.opitem.id === e && a.includeGeometry === t && a.outFields === r) return _this5._instantLayers[s].featureset;
      }
      const n = yield _this5._loadMetaData();
      let i = null;
      for (const s of n.layers ?? []) null !== s.id && void 0 !== s.id && s.id.toString() === e && (i = s);
      if (!i) for (const s of n.tables ?? []) null !== s.id && void 0 !== s.id && s.id.toString() === e && (i = s);
      if (i) {
        const e = yield I(_this5._url + "/" + i.id, ["*"]);
        return _this5._makeAndAddFeatureSet(e, t, a);
      }
      return null;
    })();
  }
}
function D(e, t, a = null, r = null) {
  return new b(e, t, a, r);
}
function E(e, t, a = null, r = null) {
  return new O(e, t, a, r);
}
function j(e, t, n, i, s) {
  if (null === e) return null;
  if (e instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"]) {
    switch (t) {
      case "datasource":
        return g(e, s, e.outFields, !0, n, i).getDataSourceFeatureSet();
      case "parent":
      case "root":
        return g(e, s, e.outFields, !0, n, i);
    }
    return null;
  }
  if ((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_3__.$)(e)) {
    switch (t) {
      case "datasource":
        return g(e, s, e.outFields, !0, n, i).getDataSourceFeatureSet();
      case "parent":
      case "root":
        return g(e, s, e.outFields, !0, n, i);
    }
    return null;
  }
  if ((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_3__.a0)(e)) {
    switch (t) {
      case "datasource":
        return g(e.parent, s, e.parent.outFields, !0, n, i).getDataSourceFeatureSet();
      case "parent":
      case "root":
        return g(e, s, e.parent.outFields, !0, n, i);
    }
    return null;
  }
  if (e instanceof _featureset_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_14__["default"]) switch (t) {
    case "datasource":
      return e.getDataSourceFeatureSet();
    case "parent":
      return e;
    case "root":
      return e.getRootFeatureSet();
  }
  return null;
}
function q(_x17, _x18, _x19, _x20, _x21, _x22, _x23) {
  return _q.apply(this, arguments);
}
function _q() {
  _q = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t, a, r, n, i, s, l = null) {
    if (_featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache) {
      const o = _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.getLayerInfo(e + ":" + i.url);
      if (o) {
        const e = yield o;
        return g(new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"]({
          url: (0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_15__.extractServiceUrl)(e.url) + "/" + t,
          outFields: ["*"]
        }), a, r, n, s, l);
      }
    }
    const o = new _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_18__["default"]({
      id: e,
      portal: i
    }).load();
    _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache && _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.setLayerInfo(e + ":" + i.url, o);
    try {
      const e = yield o;
      return g(new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_17__["default"]({
        url: (0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_15__.extractServiceUrl)(e.url ?? "") + "/" + t,
        outFields: ["*"]
      }), a, r, n, s, l);
    } catch (u) {
      throw _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache && _featureset_support_cache_js__WEBPACK_IMPORTED_MODULE_12__["default"].applicationCache.clearLayerInfo(e + ":" + i.url), u;
    }
  });
  return _q.apply(this, arguments);
}


/***/ }),

/***/ 11945:
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AdaptedFeatureSet": () => (/* binding */ L),
/* harmony export */   "AdaptedField": () => (/* binding */ D),
/* harmony export */   "FieldRename": () => (/* binding */ k),
/* harmony export */   "OriginalField": () => (/* binding */ I),
/* harmony export */   "SqlExpressionAdapted": () => (/* binding */ B),
/* harmony export */   "StringToCodeAdapted": () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ 26763);
/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../kernel.js */ 39214);
/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/errorsupport.js */ 23373);
/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/FeatureSet.js */ 7014);
/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/IdSet.js */ 85708);
/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/shared.js */ 84940);
/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/sqlUtils.js */ 48697);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/maybe.js */ 53661);
/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ 63981);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ 68230);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/










class D {
  constructor(e) {
    this.field = e, this.sqlRewritable = !1;
  }
  postInitialization(e, t) {}
}
class I extends D {
  constructor(e) {
    super(e), this.sqlRewritable = !0;
  }
  extractValue(e) {
    return e.attributes[this.field.name];
  }
  rewriteSql(e) {
    return {
      rewritten: this.sqlRewritable,
      where: e
    };
  }
}
class k extends D {
  constructor(e, t, r) {
    super((0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.cloneField)(e)), this.originalField = e, this.sqlRewritable = !0, this.field.name = t, this.field.alias = r;
  }
  rewriteSql(e, t) {
    return {
      rewritten: this.sqlRewritable,
      where: (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.reformulateWithoutField)(e, this.field.name, this.originalField.name, t.getFieldsIndex())
    };
  }
  extractValue(e) {
    return e.attributes[this.originalField.name];
  }
}
class b extends D {
  constructor(e, t, r) {
    super(e), this.codefield = t, this.lkp = r, this.reverseLkp = {};
    for (const s in r) this.reverseLkp[r[s]] = s;
    this.sqlRewritable = !0;
  }
  rewriteSql(e, t) {
    const r = this.evaluateNodeToWhereClause(e.parseTree, _support_shared_js__WEBPACK_IMPORTED_MODULE_6__.FeatureServiceDatabaseType.Standardised, this.field.name, this.codefield instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_9__.WhereClause ? (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.toWhereClause)(this.codefield, _support_shared_js__WEBPACK_IMPORTED_MODULE_6__.FeatureServiceDatabaseType.Standardised) : this.codefield, e.parameters);
    return r.includes(b.BADNESS) ? {
      rewritten: !1,
      where: e
    } : {
      rewritten: this.sqlRewritable,
      where: _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_9__.WhereClause.create(r, t._parent.getFieldsIndex(), t.dateFieldsTimeZoneDefaultUTC)
    };
  }
  evaluateNodeToWhereClause(e, t, a = null, i = null, l) {
    let n, o, h, g;
    switch (e.type) {
      case "interval":
        return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.convertIntervalToSql)(this.evaluateNodeToWhereClause(e.value, t, a, i, l), e.qualifier, e.op);
      case "case-expression":
        {
          let r = " CASE ";
          "simple" === e.format && (r += this.evaluateNodeToWhereClause(e.operand, t, a, b.BADNESS, l));
          for (let s = 0; s < e.clauses.length; s++) r += " WHEN " + this.evaluateNodeToWhereClause(e.clauses[s].operand, t, a, b.BADNESS, l) + " THEN " + this.evaluateNodeToWhereClause(e.clauses[s].value, t, a, b.BADNESS, l);
          return null !== e.else && (r += " ELSE " + this.evaluateNodeToWhereClause(e.else, t, a, b.BADNESS, l)), r += " END ", r;
        }
      case "parameter":
        {
          const r = l[e.value.toLowerCase()];
          if ("string" == typeof r) return "'" + r.toString().replaceAll("'", "''") + "'";
          if ((0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.isDate)(r)) return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeSqlFromDateTimeParameter)(r, t);
          if ((0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.isLuxonDate)(r)) return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeSqlFromDateTimeParameter)(r, t);
          if ((0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.isArcadeTime)(r)) return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeTimeString)(r, t);
          if ((0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.isArcadeDate)(r)) return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.arcadeDateToSqlString)(r, t);
          if ((0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.isArcadeDateOnly)(r)) return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.arcadeDateOnlyToSqlString)(r, t);
          if (r instanceof Array) {
            const e = [];
            for (let s = 0; s < r.length; s++) "string" == typeof r[s] ? e.push("'" + r[s].toString().replaceAll("'", "''") + "'") : (0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.isDate)(r[s]) || (0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.isLuxonDate)(r[s]) ? e.push((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeSqlFromDateTimeParameter)(r[s], t)) : (0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.isArcadeTime)(r[s]) ? e.push((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeTimeString)(r[s], t)) : (0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.isArcadeDate)(r[s]) ? e.push((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.arcadeDateToSqlString)(r[s], t)) : (0,_support_shared_js__WEBPACK_IMPORTED_MODULE_6__.isArcadeDateOnly)(r[s]) ? e.push((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.arcadeDateOnlyToSqlString)(r[s], t)) : e.push(r[s].toString());
            return e;
          }
          return r.toString();
        }
      case "expression-list":
        o = [];
        for (const r of e.value) o.push(this.evaluateNodeToWhereClause(r, t, a, i, l));
        return o;
      case "unary-expression":
        return " ( NOT " + this.evaluateNodeToWhereClause(e.expr, t, a, b.BADNESS, l) + " ) ";
      case "binary-expression":
        switch (e.operator) {
          case "AND":
            return " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " AND " + this.evaluateNodeToWhereClause(e.right, t, a, i, l) + ") ";
          case "OR":
            return " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " OR " + this.evaluateNodeToWhereClause(e.right, t, a, i, l) + ") ";
          case "IS":
            if ("null" !== e.right.type) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlErrorCodes.UnsupportedIsRhs);
            return " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " IS NULL )";
          case "ISNOT":
            if ("null" !== e.right.type) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlErrorCodes.UnsupportedIsRhs);
            return " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " IS NOT NULL )";
          case "IN":
            if (n = [], "expression-list" === e.right.type) {
              if ("column-reference" === e.left.type && e.left.column.toUpperCase() === this.field.name.toUpperCase()) {
                const r = [];
                let s = !0;
                for (const t of e.right.value) {
                  if ("string" !== t.type) {
                    s = !1;
                    break;
                  }
                  if (void 0 === this.lkp[t.value]) {
                    s = !1;
                    break;
                  }
                  r.push(this.lkp[t.value].toString());
                }
                if (s) return " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " IN (" + r.join(",") + ")) ";
              }
              return n = this.evaluateNodeToWhereClause(e.right, t, a, i, l), " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " IN (" + n.join(",") + ")) ";
            }
            return g = this.evaluateNodeToWhereClause(e.right, t, a, i, l), g instanceof Array ? " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " IN (" + g.join(",") + ")) " : " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " IN (" + g + ")) ";
          case "NOT IN":
            if (n = [], "expression-list" === e.right.type) {
              if ("column-reference" === e.left.type && e.left.column.toUpperCase() === this.field.name.toUpperCase()) {
                const r = [];
                let s = !0;
                for (const t of e.right.value) {
                  if ("string" !== t.type) {
                    s = !1;
                    break;
                  }
                  if (void 0 === this.lkp[t.value]) {
                    s = !1;
                    break;
                  }
                  r.push(this.lkp[t.value].toString());
                }
                if (s) return " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " NOT IN (" + r.join(",") + ")) ";
              }
              return n = this.evaluateNodeToWhereClause(e.right, t, a, i, l), " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " NOT IN (" + n.join(",") + ")) ";
            }
            return g = this.evaluateNodeToWhereClause(e.right, t, a, i, l), g instanceof Array ? " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " NOT IN (" + g.join(",") + ")) " : " (" + this.evaluateNodeToWhereClause(e.left, t, a, i, l) + " NOT IN (" + g + ")) ";
          case "BETWEEN":
            return h = this.evaluateNodeToWhereClause(e.right, t, a, b.BADNESS, l), " (" + this.evaluateNodeToWhereClause(e.left, t, a, b.BADNESS, l) + " BETWEEN " + h[0] + " AND " + h[1] + " ) ";
          case "NOTBETWEEN":
            return h = this.evaluateNodeToWhereClause(e.right, t, a, b.BADNESS, l), " (" + this.evaluateNodeToWhereClause(e.left, t, a, b.BADNESS, l) + " NOT BETWEEN " + h[0] + " AND " + h[1] + " ) ";
          case "LIKE":
            return "" !== e.escape ? " (" + this.evaluateNodeToWhereClause(e.left, t, a, b.BADNESS, l) + " LIKE " + this.evaluateNodeToWhereClause(e.right, t, a, b.BADNESS, l) + " ESCAPE '" + e.escape + "') " : " (" + this.evaluateNodeToWhereClause(e.left, t, a, b.BADNESS, l) + " LIKE " + this.evaluateNodeToWhereClause(e.right, t, a, b.BADNESS, l) + ") ";
          case "NOT LIKE":
            return "" !== e.escape ? " (" + this.evaluateNodeToWhereClause(e.left, t, a, b.BADNESS, l) + " NOT LIKE " + this.evaluateNodeToWhereClause(e.right, t, a, b.BADNESS, l) + " ESCAPE '" + e.escape + "') " : " (" + this.evaluateNodeToWhereClause(e.left, t, a, b.BADNESS, l) + " NOT LIKE " + this.evaluateNodeToWhereClause(e.right, t, a, b.BADNESS, l) + ") ";
          case "<>":
          case "=":
            if ("column-reference" === e.left.type && "string" === e.right.type) {
              if (e.left.column.toUpperCase() === this.field.name.toUpperCase() && void 0 !== this.lkp[e.right.value.toString()]) return " (" + i + " " + e.operator + " " + this.lkp[e.right.value.toString()].toString() + ") ";
            } else if ("column-reference" === e.right.type && "string" === e.left.type && e.right.column.toUpperCase() === this.field.name.toUpperCase()) return " (" + this.lkp[e.right.value.toString()].toString() + " " + e.operator + " " + i + ") ";
            return " (" + this.evaluateNodeToWhereClause(e.left, t, a, b.BADNESS, l) + " " + e.operator + " " + this.evaluateNodeToWhereClause(e.right, t, a, b.BADNESS, l) + ") ";
          case "<":
          case ">":
          case ">=":
          case "<=":
          case "*":
          case "-":
          case "+":
          case "/":
          case "||":
            return " (" + this.evaluateNodeToWhereClause(e.left, t, a, b.BADNESS, l) + " " + e.operator + " " + this.evaluateNodeToWhereClause(e.right, t, a, b.BADNESS, l) + ") ";
        }
      case "null":
        return "null";
      case "boolean":
        return !0 === e.value ? "1" : "0";
      case "string":
        return "'" + e.value.toString().replaceAll("'", "''") + "'";
      case "timestamp":
        return `timestamp '${e.value}'`;
      case "date":
        return `date '${e.value}'`;
      case "time":
        return `time '${e.value}'`;
      case "number":
        return e.value.toString();
      case "current-time":
        return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeToday)("date" === e.mode, t);
      case "column-reference":
        return a && a.toLowerCase() === e.column.toLowerCase() ? "(" + i + ")" : e.column;
      case "data-type":
        return e.value;
      case "function":
        {
          const r = this.evaluateNodeToWhereClause(e.args, t, a, b.BADNESS, l);
          return (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.translateFunctionToDatabaseSpecific)(e.name, r, t);
        }
    }
    throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.SqlErrorCodes.UnsupportedSyntax, {
      node: e.type
    });
  }
  extractValue(e) {
    return this.codefield instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_9__.WhereClause ? this.reverseLkp[_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_9__.WhereClause.convertValueToStorageFormat(this.codefield.calculateValueCompiled(e))] : this.reverseLkp[e.attributes[this.codefield]];
  }
}
b.BADNESS = "_!!!_BAD_LKP_!!!!";
class B extends D {
  constructor(e, t) {
    super(e), this._sql = t;
  }
  rewriteSql(e, t) {
    return {
      rewritten: !0,
      where: (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.reformulateWithoutField)(e, this.field.name, (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.toWhereClause)(this._sql, _support_shared_js__WEBPACK_IMPORTED_MODULE_6__.FeatureServiceDatabaseType.Standardised), t.getFieldsIndex())
    };
  }
  extractValue(e) {
    return _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_9__.WhereClause.convertValueToStorageFormat(this._sql.calculateValueCompiled(e), this.field.type);
  }
}
class L extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_4__["default"] {
  static findField(e, t) {
    for (const r of e) if (r.name.toLowerCase() === t.toString().toLowerCase()) return r;
    return null;
  }
  constructor(e) {
    super(e), this._calcFunc = null, this.declaredClass = "esri.arcade.featureset.actions.Adapted", this.adaptedFields = [], this._extraFilter = null, this._extraFilter = e.extraFilter, this._parent = e.parentfeatureset, this._maxProcessing = 30, this.adaptedFields = e.adaptedFields;
  }
  _initialiseFeatureSet() {
    null !== this._parent ? (this.geometryType = this._parent.geometryType, this.objectIdField = this._parent.objectIdField, this.globalIdField = this._parent.globalIdField, this.spatialReference = this._parent.spatialReference, this.hasM = this._parent.hasM, this.hasZ = this._parent.hasZ, this.typeIdField = this._parent.typeIdField, this.types = this._parent.types) : (this.spatialReference = new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_10__["default"]({
      wkid: 4326
    }), this.objectIdField = "", this.globalIdField = "", this.geometryType = _support_shared_js__WEBPACK_IMPORTED_MODULE_6__.layerGeometryEsriConstants.point, this.typeIdField = "", this.types = null), this.fields = [];
    for (const e of this.adaptedFields) e.postInitialization(this, this._parent), this.fields.push(e.field);
  }
  _getSet(e) {
    var _this = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this._wset) {
        yield _this._ensureLoaded();
        let t = null;
        return t = _this._extraFilter ? yield _this._getFilteredSet("", null, null, null, e) : yield _this._parent?._getSet(e), _this._checkCancelled(e), (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.assertIsSome)(t), _this._wset = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__["default"](t._candidates.slice(0), t._known.slice(0), t._ordered, _this._clonePageDefinition(t.pagesDefinition)), _this._wset;
      }
      return _this._wset;
    })();
  }
  _isInFeatureSet(e) {
    return this._parent._isInFeatureSet(e);
  }
  _getFeatures(r, s, a, i) {
    var _this2 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const l = [];
      -1 !== s && void 0 === _this2._featureCache[s] && l.push(s);
      const o = _this2._maxQueryRate();
      if (!0 === _this2._checkIfNeedToExpandKnownPage(r, o)) return yield _this2._expandPagedSet(r, o, 0, 0, i), _this2._getFeatures(r, s, a, i);
      let h = 0;
      for (let e = r._lastFetchedIndex; e < r._known.length && (h++, h <= a && (r._lastFetchedIndex += 1), !(void 0 === _this2._featureCache[r._known[e]] && (r._known[e] !== s && l.push(r._known[e]), l.length >= o))); e++);
      if (0 === l.length) return "success";
      r = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__["default"]([], l, r._ordered, null);
      const u = Math.min(l.length, a);
      yield _this2._parent?._getFeatures(r, -1, u, i), _this2._checkCancelled(i);
      const c = [];
      for (let e = 0; e < u; e++) {
        const t = _this2._parent?._featureFromCache(l[e]);
        void 0 !== t && c.push({
          geometry: t.geometry,
          attributes: t.attributes,
          id: l[e]
        });
      }
      for (const n of c) {
        const r = [];
        for (const e of _this2.adaptedFields) r[e.field.name] = e.extractValue(n);
        _this2._featureCache[n.id] = new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
          attributes: r,
          geometry: (0,_kernel_js__WEBPACK_IMPORTED_MODULE_2__.cloneGeometry)(n.geometry)
        });
      }
      return "success";
    })();
  }
  _fetchAndRefineFeatures() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetErrorCodes.NeverReach);
    })();
  }
  _getFilteredSet(e, t, r, s, a) {
    var _this3 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let i = !1;
      const l = _this3._reformulateWithoutAdaptions(r);
      i = l.cannot, r = l.where;
      let o = !1;
      if (null !== s) {
        o = !0;
        const e = [];
        for (const t of _this3.adaptedFields) if (!(t instanceof I) && !0 === s.scanForField(t.field.name)) {
          if (!(t instanceof k)) {
            s = null, o = !1;
            break;
          }
          e.push({
            field: t.field.name,
            newfield: t.originalField.name
          });
        }
        s && e.length > 0 && (s = s.replaceFields(e));
      }
      null !== r ? null !== _this3._extraFilter && (r = (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(_this3._extraFilter, r)) : r = _this3._extraFilter, yield _this3._ensureLoaded();
      const h = yield _this3._parent._getFilteredSet(e, t, r, s, a);
      let u;
      return _this3._checkCancelled(a), u = !0 === i ? new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__["default"](h._candidates.slice(0).concat(h._known.slice(0)), [], !0 === o && h._ordered, _this3._clonePageDefinition(h.pagesDefinition)) : new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_5__["default"](h._candidates.slice(0), h._known.slice(0), !0 === o && h._ordered, _this3._clonePageDefinition(h.pagesDefinition)), u;
    })();
  }
  _reformulateWithoutAdaptions(e) {
    const t = {
      cannot: !1,
      where: e
    };
    if (null !== e) for (const r of this.adaptedFields) if (!0 === (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.scanForField)(e, r.field.name)) {
      const s = r.rewriteSql(e, this);
      if (!0 !== s.rewritten) {
        t.cannot = !0, t.where = null;
        break;
      }
      t.where = s.where;
    }
    return t;
  }
  _stat(e, t, r, s, a, i, l) {
    var _this4 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let n = !1,
        o = _this4._reformulateWithoutAdaptions(t);
      if (n = o.cannot, t = o.where, o = _this4._reformulateWithoutAdaptions(a), n = n || o.cannot, null !== (a = o.where) ? null !== _this4._extraFilter && (a = (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(_this4._extraFilter, a)) : a = _this4._extraFilter, !0 === n) return null === a && "" === r && null === s ? _this4._manualStat(e, t, i, l) : {
        calculated: !1
      };
      const h = yield _this4._parent._stat(e, t, r, s, a, i, l);
      return !1 === h.calculated ? null === a && "" === r && null === s ? _this4._manualStat(e, t, i, l) : {
        calculated: !1
      } : h;
    })();
  }
  _canDoAggregates(e, t, r, s, a) {
    var _this5 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this5._parent) return !1;
      for (let n = 0; n < e.length; n++) for (const t of _this5.adaptedFields) if (e[n].toLowerCase() === t.field.name.toLowerCase() && !(t instanceof I)) return !1;
      const i = [];
      for (let n = 0; n < t.length; n++) {
        const e = t[n];
        if (null !== e.workingexpr) {
          const t = _this5._reformulateWithoutAdaptions(e.workingexpr);
          if (t.cannot) return !1;
          const r = e.clone();
          r.workingexpr = t.where, i.push(r);
        } else i.push(e);
      }
      const l = _this5._reformulateWithoutAdaptions(a);
      return !l.cannot && (null !== (a = l.where) ? null !== _this5._extraFilter && (a = (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(_this5._extraFilter, a)) : a = _this5._extraFilter, _this5._parent._canDoAggregates(e, i, r, s, a));
    })();
  }
  _getAggregatePagesDataSourceDefinition(e, t, r, s, l, n, o) {
    var _this6 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this6._parent) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetErrorCodes.NeverReach);
      const h = [];
      for (let c = 0; c < t.length; c++) {
        const e = t[c];
        if (null !== e.workingexpr) {
          const t = _this6._reformulateWithoutAdaptions(e.workingexpr);
          if (t.cannot) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetErrorCodes.NeverReach);
          const r = e.clone();
          r.workingexpr = t.where, h.push(r);
        } else h.push(e);
      }
      const u = _this6._reformulateWithoutAdaptions(l);
      if (u.cannot) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetErrorCodes.NeverReach);
      return null !== (l = u.where) ? null !== _this6._extraFilter && (l = (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_7__.combine)(_this6._extraFilter, l)) : l = _this6._extraFilter, _this6._parent._getAggregatePagesDataSourceDefinition(e, h, r, s, l, n, o);
    })();
  }
}


/***/ }),

/***/ 57187:
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../support/errorsupport.js */ 23373);
/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/FeatureSet.js */ 7014);
/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/IdSet.js */ 85708);
/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/shared.js */ 84940);
/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/sqlUtils.js */ 48697);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ 30801);
/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ 63981);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ 68230);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/








class c extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__["default"] {
  constructor(e) {
    super(e), this.declaredClass = "esri.arcade.featureset.actions.AttributeFilter", this._maxProcessing = 1e3, this._parent = e.parentfeatureset, e.whereclause instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__.WhereClause ? (this._whereclause = e.whereclause, this._whereClauseFunction = null) : (this._whereClauseFunction = e.whereclause, this._whereclause = null);
  }
  _initialiseFeatureSet() {
    null !== this._parent ? (this.fields = this._parent.fields.slice(0), this.geometryType = this._parent.geometryType, this.objectIdField = this._parent.objectIdField, this.globalIdField = this._parent.globalIdField, this.spatialReference = this._parent.spatialReference, this.hasM = this._parent.hasM, this.hasZ = this._parent.hasZ, this.typeIdField = this._parent.typeIdField, this.types = this._parent.types) : (this.fields = [], this.typeIdField = "", this.objectIdField = "", this.globalIdField = "", this.spatialReference = new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_8__["default"]({
      wkid: 4326
    }), this.geometryType = _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.layerGeometryEsriConstants.point);
  }
  _getSet(e) {
    var _this = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this._wset) {
        yield _this._ensureLoaded();
        const t = yield _this._parent._getFilteredSet("", null, _this._whereclause, null, e);
        return _this._checkCancelled(e), null !== _this._whereClauseFunction ? _this._wset = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__["default"](t._candidates.slice(0).concat(t._known.slice(0)), [], t._ordered, _this._clonePageDefinition(t.pagesDefinition)) : _this._wset = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__["default"](t._candidates.slice(0), t._known.slice(0), t._ordered, _this._clonePageDefinition(t.pagesDefinition)), _this._wset;
      }
      return _this._wset;
    })();
  }
  _isInFeatureSet(e) {
    let t = this._parent?._isInFeatureSet(e);
    return t === _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.NotInFeatureSet ? t : (t = this._idstates[e], void 0 === t ? _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.Unknown : t);
  }
  _getFeature(e, t, s) {
    return this._parent._getFeature(e, t, s);
  }
  _getFeatures(e, t, s, i) {
    return this._parent._getFeatures(e, t, s, i);
  }
  _featureFromCache(e) {
    return this._parent._featureFromCache(e);
  }
  executeWhereClause(e) {
    return this._whereclause?.testFeature(e) ?? !1;
  }
  executeWhereClauseDeferred(e) {
    var _this2 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null !== _this2._whereClauseFunction) {
        const t = _this2._whereClauseFunction(e);
        return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.isPromiseLike)(t), t;
      }
      return _this2.executeWhereClause(e);
    })();
  }
  _fetchAndRefineFeatures(e, t, s) {
    var _this3 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const r = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__["default"]([], e, !1, null),
        a = Math.min(t, e.length);
      if (yield _this3._parent?._getFeatures(r, -1, a, s), _this3._checkCancelled(s), null == _this3._whereClauseFunction) {
        for (let t = 0; t < a; t++) {
          const s = _this3._parent?._featureFromCache(e[t]);
          !0 === _this3.executeWhereClause(s) ? _this3._idstates[e[t]] = _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.InFeatureSet : _this3._idstates[e[t]] = _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.NotInFeatureSet;
        }
        return "success";
      }
      const l = [];
      for (let i = 0; i < a; i++) {
        const t = _this3._parent?._featureFromCache(e[i]);
        l.push(yield _this3.executeWhereClauseDeferred(t));
      }
      for (let i = 0; i < t; i++) !0 === l[i] ? _this3._idstates[e[i]] = _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.InFeatureSet : _this3._idstates[e[i]] = _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.NotInFeatureSet;
      return "success";
    })();
  }
  _getFilteredSet(e, t, s, r, n) {
    var _this4 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      null !== _this4._whereClauseFunction || (null !== s ? null !== _this4._whereclause && (s = (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__.combine)(_this4._whereclause, s)) : s = _this4._whereclause), yield _this4._ensureLoaded();
      const l = yield _this4._parent._getFilteredSet(e, t, s, r, n);
      let h;
      return _this4._checkCancelled(n), h = null !== _this4._whereClauseFunction ? new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__["default"](l._candidates.slice(0).concat(l._known.slice(0)), [], l._ordered, _this4._clonePageDefinition(l.pagesDefinition)) : new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__["default"](l._candidates.slice(0), l._known.slice(0), l._ordered, _this4._clonePageDefinition(l.pagesDefinition)), h;
    })();
  }
  _stat(e, t, s, i, r, n, l) {
    var _this5 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null !== _this5._whereClauseFunction) return null === r && "" === s && null === i ? _this5._manualStat(e, t, n, l) : {
        calculated: !1
      };
      let h = _this5._whereclause;
      null !== r && null !== _this5._whereclause && (h = (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__.combine)(_this5._whereclause, r));
      const u = yield _this5._parent._stat(e, t, s, i, h, n, l);
      return !1 === u.calculated ? null === r && "" === s && null === i ? _this5._manualStat(e, t, n, l) : {
        calculated: !1
      } : u;
    })();
  }
  _canDoAggregates(e, t, s, i, r) {
    var _this6 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return null === _this6._whereClauseFunction && (null !== r ? null !== _this6._whereclause && (r = (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__.combine)(_this6._whereclause, r)) : r = _this6._whereclause, null !== _this6._parent && _this6._parent._canDoAggregates(e, t, s, i, r));
    })();
  }
  _getAggregatePagesDataSourceDefinition(s, i, r, n, l, h, u) {
    var _this7 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this7._parent) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__.FeatureSetErrorCodes.NeverReach);
      return null !== l ? null !== _this7._whereclause && (l = (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_5__.combine)(_this7._whereclause, l)) : l = _this7._whereclause, _this7._parent._getAggregatePagesDataSourceDefinition(s, i, r, n, l, h, u);
    })();
  }
  static registerAction() {
    _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__["default"]._featuresetFunctions.filter = function (e) {
      if ("function" == typeof e) return new c({
        parentfeatureset: this,
        whereclause: e
      });
      let t = null;
      return e instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__.WhereClause && (t = e), new c({
        parentfeatureset: this,
        whereclause: t
      });
    };
  }
  getFieldsIndex() {
    return this._parent.getFieldsIndex();
  }
}


/***/ }),

/***/ 33069:
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/GroupBy.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ O)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ 26763);
/* harmony import */ var _chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../chunks/languageUtils.js */ 44819);
/* harmony import */ var _Adapted_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Adapted.js */ 11945);
/* harmony import */ var _AttributeFilter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AttributeFilter.js */ 57187);
/* harmony import */ var _OrderBy_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./OrderBy.js */ 89843);
/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/errorsupport.js */ 23373);
/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/FeatureSet.js */ 7014);
/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../support/IdSet.js */ 85708);
/* harmony import */ var _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../support/OrderbyClause.js */ 84263);
/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../support/shared.js */ 84940);
/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../support/sqlUtils.js */ 48697);
/* harmony import */ var _support_stats_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../support/stats.js */ 61709);
/* harmony import */ var _support_StatsField_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../support/StatsField.js */ 1940);
/* harmony import */ var _core_MD5_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/MD5.js */ 95409);
/* harmony import */ var _core_sql_DateOnly_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../core/sql/DateOnly.js */ 14458);
/* harmony import */ var _core_sql_SqlTimestampOffset_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../core/sql/SqlTimestampOffset.js */ 70147);
/* harmony import */ var _core_sql_TimeOnly_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../core/sql/TimeOnly.js */ 41843);
/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ 63981);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ 68230);
/* harmony import */ var _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../layers/support/Field.js */ 23973);
/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../layers/support/FieldsIndex.js */ 19346);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/





















function G(e) {
  if (!e) return "COUNT";
  switch (e.toLowerCase()) {
    case "max":
      return "MAX";
    case "var":
    case "variance":
      return "VAR";
    case "avg":
    case "average":
    case "mean":
      return "AVG";
    case "min":
      return "MIN";
    case "sum":
      return "SUM";
    case "stdev":
    case "stddev":
      return "STDDEV";
    case "count":
      return "COUNT";
  }
  return "COUNT";
}
class O extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_7__["default"] {
  constructor(e) {
    super(e), this._decodedStatsfield = [], this._decodedGroupbyfield = [], this._candosimplegroupby = !0, this.phsyicalgroupbyfields = [], this.objectIdField = "ROW__ID", this._internalObjectIdField = "ROW__ID", this._adaptedFields = [], this.declaredClass = "esri.arcade.featureset.actions.Aggregate", this._uniqueIds = 1, this._maxQuery = 10, this._maxProcessing = 10, this._parent = e.parentfeatureset, this._config = e;
  }
  isTable() {
    return !0;
  }
  _getSet(e) {
    var _this = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this._wset) {
        const t = yield _this._getFilteredSet("", null, null, null, e);
        return _this._wset = t, _this._wset;
      }
      return _this._wset;
    })();
  }
  _isInFeatureSet() {
    return _support_shared_js__WEBPACK_IMPORTED_MODULE_10__.IdState.InFeatureSet;
  }
  _nextUniqueName(e) {
    for (; 1 === e["T" + this._uniqueIds.toString()];) this._uniqueIds++;
    const t = "T" + this._uniqueIds.toString();
    return e[t] = 1, t;
  }
  _convertToEsriFieldType(e) {
    return e;
  }
  _initialiseFeatureSet() {
    const e = {};
    let t = !1,
      n = 1;
    const r = this._parent ? this._parent.getFieldsIndex() : new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_21__["default"]([]);
    for (this.objectIdField = "ROW__ID", this.globalIdField = ""; !1 === t;) {
      let e = !1;
      for (let t = 0; t < this._config.groupbyfields.length; t++) if (this._config.groupbyfields[t].name.toLowerCase() === this.objectIdField.toLowerCase()) {
        e = !0;
        break;
      }
      if (!1 === e) for (let t = 0; t < this._config.statsfields.length; t++) if (this._config.statsfields[t].name.toLowerCase() === this.objectIdField.toLowerCase()) {
        e = !0;
        break;
      }
      !1 === e ? t = !0 : (this.objectIdField = "ROW__ID" + n.toString(), n++);
    }
    for (const i of this._config.statsfields) {
      const e = new _support_StatsField_js__WEBPACK_IMPORTED_MODULE_13__["default"]();
      e.field = i.name, e.tofieldname = i.name, e.workingexpr = i.expression instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_18__.WhereClause ? i.expression : _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_18__.WhereClause.create(i.expression, r, this.dateFieldsTimeZoneDefaultUTC), e.typeofstat = G(i.statistic), this._decodedStatsfield.push(e);
    }
    this._decodedGroupbyfield = [];
    for (const i of this._config.groupbyfields) {
      const e = {
        name: i.name,
        singlefield: null,
        tofieldname: i.name,
        expression: i.expression instanceof _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_18__.WhereClause ? i.expression : _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_18__.WhereClause.create(i.expression, r, this.dateFieldsTimeZoneDefaultUTC),
        sqlType: null
      };
      this._decodedGroupbyfield.push(e);
    }
    if (null !== this._parent) {
      this.geometryType = this._parent.geometryType, this.spatialReference = this._parent.spatialReference, this.hasM = this._parent.hasM, this.hasZ = this._parent.hasZ, this.typeIdField = "";
      for (const t of this._parent.fields) e[t.name.toUpperCase()] = 1;
      this.types = null;
    } else this.geometryType = _support_shared_js__WEBPACK_IMPORTED_MODULE_10__.layerGeometryEsriConstants.point, this.typeIdField = "", this.types = null, this.spatialReference = new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_19__["default"]({
      wkid: 4326
    });
    this.fields = [];
    const a = new _support_StatsField_js__WEBPACK_IMPORTED_MODULE_13__["default"]();
    a.field = this._nextUniqueName(e), a.tofieldname = this.objectIdField, a.workingexpr = _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_18__.WhereClause.create(this._parent.objectIdField, this._parent.getFieldsIndex(), this.dateFieldsTimeZoneDefaultUTC), a.typeofstat = "MIN", this._decodedStatsfield.push(a);
    for (const s of this._decodedGroupbyfield) {
      const t = new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_20__["default"]();
      if (s.name = this._nextUniqueName(e), t.name = s.tofieldname, t.alias = t.name, (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_11__.isSingleField)(s.expression)) {
        const e = this._parent.getField((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_11__.toWhereClause)(s.expression, _support_shared_js__WEBPACK_IMPORTED_MODULE_10__.FeatureServiceDatabaseType.Standardised));
        if (!e) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetErrorCodes.AggregationFieldNotFound);
        s.name = e.name, s.singlefield = e.name, this.phsyicalgroupbyfields.push(e.name), t.type = e.type, s.sqlType = e.type;
      } else {
        t.type = this._convertToEsriFieldType((0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_11__.predictType)(s.expression, this._parent.fields));
        const e = new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_20__["default"]();
        e.name = s.name, e.alias = e.name, this.phsyicalgroupbyfields.push(s.name), this._adaptedFields.push(new _Adapted_js__WEBPACK_IMPORTED_MODULE_3__.SqlExpressionAdapted(e, s.expression)), this._candosimplegroupby = !1, s.sqlType = t.type;
      }
      this.fields.push(t);
    }
    if (this._adaptedFields.length > 0) for (const i of this._parent.fields) this._adaptedFields.push(new _Adapted_js__WEBPACK_IMPORTED_MODULE_3__.OriginalField(i));
    for (let i = 0; i < this._decodedStatsfield.length; i++) {
      const t = new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_20__["default"]();
      let s = null;
      const n = this._decodedStatsfield[i];
      n.field = this._nextUniqueName(e), n.tofieldname === this.objectIdField && (this._internalObjectIdField = n.field), t.name = n.tofieldname, t.alias = t.name;
      const r = null !== n.workingexpr && (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_11__.isSingleField)(n.workingexpr) ? (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_11__.toWhereClause)(n.workingexpr, _support_shared_js__WEBPACK_IMPORTED_MODULE_10__.FeatureServiceDatabaseType.Standardised) : "";
      switch (this._decodedStatsfield[i].typeofstat) {
        case "SUM":
          if ("" !== r) {
            if (s = this._parent.getField(r), !s) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetErrorCodes.AggregationFieldNotFound);
            t.type = s.type;
          } else t.type = "double";
          break;
        case "MIN":
        case "MAX":
          if ("" !== r) {
            if (s = this._parent.getField(r), !s) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetErrorCodes.AggregationFieldNotFound);
            t.type = s.type;
          } else t.type = "double";
          break;
        case "COUNT":
          t.type = "integer";
          break;
        case "STDDEV":
        case "VAR":
        case "AVG":
          if ("" !== r && (s = this._parent.getField(r), !s)) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetErrorCodes.AggregationFieldNotFound);
          t.type = "double";
      }
      this.fields.push(t);
    }
  }
  _canDoAggregates() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return !1;
    })();
  }
  _getFeatures(e, t, i, s) {
    var _this2 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      -1 !== t && _this2._featureCache[t];
      const n = _this2._maxQuery;
      return !0 === _this2._checkIfNeedToExpandKnownPage(e, n) ? (yield _this2._expandPagedSet(e, n, 0, 0, s), _this2._getFeatures(e, t, i, s)) : "success";
    })();
  }
  _getFilteredSet(e, t, i, s, o) {
    var _this3 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if ("" !== e) return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__["default"]([], [], !0, null);
      let l = null;
      const d = {
        ordered: !1,
        nowhereclause: !1
      };
      if (yield _this3._ensureLoaded(), null !== i) for (let n = 0; n < _this3._decodedStatsfield.length; n++) if (!0 === (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_11__.scanForField)(i, _this3._decodedStatsfield[n].tofieldname)) {
        d.nowhereclause = !0, i = null;
        break;
      }
      if (null !== s) {
        d.ordered = !0;
        for (let e = 0; e < _this3._decodedStatsfield.length; e++) if (!0 === s.scanForField(_this3._decodedStatsfield[e].tofieldname)) {
          s = null, d.ordered = !1;
          break;
        }
        if (null !== s) for (const e of _this3._decodedGroupbyfield) if (null === e.singlefield && !0 === s.scanForField(e.tofieldname)) {
          s = null, d.ordered = !1;
          break;
        }
      }
      if (!1 !== _this3._candosimplegroupby && (yield _this3._parent._canDoAggregates(_this3.phsyicalgroupbyfields, _this3._decodedStatsfield, "", null, null))) {
        let e = null;
        i && (e = _this3._reformulateWhereClauseWithoutGroupByFields(i));
        let t = null;
        s && (t = _this3._reformulateOrderClauseWithoutGroupByFields(s));
        const n = yield _this3._parent._getAggregatePagesDataSourceDefinition(_this3.phsyicalgroupbyfields, _this3._decodedStatsfield, "", null, e, t, _this3._internalObjectIdField);
        return _this3._checkCancelled(o), l = !0 === d.nowhereclause ? new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__["default"](n._candidates.slice(0).concat(n._known.slice(0)), [], !0 === d.ordered && n._ordered, _this3._clonePageDefinition(n.pagesDefinition)) : new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__["default"](n._candidates.slice(0), n._known.slice(0), !0 === d.ordered && n._ordered, _this3._clonePageDefinition(n.pagesDefinition)), l;
      }
      let c = _this3._parent;
      if (_this3._adaptedFields.length > 0 && (c = new _Adapted_js__WEBPACK_IMPORTED_MODULE_3__.AdaptedFeatureSet({
        parentfeatureset: _this3._parent,
        adaptedFields: _this3._adaptedFields,
        extraFilter: null
      })), !0 === d.nowhereclause) l = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__["default"](["GETPAGES"], [], !1, {
        aggregatefeaturesetpagedefinition: !0,
        resultOffset: 0,
        resultRecordCount: _this3._maxQuery,
        internal: {
          fullyResolved: !1,
          workingItem: null,
          type: "manual",
          iterator: null,
          set: [],
          subfeatureset: new _OrderBy_js__WEBPACK_IMPORTED_MODULE_5__["default"]({
            parentfeatureset: c,
            orderbyclause: new _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_9__["default"](_this3.phsyicalgroupbyfields.join(",") + "," + _this3._parent.objectIdField + " ASC")
          })
        }
      });else {
        let e = c;
        if (null !== i) {
          let t = null;
          i && (t = _this3._reformulateWhereClauseWithoutGroupByFields(i)), e = new _AttributeFilter_js__WEBPACK_IMPORTED_MODULE_4__["default"]({
            parentfeatureset: e,
            whereclause: t
          });
        }
        l = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__["default"](["GETPAGES"], [], !1, {
          aggregatefeaturesetpagedefinition: !0,
          resultOffset: 0,
          resultRecordCount: _this3._maxQuery,
          internal: {
            fullyResolved: !1,
            workingItem: null,
            type: "manual",
            iterator: null,
            set: [],
            subfeatureset: new _OrderBy_js__WEBPACK_IMPORTED_MODULE_5__["default"]({
              parentfeatureset: e,
              orderbyclause: new _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_9__["default"](_this3.phsyicalgroupbyfields.join(",") + "," + _this3._parent.objectIdField + " ASC")
            })
          }
        });
      }
      return l;
    })();
  }
  _reformulateWhereClauseWithoutStatsFields(e) {
    for (const t of this._decodedStatsfield) e = (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_11__.reformulateWithoutField)(e, t.tofieldname, (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_11__.toWhereClause)(t.workingexpr, _support_shared_js__WEBPACK_IMPORTED_MODULE_10__.FeatureServiceDatabaseType.Standardised), this._parent.getFieldsIndex());
    return e;
  }
  _reformulateWhereClauseWithoutGroupByFields(e) {
    for (const t of this._decodedGroupbyfield) t.tofieldname !== t.name && (e = (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_11__.reformulateWithoutField)(e, t.tofieldname, (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_11__.toWhereClause)(t.expression, _support_shared_js__WEBPACK_IMPORTED_MODULE_10__.FeatureServiceDatabaseType.Standardised), this._parent.getFieldsIndex()));
    return e;
  }
  _reformulateOrderClauseWithoutGroupByFields(e) {
    const t = [];
    for (const i of this._decodedGroupbyfield) i.tofieldname !== i.name && t.push({
      field: i.tofieldname,
      newfield: i.name
    });
    return t.length > 0 ? e.replaceFields(t) : e;
  }
  _clonePageDefinition(e) {
    return null === e ? null : !0 === e.aggregatefeaturesetpagedefinition ? {
      aggregatefeaturesetpagedefinition: !0,
      resultRecordCount: e.resultRecordCount,
      resultOffset: e.resultOffset,
      internal: e.internal
    } : this._parent._clonePageDefinition(e);
  }
  _refineSetBlock(e, t, i) {
    var _this4 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!0 === _this4._checkIfNeedToExpandCandidatePage(e, _this4._maxQuery)) return yield _this4._expandPagedSet(e, _this4._maxQuery, 0, 0, i), _this4._refineSetBlock(e, t, i);
      _this4._checkCancelled(i);
      const s = e._candidates.length;
      _this4._refineKnowns(e, t);
      e._candidates.length;
      return e._candidates.length, e;
    })();
  }
  _expandPagedSet(e, t, i, s, n) {
    return this._expandPagedSetFeatureSet(e, t, i, s, n);
  }
  _getPhysicalPage(t, i, s) {
    var _this5 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!0 === t.pagesDefinition.aggregatefeaturesetpagedefinition) return _this5._sequentialGetPhysicalItem(t, t.pagesDefinition.resultRecordCount, s, []);
      const n = yield _this5._getAgregagtePhysicalPage(t, i, s);
      for (const r of n) {
        const t = {
            geometry: r.geometry,
            attributes: {}
          },
          i = {};
        for (const e in r.attributes) i[e.toLowerCase()] = r.attributes[e];
        for (const e of _this5._decodedGroupbyfield) t.attributes[e.tofieldname] = i[e.name.toLowerCase()];
        for (const e of _this5._decodedStatsfield) t.attributes[e.tofieldname] = i[e.field.toLowerCase()];
        _this5._featureCache[t.attributes[_this5.objectIdField]] = new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"](t);
      }
      return n.length;
    })();
  }
  _sequentialGetPhysicalItem(e, t, i, s) {
    return new Promise((n, r) => {
      null === e.pagesDefinition.internal.iterator && (e.pagesDefinition.internal.iterator = e.pagesDefinition.internal.subfeatureset.iterator(i)), !0 === e.pagesDefinition.internal.fullyResolved || 0 === t ? n(s.length) : this._nextAggregateItem(e, t, i, s, r => {
        null === r ? n(s.length) : (t -= 1, n(this._sequentialGetPhysicalItem(e, t, i, s)));
      }, r);
    });
  }
  _nextAggregateItem(e, i, s, n, r, a) {
    try {
      (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_2__.a1)(e.pagesDefinition.internal.iterator.next()).then(t => {
        if (null === t) {
          if (null !== e.pagesDefinition.internal.workingItem) {
            const t = this._calculateAndAppendAggregateItem(e.pagesDefinition.internal.workingItem);
            n.push(t), e.pagesDefinition.internal.workingItem = null, e.pagesDefinition.internal.set.push(t.attributes[this.objectIdField]), e.pagesDefinition.internal.fullyResolved = !0, r(null);
          } else e.pagesDefinition.internal.fullyResolved = !0, r(null);
        } else {
          const o = this._generateAggregateHash(t);
          if (null === e.pagesDefinition.internal.workingItem) e.pagesDefinition.internal.workingItem = {
            features: [t],
            id: o
          };else {
            if (o !== e.pagesDefinition.internal.workingItem.id) {
              const s = this._calculateAndAppendAggregateItem(e.pagesDefinition.internal.workingItem);
              return n.push(s), e.pagesDefinition.internal.workingItem = null, e.pagesDefinition.internal.set.push(s.attributes[this.objectIdField]), i -= 1, e.pagesDefinition.internal.workingItem = {
                features: [t],
                id: o
              }, void r(s);
            }
            e.pagesDefinition.internal.workingItem.features.push(t);
          }
          this._nextAggregateItem(e, i, s, n, r, a);
        }
      }, a);
    } catch (o) {
      a(o);
    }
  }
  _calculateFieldStat(e, t, i) {
    const s = [];
    for (let n = 0; n < e.features.length; n++) if (null !== t.workingexpr) {
      const i = t.workingexpr.calculateValue(e.features[n]);
      null !== i && (i instanceof _core_sql_DateOnly_js__WEBPACK_IMPORTED_MODULE_15__.DateOnly || i instanceof _core_sql_TimeOnly_js__WEBPACK_IMPORTED_MODULE_17__.TimeOnly ? s.push(i.toNumber()) : i instanceof _core_sql_SqlTimestampOffset_js__WEBPACK_IMPORTED_MODULE_16__.SqlTimeStampOffset ? s.push(i.toMilliseconds()) : s.push(i));
    } else s.push(null);
    switch (t.typeofstat) {
      case "MIN":
        i.attributes[t.tofieldname] = (0,_support_stats_js__WEBPACK_IMPORTED_MODULE_12__.calculateStat)("min", s, -1);
        break;
      case "MAX":
        i.attributes[t.tofieldname] = (0,_support_stats_js__WEBPACK_IMPORTED_MODULE_12__.calculateStat)("max", s, -1);
        break;
      case "SUM":
        i.attributes[t.tofieldname] = (0,_support_stats_js__WEBPACK_IMPORTED_MODULE_12__.calculateStat)("sum", s, -1);
        break;
      case "COUNT":
        i.attributes[t.tofieldname] = s.length;
        break;
      case "VAR":
        i.attributes[t.tofieldname] = (0,_support_stats_js__WEBPACK_IMPORTED_MODULE_12__.calculateStat)("var", s, -1);
        break;
      case "STDDEV":
        i.attributes[t.tofieldname] = (0,_support_stats_js__WEBPACK_IMPORTED_MODULE_12__.calculateStat)("stddev", s, -1);
        break;
      case "AVG":
        i.attributes[t.tofieldname] = (0,_support_stats_js__WEBPACK_IMPORTED_MODULE_12__.calculateStat)("avg", s, -1);
    }
    return !0;
  }
  _calculateAndAppendAggregateItem(t) {
    const i = {
      attributes: {},
      geometry: null
    };
    for (const e of this._decodedGroupbyfield) {
      const s = e.singlefield ? t.features[0].attributes[e.singlefield] : _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_18__.WhereClause.convertValueToStorageFormat(e.expression.calculateValue(t.features[0]), e.sqlType);
      i.attributes[e.tofieldname] = s;
    }
    for (const e of this._decodedStatsfield) this._calculateFieldStat(t, e, i);
    const s = [];
    for (let e = 0; e < this._decodedStatsfield.length; e++) s.push(this._calculateFieldStat(t, this._decodedStatsfield[e], i));
    return this._featureCache[i.attributes[this.objectIdField]] = new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
      attributes: i.attributes,
      geometry: i.geometry
    }), i;
  }
  _generateAggregateHash(e) {
    let t = "";
    for (const i of this._decodedGroupbyfield) {
      const s = i.singlefield ? e.attributes[i.singlefield] : i.expression.calculateValue(e);
      t += null == s ? ":" : ":" + s.toString();
    }
    return (0,_core_MD5_js__WEBPACK_IMPORTED_MODULE_14__.createMD5Hash)(t, _core_MD5_js__WEBPACK_IMPORTED_MODULE_14__.outputTypes.String);
  }
  _stat() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return {
        calculated: !1
      };
    })();
  }
  getFeatureByObjectId() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return null;
    })();
  }
  static registerAction() {
    _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_7__["default"]._featuresetFunctions.groupby = function (e, t) {
      return new O({
        parentfeatureset: this,
        groupbyfields: e,
        statsfields: t
      });
    };
  }
}


/***/ }),

/***/ 89843:
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../chunks/languageUtils.js */ 44819);
/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/errorsupport.js */ 23373);
/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/FeatureSet.js */ 7014);
/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/IdSet.js */ 85708);
/* harmony import */ var _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/OrderbyClause.js */ 84263);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/





class a extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__["default"] {
  constructor(e) {
    super(e), this._orderbyclause = null, this.declaredClass = "esri.arcade.featureset.actions.OrderBy", this._maxProcessing = 100, this._orderbyclause = e.orderbyclause, this._parent = e.parentfeatureset;
  }
  _getSet(e) {
    var _this = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this._wset) {
        yield _this._ensureLoaded();
        const t = yield _this._getFilteredSet("", null, null, _this._orderbyclause, e);
        return _this._checkCancelled(e), _this._wset = t, _this._wset;
      }
      return _this._wset;
    })();
  }
  manualOrderSet(e, t) {
    var _this2 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const r = yield _this2.getIdColumnDictionary(e, [], -1, t);
      _this2._orderbyclause?.order(r);
      const n = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"]([], [], !0, null);
      for (let s = 0; s < r.length; s++) n._known.push(r[s].id);
      return n;
    })();
  }
  getIdColumnDictionary(t, r, n, s) {
    var _this3 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (n < t._known.length - 1) {
        const i = _this3._maxQueryRate();
        if ("GETPAGES" === t._known[n + 1]) return yield (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_1__.a1)(_this3._parent._expandPagedSet(t, i, 0, 0, s)), _this3.getIdColumnDictionary(t, r, n, s);
        let a = n + 1;
        const o = [];
        for (; a < t._known.length && "GETPAGES" !== t._known[a];) o.push(t._known[a]), a++;
        n += o.length;
        const u = yield (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_1__.a1)(_this3._parent._getFeatureBatch(o, s));
        _this3._checkCancelled(s);
        for (const e of u) r.push({
          id: e.attributes[_this3.objectIdField],
          feature: e
        });
        return _this3.getIdColumnDictionary(t, r, n, s);
      }
      return t._candidates.length > 0 ? (yield (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_1__.a1)(_this3._refineSetBlock(t, _this3._maxProcessingRate(), s)), _this3._checkCancelled(s), _this3.getIdColumnDictionary(t, r, n, s)) : r;
    })();
  }
  _isInFeatureSet(e) {
    return this._parent._isInFeatureSet(e);
  }
  _getFeatures(e, t, r, n) {
    return this._parent._getFeatures(e, t, r, n);
  }
  _featureFromCache(e) {
    if (void 0 === this._featureCache[e]) {
      const t = this._parent._featureFromCache(e);
      if (void 0 === t) return;
      return null === t ? null : (this._featureCache[e] = t, t);
    }
    return this._featureCache[e];
  }
  _fetchAndRefineFeatures() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_2__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_2__.FeatureSetErrorCodes.NeverReach);
    })();
  }
  _getFilteredSet(e, t, r, n, i) {
    var _this4 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this4._ensureLoaded();
      const a = yield _this4._parent._getFilteredSet(e, t, r, null === n ? _this4._orderbyclause : n, i);
      _this4._checkCancelled(i);
      const o = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"](a._candidates.slice(0), a._known.slice(0), a._ordered, _this4._clonePageDefinition(a.pagesDefinition));
      let u = !0;
      if (a._candidates.length > 0 && (u = !1), !1 === o._ordered) {
        let e = yield _this4.manualOrderSet(o, i);
        return !1 === u && (null === t && null === r || (e = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"](e._candidates.slice(0).concat(e._known.slice(0)), [], e._ordered, _this4._clonePageDefinition(e.pagesDefinition)))), e;
      }
      return o;
    })();
  }
  static registerAction() {
    _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__["default"]._featuresetFunctions.orderBy = function (e) {
      return "" === e ? this : new a({
        parentfeatureset: this,
        orderbyclause: new _support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_5__["default"](e)
      });
    };
  }
  getFieldsIndex() {
    return this._parent.getFieldsIndex();
  }
}


/***/ }),

/***/ 98477:
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/actions/Top.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../support/errorsupport.js */ 23373);
/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/FeatureSet.js */ 7014);
/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/IdSet.js */ 85708);
/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/shared.js */ 84940);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/




class a extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__["default"] {
  constructor(t) {
    super(t), this._topnum = 0, this.declaredClass = "esri.arcade.featureset.actions.Top", this._countedin = 0, this._maxProcessing = 100, this._topnum = t.topnum, this._parent = t.parentfeatureset;
  }
  _getSet(t) {
    var _this = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this._wset) {
        yield _this._ensureLoaded();
        const e = yield _this._parent._getSet(t);
        return _this._wset = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__["default"](e._candidates.slice(0), e._known.slice(0), !1, _this._clonePageDefinition(e.pagesDefinition)), _this._setKnownLength(_this._wset) > _this._topnum && (_this._wset._known = _this._wset._known.slice(0, _this._topnum)), _this._setKnownLength(_this._wset) >= _this._topnum && (_this._wset._candidates = []), _this._wset;
      }
      return _this._wset;
    })();
  }
  _setKnownLength(t) {
    return t._known.length > 0 && "GETPAGES" === t._known[t._known.length - 1] ? t._known.length - 1 : t._known.length;
  }
  _isInFeatureSet(t) {
    const e = this._parent._isInFeatureSet(t);
    if (e === _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.NotInFeatureSet) return e;
    const n = this._idstates[t];
    return n === _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.InFeatureSet || n === _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.NotInFeatureSet ? n : e === _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.InFeatureSet && void 0 === n ? this._countedin < this._topnum ? (this._idstates[t] = _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.InFeatureSet, this._countedin++, _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.InFeatureSet) : (this._idstates[t] = _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.NotInFeatureSet, _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.NotInFeatureSet) : _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.Unknown;
  }
  _expandPagedSet(n, s, i, a, o) {
    var _this2 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this2._parent) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_1__.FeatureSetErrorCodes.NotImplemented);
      if (s > _this2._topnum && (s = _this2._topnum), _this2._countedin >= _this2._topnum && n.pagesDefinition.internal.set.length <= n.pagesDefinition.resultOffset) {
        let t = n._known.length;
        return t > 0 && "GETPAGES" === n._known[t - 1] && (n._known.length = t - 1), t = n._candidates.length, t > 0 && "GETPAGES" === n._candidates[t - 1] && (n._candidates.length = t - 1), "success";
      }
      const r = yield _this2._parent._expandPagedSet(n, s, i, a, o);
      return _this2._setKnownLength(n) > _this2._topnum && (n._known.length = _this2._topnum), _this2._setKnownLength(n) >= _this2._topnum && (n._candidates.length = 0), r;
    })();
  }
  _getFeatures(t, e, n, i) {
    var _this3 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const a = [],
        o = _this3._maxQueryRate();
      if (!0 === _this3._checkIfNeedToExpandKnownPage(t, o)) return yield _this3._expandPagedSet(t, o, 0, 0, i), _this3._getFeatures(t, e, n, i);
      -1 !== e && void 0 === _this3._featureCache[e] && a.push(e);
      let r = 0;
      for (let s = t._lastFetchedIndex; s < t._known.length && (r++, r <= n && (t._lastFetchedIndex += 1), !(void 0 === _this3._featureCache[t._known[s]] && (t._known[s] !== e && a.push(t._known[s]), a.length > o))); s++);
      if (0 === a.length) return "success";
      const _ = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__["default"]([], a, !1, null),
        h = Math.min(a.length, n);
      yield _this3._parent._getFeatures(_, -1, h, i);
      for (let s = 0; s < h; s++) {
        const t = _this3._parent._featureFromCache(a[s]);
        void 0 !== t && (_this3._featureCache[a[s]] = t);
      }
      return "success";
    })();
  }
  _getFilteredSet(t, e, n, i, a) {
    var _this4 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this4._ensureLoaded();
      const o = yield _this4._getSet(a);
      return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_3__["default"](o._candidates.slice(0).concat(o._known.slice(0)), [], !1, _this4._clonePageDefinition(o.pagesDefinition));
    })();
  }
  _refineKnowns(t, e) {
    let n = 0,
      s = null;
    const a = [];
    for (let o = 0; o < t._candidates.length; o++) {
      const r = this._isInFeatureSet(t._candidates[o]);
      if (r === _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.InFeatureSet) {
        if (t._known.push(t._candidates[o]), n += 1, null === s ? s = {
          start: o,
          end: o
        } : s.end === o - 1 ? s.end = o : (a.push(s), s = {
          start: o,
          end: o
        }), t._known.length >= this._topnum) break;
      } else if (r === _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.NotInFeatureSet) null === s ? s = {
        start: o,
        end: o
      } : s.end === o - 1 ? s.end = o : (a.push(s), s = {
        start: o,
        end: o
      }), n += 1;else if (r === _support_shared_js__WEBPACK_IMPORTED_MODULE_4__.IdState.Unknown) break;
      if (n >= e) break;
    }
    null !== s && a.push(s);
    for (let i = a.length - 1; i >= 0; i--) t._candidates.splice(a[i].start, a[i].end - a[i].start + 1);
    this._setKnownLength(t) > this._topnum && (t._known = t._known.slice(0, this._topnum)), this._setKnownLength(t) >= this._topnum && (t._candidates = []);
  }
  _stat() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return {
        calculated: !1
      };
    })();
  }
  _canDoAggregates() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return !1;
    })();
  }
  static registerAction() {
    _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_2__["default"]._featuresetFunctions.top = function (t) {
      return new a({
        parentfeatureset: this,
        topnum: t
      });
    };
  }
  getFieldsIndex() {
    return this._parent.getFieldsIndex();
  }
}


/***/ }),

/***/ 67944:
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ T)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ 26763);
/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../kernel.js */ 84489);
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../request.js */ 1897);
/* harmony import */ var _Attachment_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../Attachment.js */ 75866);
/* harmony import */ var _Dictionary_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../Dictionary.js */ 27500);
/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/errorsupport.js */ 23373);
/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../support/FeatureSet.js */ 7014);
/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../support/IdSet.js */ 85708);
/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../support/shared.js */ 84940);
/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../support/sqlUtils.js */ 48697);
/* harmony import */ var _support_stats_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../support/stats.js */ 61709);
/* harmony import */ var _core_MD5_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/MD5.js */ 95409);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../geometry/support/jsonUtils.js */ 71182);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ 53492);
/* harmony import */ var _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../layers/FeatureLayer.js */ 88749);
/* harmony import */ var _layers_SubtypeGroupLayer_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../layers/SubtypeGroupLayer.js */ 62503);
/* harmony import */ var _rest_query_executeQuery_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../rest/query/executeQuery.js */ 22683);
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../config.js */ 68327);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ 19420);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../core/has.js */ 67087);
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../core/urlUtils.js */ 55050);
/* harmony import */ var _rest_query_support_AttachmentInfo_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../rest/query/support/AttachmentInfo.js */ 4982);
/* harmony import */ var _rest_support_AttachmentQuery_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../rest/support/AttachmentQuery.js */ 35981);
/* harmony import */ var _rest_query_executeForCount_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../rest/query/executeForCount.js */ 61028);
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../geometry.js */ 6010);
/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../geometry/support/normalizeUtils.js */ 93136);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../core/Error.js */ 32995);
/* harmony import */ var _core_pbf_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../core/pbf.js */ 74617);
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../core/unitUtils.js */ 82769);
/* harmony import */ var _geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../geometry/ellipsoidUtils.js */ 64004);
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../rest/support/Query.js */ 28665);
/* harmony import */ var _rest_query_executeForIds_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../../rest/query/executeForIds.js */ 40455);
/* harmony import */ var _rest_query_executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../../rest/query/executeQueryJSON.js */ 60355);
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../../layers/graphics/featureConversionUtils.js */ 50805);
/* harmony import */ var _rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../../../rest/support/FeatureSet.js */ 87096);
/* harmony import */ var _rest_support_RelationshipQuery_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../../rest/support/RelationshipQuery.js */ 76356);
/* harmony import */ var _rest_support_TopFeaturesQuery_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../../../rest/support/TopFeaturesQuery.js */ 1304);
/* harmony import */ var _rest_support_StatisticDefinition_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../../../rest/support/StatisticDefinition.js */ 58469);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/






































class T extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_7__["default"] {
  constructor(e) {
    super(e), this.declaredClass = "esri.arcade.featureset.sources.FeatureLayerDynamic", this._removeGeometry = !1, this._overrideFields = null, this.formulaCredential = null, this._pageJustIds = !1, this._requestStandardised = !1, this._useDefinitionExpression = !0, e.spatialReference && (this.spatialReference = e.spatialReference), this._transparent = !0, this._maxProcessing = 1e3, this._layer = e.layer, this._wset = null, void 0 !== e.outFields && (this._overrideFields = e.outFields), void 0 !== e.includeGeometry && (this._removeGeometry = !1 === e.includeGeometry);
  }
  _maxQueryRate() {
    return _support_shared_js__WEBPACK_IMPORTED_MODULE_9__.defaultMaxRecords;
  }
  end() {
    return this._layer;
  }
  optimisePagingFeatureQueries(e) {
    this._pageJustIds = e;
  }
  get urlQueryPath() {
    return this._layer.parsedUrl.path || "";
  }
  convertQueryToLruCacheKey(e) {
    const t = this.urlQueryPath + "," + (0,_support_shared_js__WEBPACK_IMPORTED_MODULE_9__.stableStringify)(e.toJSON());
    return (0,_core_MD5_js__WEBPACK_IMPORTED_MODULE_12__.createMD5Hash)(t, _core_MD5_js__WEBPACK_IMPORTED_MODULE_12__.outputTypes.String);
  }
  loadImpl() {
    var _this = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return !0 === _this._layer.loaded ? (_this._initialiseFeatureSet(), _this) : (yield _this._layer.load(), _this._initialiseFeatureSet(), _this);
    })();
  }
  _initialiseFeatureSet() {
    if (null == this.spatialReference && (this.spatialReference = this._layer.spatialReference), this.geometryType = this._layer.geometryType, this.fields = this._layer.fields.slice(0), this.hasZ = !0 === this._layer?.capabilities?.data?.supportsZ, this.hasM = !0 === this._layer?.capabilities?.data?.supportsM, null !== this._overrideFields) if (1 === this._overrideFields.length && "*" === this._overrideFields[0]) this._overrideFields = null;else {
      const e = [],
        t = [];
      for (const i of this.fields) if ("oid" === i.type) e.push(i), t.push(i.name);else for (const r of this._overrideFields) if (r.toLowerCase() === i.name.toLowerCase()) {
        e.push(i), t.push(i.name);
        break;
      }
      this.fields = e, this._overrideFields = t;
    }
    if (this._layer.source && this._layer.source.sourceJSON) {
      const e = this._layer.source.sourceJSON.currentVersion;
      !0 === this._layer.source.sourceJSON.useStandardizedQueries ? (this._databaseType = _support_shared_js__WEBPACK_IMPORTED_MODULE_9__.FeatureServiceDatabaseType.StandardisedNoInterval, null != e && e >= 10.61 && (this._databaseType = _support_shared_js__WEBPACK_IMPORTED_MODULE_9__.FeatureServiceDatabaseType.Standardised)) : null != e && (e >= 10.5 && (this._databaseType = _support_shared_js__WEBPACK_IMPORTED_MODULE_9__.FeatureServiceDatabaseType.StandardisedNoInterval, this._requestStandardised = !0), e >= 10.61 && (this._databaseType = _support_shared_js__WEBPACK_IMPORTED_MODULE_9__.FeatureServiceDatabaseType.Standardised));
    }
    this.objectIdField = this._layer.objectIdField;
    for (const e of this.fields) "global-id" === e.type && (this.globalIdField = e.name);
    this._layer instanceof _layers_SubtypeGroupLayer_js__WEBPACK_IMPORTED_MODULE_16__["default"] ? (this.typeIdField = this._layer.subtypeField ?? "", this.types = this._layer.subtypes) : (this.typeIdField = this._layer.typeIdField ?? "", this.types = this._layer.types);
  }
  _isInFeatureSet() {
    return _support_shared_js__WEBPACK_IMPORTED_MODULE_9__.IdState.InFeatureSet;
  }
  _refineSetBlock(e) {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return e;
    })();
  }
  _candidateIdTransform(e) {
    return e;
  }
  _getSet(e) {
    var _this2 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this2._wset) {
        yield _this2._ensureLoaded();
        const t = yield _this2._getFilteredSet("", null, null, null, e);
        return _this2._wset = t, t;
      }
      return _this2._wset;
    })();
  }
  _runDatabaseProbe(e) {
    var _this3 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this3._ensureLoaded();
      const t = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_31__["default"]();
      _this3.datesInUnknownTimezone && (t.timeReferenceUnknownClient = !0), t.where = e.replace("OBJECTID", _this3._layer.objectIdField);
      try {
        return yield _this3._layer.queryObjectIds(t), !0;
      } catch (i) {
        return !1;
      }
    })();
  }
  _canUsePagination() {
    return !(!this._layer.capabilities || !this._layer.capabilities.query || !0 !== this._layer.capabilities.query.supportsPagination);
  }
  _cacheableFeatureSetSourceKey() {
    return this._layer.url;
  }
  pbfSupportedForQuery(e) {
    const t = this._layer?.capabilities?.query;
    return !e.outStatistics && !0 === t?.supportsFormatPBF && !0 === t?.supportsQuantizationEditMode;
  }
  queryPBF(e) {
    var _this4 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return e.quantizationParameters = {
        mode: "edit"
      }, (yield (0,_rest_query_executeQuery_js__WEBPACK_IMPORTED_MODULE_17__.executeQuery)(_this4._layer.parsedUrl, e, {
        format: "pbf"
      }, {})).unquantize();
    })();
  }
  get gdbVersion() {
    return this._layer && this._layer.capabilities && this._layer.capabilities.data && this._layer.capabilities.data.isVersioned ? this._layer.gdbVersion || "SDE.DEFAULT" : "";
  }
  nativeCapabilities() {
    return {
      title: this._layer.title ?? "",
      source: this,
      canQueryRelated: !0,
      capabilities: this._layer.capabilities,
      databaseType: this._databaseType,
      requestStandardised: this._requestStandardised
    };
  }
  executeQuery(e, t) {
    e.returnZ = this.hasZ, e.returnM = this.hasM;
    const i = "execute" === t ? _rest_query_executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_33__.executeQueryJSON : "executeForCount" === t ? _rest_query_executeForCount_js__WEBPACK_IMPORTED_MODULE_24__.executeForCount : _rest_query_executeForIds_js__WEBPACK_IMPORTED_MODULE_32__.executeForIds,
      r = "execute" === t && this.pbfSupportedForQuery(e);
    let s = null;
    if (this.recentlyUsedQueries) {
      const t = this.convertQueryToLruCacheKey(e);
      s = this.recentlyUsedQueries.getFromCache(t), null === s && (s = !0 !== r ? i(this._layer.parsedUrl.path, e) : this.queryPBF(e), this.recentlyUsedQueries.addToCache(t, s), s = s.catch(e => {
        throw this.recentlyUsedQueries?.removeFromCache(t), e;
      }));
    }
    return this.featureSetQueryInterceptor && this.featureSetQueryInterceptor.preLayerQueryCallback({
      layer: this._layer,
      query: e,
      method: t
    }), null === s && (s = !0 !== r ? i(this._layer.parsedUrl.path, e) : this.queryPBF(e)), s;
  }
  _getFilteredSet(e, t, i, r, s) {
    var _this5 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const a = yield _this5.databaseType();
      if (_this5.isTable() && t && null !== e && "" !== e) {
        return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__["default"]([], [], !0, null);
      }
      if (_this5._canUsePagination()) return _this5._getFilteredSetUsingPaging(e, t, i, r, s);
      let n = "",
        l = !1;
      null !== r && _this5._layer.capabilities && _this5._layer.capabilities.query && !0 === _this5._layer.capabilities.query.supportsOrderBy && (n = r.constructClause(), l = !0);
      const u = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_31__["default"]();
      _this5.datesInUnknownTimezone && (u.timeReferenceUnknownClient = !0), u.where = null === i ? null === t ? "1=1" : "" : (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_10__.toWhereClause)(i, a), _this5._requestStandardised && (u.sqlFormat = "standard"), u.spatialRelationship = _this5._makeRelationshipEnum(e), u.outSpatialReference = _this5.spatialReference, u.orderByFields = "" !== n ? n.split(",") : null, u.geometry = null === t ? null : t, u.relationParameter = _this5._makeRelationshipParam(e);
      let d = yield _this5.executeQuery(u, "executeForIds");
      null === d && (d = []), _this5._checkCancelled(s);
      return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__["default"]([], d, l, null);
    })();
  }
  _expandPagedSet(e, t, i, r, s) {
    return this._expandPagedSetFeatureSet(e, t, i, r, s);
  }
  _getFilteredSetUsingPaging(e, t, i, r, s) {
    var _this6 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let a = "",
        n = !1;
      null !== r && _this6._layer.capabilities && _this6._layer.capabilities.query && !0 === _this6._layer.capabilities.query.supportsOrderBy && (a = r.constructClause(), n = !0);
      const l = yield _this6.databaseType();
      let u = null === i ? null === t ? "1=1" : "" : (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_10__.toWhereClause)(i, l);
      _this6._layer.definitionExpression && _this6._useDefinitionExpression && (u = "" !== u ? "((" + _this6._layer.definitionExpression + ") AND (" + u + "))" : _this6._layer.definitionExpression);
      let d = _this6._maxQueryRate();
      const h = _this6._layer.capabilities?.query.maxRecordCount;
      null != h && h < d && (d = h);
      let p = null;
      if (!0 === _this6._pageJustIds) p = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__["default"]([], ["GETPAGES"], n, {
        spatialRel: _this6._makeRelationshipEnum(e),
        relationParam: _this6._makeRelationshipParam(e),
        outFields: _this6._layer.objectIdField,
        resultRecordCount: d,
        resultOffset: 0,
        geometry: null === t ? null : t,
        where: u,
        orderByFields: a,
        returnGeometry: !1,
        returnIdsOnly: "false",
        internal: {
          set: [],
          lastRetrieved: 0,
          lastPage: 0,
          fullyResolved: !1
        }
      });else {
        let i = !0;
        !0 === _this6._removeGeometry && (i = !1);
        const r = _this6._overrideFields ?? _this6._fieldsIncludingObjectId(["*"]);
        p = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__["default"]([], ["GETPAGES"], n, {
          spatialRel: _this6._makeRelationshipEnum(e),
          relationParam: _this6._makeRelationshipParam(e),
          outFields: r.join(","),
          resultRecordCount: d,
          resultOffset: 0,
          geometry: null === t ? null : t,
          where: u,
          orderByFields: a,
          returnGeometry: i,
          returnIdsOnly: "false",
          internal: {
            set: [],
            lastRetrieved: 0,
            lastPage: 0,
            fullyResolved: !1
          }
        });
      }
      return yield _this6._expandPagedSet(p, d, 0, 1, s), p;
    })();
  }
  _clonePageDefinition(e) {
    return null === e ? null : !0 !== e.groupbypage ? {
      groupbypage: !1,
      spatialRel: e.spatialRel,
      relationParam: e.relationParam,
      outFields: e.outFields,
      resultRecordCount: e.resultRecordCount,
      resultOffset: e.resultOffset,
      geometry: e.geometry,
      where: e.where,
      orderByFields: e.orderByFields,
      returnGeometry: e.returnGeometry,
      returnIdsOnly: e.returnIdsOnly,
      internal: e.internal
    } : {
      groupbypage: !0,
      spatialRel: e.spatialRel,
      relationParam: e.relationParam,
      outFields: e.outFields,
      resultRecordCount: e.resultRecordCount,
      useOIDpagination: e.useOIDpagination,
      generatedOid: e.generatedOid,
      groupByFieldsForStatistics: e.groupByFieldsForStatistics,
      resultOffset: e.resultOffset,
      outStatistics: e.outStatistics,
      geometry: e.geometry,
      where: e.where,
      orderByFields: e.orderByFields,
      returnGeometry: e.returnGeometry,
      returnIdsOnly: e.returnIdsOnly,
      internal: e.internal
    };
  }
  _getPhysicalPage(e, t, i) {
    var _this7 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const r = e.pagesDefinition.internal.lastRetrieved,
        s = r,
        a = e.pagesDefinition.internal.lastPage,
        n = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_31__["default"]();
      _this7._requestStandardised && (n.sqlFormat = "standard"), _this7.datesInUnknownTimezone && (n.timeReferenceUnknownClient = !0), n.spatialRelationship = e.pagesDefinition.spatialRel, n.relationParameter = e.pagesDefinition.relationParam, n.outFields = e.pagesDefinition.outFields.split(","), n.num = e.pagesDefinition.resultRecordCount, n.start = e.pagesDefinition.internal.lastPage, n.geometry = e.pagesDefinition.geometry, n.where = e.pagesDefinition.where, n.orderByFields = "" !== e.pagesDefinition.orderByFields ? e.pagesDefinition.orderByFields.split(",") : null, n.returnGeometry = e.pagesDefinition.returnGeometry, n.outSpatialReference = _this7.spatialReference;
      const l = yield _this7.executeQuery(n, "execute");
      if (_this7._checkCancelled(i), e.pagesDefinition.internal.lastPage !== a) return "done";
      const o = _this7._layer.objectIdField;
      for (let u = 0; u < l.features.length; u++) e.pagesDefinition.internal.set[s + u] = l.features[u].attributes[o];
      if (!1 === _this7._pageJustIds) for (let u = 0; u < l.features.length; u++) _this7._featureCache[l.features[u].attributes[o]] = l.features[u];
      return (void 0 === l.exceededTransferLimit && l.features.length !== e.pagesDefinition.resultRecordCount || !1 === l.exceededTransferLimit) && (e.pagesDefinition.internal.fullyResolved = !0), e.pagesDefinition.internal.lastRetrieved = r + l.features.length, e.pagesDefinition.internal.lastPage += e.pagesDefinition.resultRecordCount, "done";
    })();
  }
  _fieldsIncludingObjectId(e) {
    if (null === e) return [this.objectIdField];
    const t = e.slice(0);
    if (t.includes("*")) return t;
    let i = !1;
    for (const r of t) if (r.toUpperCase() === this.objectIdField.toUpperCase()) {
      i = !0;
      break;
    }
    return !1 === i && t.push(this.objectIdField), t;
  }
  _getFeatures(e, t, i, r) {
    var _this8 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const s = [];
      if (-1 !== t && void 0 === _this8._featureCache[t] && s.push(t), !0 === _this8._checkIfNeedToExpandKnownPage(e, _this8._maxProcessingRate())) return yield _this8._expandPagedSet(e, _this8._maxProcessingRate(), 0, 0, r), _this8._getFeatures(e, t, i, r);
      let l = 0;
      for (let a = e._lastFetchedIndex; a < e._known.length; a++) {
        if (e._lastFetchedIndex += 1, l++, void 0 === _this8._featureCache[e._known[a]]) {
          let i = !1;
          if (null !== _this8._layer._mode && void 0 !== _this8._layer._mode) {
            const t = _this8._layer._mode;
            if (void 0 !== t._featureMap[e._known[a]]) {
              const r = t._featureMap[e._known[a]];
              null !== r && (i = !0, _this8._featureCache[e._known[a]] = r);
            }
          }
          if (!1 === i && (e._known[a] !== t && s.push(e._known[a]), s.length >= _this8._maxProcessingRate() - 1)) break;
        }
        if (l >= i && 0 === s.length) break;
      }
      if (0 === s.length) return "success";
      const o = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_31__["default"]();
      _this8._requestStandardised && (o.sqlFormat = "standard"), _this8.datesInUnknownTimezone && (o.timeReferenceUnknownClient = !0), o.objectIds = s, o.outFields = _this8._overrideFields ?? _this8._fieldsIncludingObjectId(["*"]), o.returnGeometry = !0, !0 === _this8._removeGeometry && (o.returnGeometry = !1), o.outSpatialReference = _this8.spatialReference;
      const u = yield _this8.executeQuery(o, "execute");
      if (_this8._checkCancelled(r), void 0 !== u.error) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetErrorCodes.RequestFailed, {
        reason: u.error
      });
      const d = _this8._layer.objectIdField;
      for (let a = 0; a < u.features.length; a++) _this8._featureCache[u.features[a].attributes[d]] = u.features[a];
      return "success";
    })();
  }
  _getDistinctPages(e, t, i, r, s, l, o, u, d) {
    var _this9 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this9._ensureLoaded();
      const h = yield _this9.databaseType();
      let p = i.parseTree.column;
      const c = _this9._layer.fields ?? [];
      for (let a = 0; a < c.length; a++) if (c[a].name.toLowerCase() === p.toLowerCase()) {
        p = c[a].name;
        break;
      }
      const f = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_31__["default"]();
      _this9._requestStandardised && (f.sqlFormat = "standard"), _this9.datesInUnknownTimezone && (f.timeReferenceUnknownClient = !0);
      let m = null === l ? null === s ? "1=1" : "" : (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_10__.toWhereClause)(l, h);
      _this9._layer.definitionExpression && _this9._useDefinitionExpression && (m = "" !== m ? "((" + _this9._layer.definitionExpression + ") AND (" + m + "))" : _this9._layer.definitionExpression), f.where = m, f.spatialRelationship = _this9._makeRelationshipEnum(r), f.relationParameter = _this9._makeRelationshipParam(r), f.geometry = null === s ? null : s, f.returnDistinctValues = !0, f.returnGeometry = !1, f.outFields = [p];
      const _ = yield _this9.executeQuery(f, "execute");
      if (_this9._checkCancelled(d), !_.hasOwnProperty("features")) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetErrorCodes.InvalidStatResponse);
      let g = !1;
      for (let a = 0; a < c.length; a++) if (c[a].name === p) {
        "date" === c[a].type && (g = !0);
        break;
      }
      for (let a = 0; a < _.features.length; a++) {
        if (g) {
          const e = _.features[a].attributes[p];
          null !== e ? u.push(new Date(e)) : u.push(e);
        } else u.push(_.features[a].attributes[p]);
        if (u.length >= o) break;
      }
      if (0 === _.features.length) return u;
      if (_.features.length === _this9._layer.capabilities?.query.maxRecordCount && u.length < o) {
        return {
          calculated: !0,
          result: yield _this9._getDistinctPages(e + _.features.length, t, i, r, s, l, o, u, d)
        };
      }
      return u;
    })();
  }
  _distinctStat(e, t, i, r, s, a, n) {
    var _this10 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return {
        calculated: !0,
        result: yield _this10._getDistinctPages(0, e, t, i, r, s, a, [], n)
      };
    })();
  }
  isTable() {
    return this._layer.isTable || null === this._layer.geometryType || "table" === this._layer.type || "" === this._layer.geometryType || "esriGeometryNull" === this._layer.geometryType;
  }
  _countstat(e, t, i, r) {
    var _this11 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const s = yield _this11.databaseType(),
        a = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_31__["default"]();
      if (_this11._requestStandardised && (a.sqlFormat = "standard"), _this11.isTable() && i && null !== t && "" !== t) return {
        calculated: !0,
        result: 0
      };
      let n = null === r ? null === i ? "1=1" : "" : (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_10__.toWhereClause)(r, s);
      _this11._layer.definitionExpression && _this11._useDefinitionExpression && (n = "" !== n ? "((" + _this11._layer.definitionExpression + ") AND (" + n + "))" : _this11._layer.definitionExpression), a.where = n, _this11.datesInUnknownTimezone && (a.timeReferenceUnknownClient = !0), a.where = n, a.spatialRelationship = _this11._makeRelationshipEnum(t), a.relationParameter = _this11._makeRelationshipParam(t), a.geometry = null === i ? null : i, a.returnGeometry = !1;
      return {
        calculated: !0,
        result: yield _this11.executeQuery(a, "executeForCount")
      };
    })();
  }
  _stats(e, t, i, r, s, l, o) {
    var _this12 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this12._ensureLoaded();
      const u = _this12._layer.capabilities && _this12._layer.capabilities.query && !0 === _this12._layer.capabilities.query.supportsSqlExpression,
        d = _this12._layer.capabilities && _this12._layer.capabilities.query && !0 === _this12._layer.capabilities.query.supportsStatistics,
        h = _this12._layer.capabilities && _this12._layer.capabilities.query && !0 === _this12._layer.capabilities.query.supportsDistinct;
      if ("count" === e) return h ? _this12._countstat(e, i, r, s) : {
        calculated: !1
      };
      if (!1 === d || !1 === (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_10__.isSingleField)(t) && !1 === u || !1 === t.isStandardized) return "" !== i || null !== s ? {
        calculated: !1
      } : _this12._manualStat(e, t, l, o);
      if ("distinct" === e) return !1 === h ? "" !== i || null !== s ? {
        calculated: !1
      } : _this12._manualStat(e, t, l, o) : _this12._distinctStat(e, t, i, r, s, l, o);
      const p = yield _this12.databaseType();
      if (_this12.isTable() && r && null !== i && "" !== i) return {
        calculated: !0,
        result: null
      };
      const c = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_31__["default"]();
      _this12._requestStandardised && (c.sqlFormat = "standard");
      let _ = null === s ? null === r ? "1=1" : "" : (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_10__.toWhereClause)(s, p);
      _this12._layer.definitionExpression && _this12._useDefinitionExpression && (_ = "" !== _ ? "((" + _this12._layer.definitionExpression + ") AND (" + _ + "))" : _this12._layer.definitionExpression), c.where = _, c.spatialRelationship = _this12._makeRelationshipEnum(i), c.relationParameter = _this12._makeRelationshipParam(i), c.geometry = null === r ? null : r, _this12.datesInUnknownTimezone && (c.timeReferenceUnknownClient = !0);
      const g = new _rest_support_StatisticDefinition_js__WEBPACK_IMPORTED_MODULE_38__["default"]();
      g.statisticType = (0,_support_stats_js__WEBPACK_IMPORTED_MODULE_11__.decodeStatType)(e), g.onStatisticField = (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_10__.toWhereClause)(t, p), g.outStatisticFieldName = "ARCADE_STAT_RESULT", c.returnGeometry = !1;
      let w = "ARCADE_STAT_RESULT";
      c.outStatistics = [g];
      const R = yield _this12.executeQuery(c, "execute");
      if (!R.hasOwnProperty("features") || 0 === R.features.length) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetErrorCodes.InvalidStatResponse);
      let S = !1;
      const F = R.fields ?? [];
      for (let a = 0; a < F.length; a++) if ("ARCADE_STAT_RESULT" === F[a].name.toUpperCase()) {
        w = F[a].name, "date" === F[a].type && (S = !0);
        break;
      }
      if (S) {
        let e = R.features[0].attributes[w];
        return null !== e && (e = new Date(R.features[0].attributes[w])), {
          calculated: !0,
          result: e
        };
      }
      return {
        calculated: !0,
        result: R.features[0].attributes[w]
      };
    })();
  }
  _stat(e, t, i, r, s, a, n) {
    return this._stats(e, t, i, r, s, a, n);
  }
  _canDoAggregates(e, t) {
    var _this13 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this13._ensureLoaded();
      let i = !1;
      const r = _this13._layer.capabilities?.query,
        s = !0 === r?.supportsSqlExpression;
      if (null != r && !0 === r.supportsStatistics && !0 === r.supportsOrderBy && (i = !0), i) for (let a = 0; a < t.length - 1; a++) (!1 === t[a].workingexpr?.isStandardized || !1 === (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_10__.isSingleField)(t[a].workingexpr) && !1 === s) && (i = !1);
      return !1 !== i;
    })();
  }
  _makeRelationshipEnum(e) {
    if (e.includes("esriSpatialRelRelation")) return "relation";
    switch (e) {
      case "esriSpatialRelRelation":
        return "relation";
      case "esriSpatialRelIntersects":
        return "intersects";
      case "esriSpatialRelContains":
        return "contains";
      case "esriSpatialRelOverlaps":
        return "overlaps";
      case "esriSpatialRelWithin":
        return "within";
      case "esriSpatialRelTouches":
        return "touches";
      case "esriSpatialRelCrosses":
        return "crosses";
      case "esriSpatialRelEnvelopeIntersects":
        return "envelope-intersects";
    }
    return e;
  }
  _makeRelationshipParam(e) {
    return e.includes("esriSpatialRelRelation") ? e.split(":")[1] : "";
  }
  _getAggregatePagesDataSourceDefinition(e, t, i, r, s, a, n) {
    var _this14 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this14._ensureLoaded();
      const l = yield _this14.databaseType();
      let u = "",
        d = !1,
        h = !1;
      null !== a && _this14._layer.capabilities && _this14._layer.capabilities.query && !0 === _this14._layer.capabilities.query.supportsOrderBy && (u = a.constructClause(), h = !0), _this14._layer.capabilities && _this14._layer.capabilities.query && !1 === _this14._layer.capabilities.query.supportsPagination && (h = !1, d = !0, u = _this14._layer.objectIdField);
      const p = [];
      for (let o = 0; o < t.length; o++) {
        const e = new _rest_support_StatisticDefinition_js__WEBPACK_IMPORTED_MODULE_38__["default"]();
        e.onStatisticField = null !== t[o].workingexpr ? (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_10__.toWhereClause)(t[o].workingexpr, l) : "", e.outStatisticFieldName = t[o].field, e.statisticType = t[o].toStatisticsName(), p.push(e);
      }
      "" === u && (u = e.join(","));
      let c = _this14._maxQueryRate();
      const f = _this14._layer.capabilities?.query.maxRecordCount;
      null != f && f < c && (c = f);
      let m = null === s ? null === r ? "1=1" : "" : (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_10__.toWhereClause)(s, l);
      _this14._layer.definitionExpression && _this14._useDefinitionExpression && (m = "" !== m ? "((" + _this14._layer.definitionExpression + ") AND (" + m + "))" : _this14._layer.definitionExpression);
      return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_8__["default"]([], ["GETPAGES"], h, {
        groupbypage: !0,
        spatialRel: _this14._makeRelationshipEnum(i),
        relationParam: _this14._makeRelationshipParam(i),
        outFields: ["*"],
        useOIDpagination: d,
        generatedOid: n,
        resultRecordCount: c,
        resultOffset: 0,
        groupByFieldsForStatistics: e,
        outStatistics: p,
        geometry: null === r ? null : r,
        where: m,
        orderByFields: u,
        returnGeometry: !1,
        returnIdsOnly: !1,
        internal: {
          lastMaxId: -1,
          set: [],
          lastRetrieved: 0,
          lastPage: 0,
          fullyResolved: !1
        }
      });
    })();
  }
  _getAgregagtePhysicalPage(t, i, r) {
    var _this15 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let s = t.pagesDefinition.where;
      !0 === t.pagesDefinition.useOIDpagination && (s = "" !== s ? "(" + s + ") AND (" + t.pagesDefinition.generatedOid + ">" + t.pagesDefinition.internal.lastMaxId.toString() + ")" : t.pagesDefinition.generatedOid + ">" + t.pagesDefinition.internal.lastMaxId.toString());
      const l = t.pagesDefinition.internal.lastRetrieved,
        o = l,
        u = t.pagesDefinition.internal.lastPage,
        d = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_31__["default"]();
      if (_this15._requestStandardised && (d.sqlFormat = "standard"), d.where = s, d.spatialRelationship = t.pagesDefinition.spatialRel, d.relationParameter = t.pagesDefinition.relationParam, d.outFields = t.pagesDefinition.outFields, d.outStatistics = t.pagesDefinition.outStatistics, d.geometry = t.pagesDefinition.geometry, d.groupByFieldsForStatistics = t.pagesDefinition.groupByFieldsForStatistics, d.num = t.pagesDefinition.resultRecordCount, d.start = t.pagesDefinition.internal.lastPage, d.returnGeometry = t.pagesDefinition.returnGeometry, _this15.datesInUnknownTimezone && (d.timeReferenceUnknownClient = !0), d.orderByFields = "" !== t.pagesDefinition.orderByFields ? t.pagesDefinition.orderByFields.split(",") : null, _this15.isTable() && d.geometry && d.spatialRelationship) return [];
      const h = yield _this15.executeQuery(d, "execute");
      if (_this15._checkCancelled(r), !h.hasOwnProperty("features")) throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetErrorCodes.InvalidStatResponse);
      const p = [];
      if (t.pagesDefinition.internal.lastPage !== u) return [];
      h.features.length > 0 && void 0 === h.features[0].attributes[t.pagesDefinition.generatedOid] && (t.pagesDefinition.generatedOid = t.pagesDefinition.generatedOid.toLowerCase());
      for (let e = 0; e < h.features.length; e++) t.pagesDefinition.internal.set[o + e] = h.features[e].attributes[t.pagesDefinition.generatedOid];
      for (let a = 0; a < h.features.length; a++) p.push(new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
        attributes: h.features[a].attributes,
        geometry: null
      }));
      return !0 === t.pagesDefinition.useOIDpagination ? 0 === h.features.length ? t.pagesDefinition.internal.fullyResolved = !0 : t.pagesDefinition.internal.lastMaxId = h.features[h.features.length - 1].attributes[t.pagesDefinition.generatedOid] : (void 0 === h.exceededTransferLimit && h.features.length !== t.pagesDefinition.resultRecordCount || !1 === h.exceededTransferLimit) && (t.pagesDefinition.internal.fullyResolved = !0), t.pagesDefinition.internal.lastRetrieved = l + h.features.length, t.pagesDefinition.internal.lastPage += t.pagesDefinition.resultRecordCount, p;
    })();
  }
  static create(e, t, i, r, s) {
    const a = new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_15__["default"]({
      url: e,
      outFields: null === t ? ["*"] : t
    });
    return new T({
      layer: a,
      spatialReference: i,
      lrucache: r,
      interceptor: s
    });
  }
  relationshipMetaData() {
    return this._layer && this._layer.source && this._layer.source.sourceJSON?.relationships ? this._layer.source.sourceJSON.relationships : [];
  }
  serviceUrl() {
    return (0,_support_shared_js__WEBPACK_IMPORTED_MODULE_9__.extractServiceUrl)(this._layer.parsedUrl.path);
  }
  queryAttachments(e, t, i, a, n) {
    var _this16 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const l = _this16._layer.capabilities;
      if (l?.data.supportsAttachment && l?.operations.supportsQueryAttachments) {
        const l = {
          objectIds: [e],
          returnMetadata: n
        };
        (t && t > 0 || i && i > 0) && (l.size = [t && t > 0 ? t : 0, i && i > 0 ? i : t + 1]), a && a.length > 0 && (l.attachmentTypes = a), _this16.featureSetQueryInterceptor && _this16.featureSetQueryInterceptor.preLayerQueryCallback({
          layer: _this16._layer,
          query: l,
          method: "attachments"
        });
        const o = yield _this16._layer.queryAttachments(l),
          u = [];
        return o && o[e] && o[e].forEach(t => {
          const i = _this16._layer.parsedUrl.path + "/" + e.toString() + "/attachments/" + t.id.toString();
          let a = null;
          n && t.exifInfo && (a = _Dictionary_js__WEBPACK_IMPORTED_MODULE_5__["default"].convertJsonToArcade(t.exifInfo, "system", !0)), u.push(new _Attachment_js__WEBPACK_IMPORTED_MODULE_4__["default"](t.id, t.name, t.contentType, t.size, i, a, t.keywords ?? null));
        }), u;
      }
      return [];
    })();
  }
  queryRelatedFeatures(t) {
    var _this17 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const r = {
        f: "json",
        relationshipId: t.relationshipId.toString(),
        definitionExpression: t.where,
        outFields: t.outFields?.join(","),
        returnGeometry: t.returnGeometry.toString()
      };
      void 0 !== t.resultOffset && null !== t.resultOffset && (r.resultOffset = t.resultOffset.toString()), void 0 !== t.resultRecordCount && null !== t.resultRecordCount && (r.resultRecordCount = t.resultRecordCount.toString()), t.orderByFields && (r.orderByFields = t.orderByFields.join(",")), t.objectIds && t.objectIds.length > 0 && (r.objectIds = t.objectIds.join(",")), t.outSpatialReference && (r.outSR = (0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.srToRESTValue)(t.outSpatialReference)), _this17.featureSetQueryInterceptor && _this17.featureSetQueryInterceptor.preRequestCallback({
        layer: _this17._layer,
        queryPayload: r,
        method: "relatedrecords",
        url: _this17._layer.parsedUrl.path + "/queryRelatedRecords"
      });
      const s = yield (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(_this17._layer.parsedUrl.path + "/queryRelatedRecords", {
        responseType: "json",
        query: r
      });
      if (s.data) {
        const t = {},
          i = s.data;
        if (i?.relatedRecordGroups) {
          const r = i.spatialReference;
          for (const s of i.relatedRecordGroups) {
            const a = s.objectId,
              n = [];
            for (const t of s.relatedRecords) {
              t.geometry && (t.geometry.spatialReference = r);
              const i = new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
                geometry: t.geometry ? (0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_13__.fromJSON)(t.geometry) : null,
                attributes: t.attributes
              });
              n.push(i);
            }
            t[a] = {
              features: n,
              exceededTransferLimit: !0 === i.exceededTransferLimit
            };
          }
        }
        return t;
      }
      throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_6__.FeatureSetErrorCodes.InvalidRequest);
    })();
  }
  getFeatureByObjectId(e, t) {
    var _this18 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const i = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_31__["default"]();
      i.outFields = t, i.returnGeometry = !1, i.outSpatialReference = _this18.spatialReference, i.where = _this18.objectIdField + "=" + e.toString(), _this18.datesInUnknownTimezone && (i.timeReferenceUnknownClient = !0), _this18.featureSetQueryInterceptor && _this18.featureSetQueryInterceptor.preLayerQueryCallback({
        layer: _this18._layer,
        query: i,
        method: "execute"
      });
      const r = yield (0,_rest_query_executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_33__.executeQueryJSON)(_this18._layer.parsedUrl.path, i);
      return 1 === r.features.length ? r.features[0] : null;
    })();
  }
  getIdentityUser() {
    var _this19 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this19.load();
      const e = _kernel_js__WEBPACK_IMPORTED_MODULE_2__.id?.findCredential(_this19._layer.url);
      return e ? e.userId : null;
    })();
  }
  getOwningSystemUrl() {
    var _this20 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this20.load();
      const e = _kernel_js__WEBPACK_IMPORTED_MODULE_2__.id?.findServerInfo(_this20._layer.url);
      if (e) return e.owningSystemUrl;
      let r = _this20._layer.url;
      const s = r.toLowerCase().indexOf("/rest/services");
      if (r = s > -1 ? r.substring(0, s) : r, r) {
        r += "/rest/info";
        try {
          const e = yield (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(r, {
            query: {
              f: "json"
            }
          });
          let t = "";
          return e.data?.owningSystemUrl && (t = e.data.owningSystemUrl), t;
        } catch (a) {
          return "";
        }
      }
      return "";
    })();
  }
  getDataSourceFeatureSet() {
    const e = new T({
      layer: this._layer,
      spatialReference: this.spatialReference ?? void 0,
      outFields: this._overrideFields ?? void 0,
      includeGeometry: !this._removeGeometry,
      lrucache: this.recentlyUsedQueries ?? void 0,
      interceptor: this.featureSetQueryInterceptor ?? void 0
    });
    return e._useDefinitionExpression = !1, e;
  }
  get preferredTimeZone() {
    return this._layer.preferredTimeZone ?? null;
  }
  get dateFieldsTimeZone() {
    return this._layer.dateFieldsTimeZone ?? null;
  }
  get datesInUnknownTimezone() {
    return this._layer.datesInUnknownTimezone;
  }
  get editFieldsInfo() {
    return this._layer.editFieldsInfo ?? null;
  }
  get timeInfo() {
    return this._layer.timeInfo ?? null;
  }
  getFeatureSetInfo() {
    var _this21 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (_this21.fsetInfo) return _this21.fsetInfo;
      let e = null,
        {
          parsedUrl: {
            path: t
          },
          serviceItemId: r = null
        } = _this21._layer;
      if (t) {
        const s = yield (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(t, {
          responseType: "json",
          query: {
            f: "json"
          }
        });
        e = s?.data?.name ?? null, r = s?.data?.serviceItemId ?? null;
      }
      const s = _this21._layer.title && null !== (_this21._layer.parent ?? null);
      return _this21.featureSetInfo = {
        layerId: _this21._layer.layerId,
        layerName: "" === e ? null : e,
        itemId: "" === r ? null : r,
        serviceLayerUrl: "" === t ? null : t,
        webMapLayerId: s ? _this21._layer.id ?? null : null,
        webMapLayerTitle: s ? _this21._layer.title ?? null : null,
        className: null,
        objectClassId: null
      }, _this21.fsetInfo;
    })();
  }
}


/***/ }),

/***/ 3870:
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ 26763);
/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/errorsupport.js */ 23373);
/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/FeatureSet.js */ 7014);
/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/IdSet.js */ 85708);
/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/shared.js */ 84940);
/* harmony import */ var _support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/sqlUtils.js */ 48697);
/* harmony import */ var _geometry_Geometry_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../geometry/Geometry.js */ 70535);
/* harmony import */ var _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../layers/FeatureLayer.js */ 88749);
/* harmony import */ var _layers_SubtypeGroupLayer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../layers/SubtypeGroupLayer.js */ 62503);
/* harmony import */ var _layers_support_FeatureType_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../layers/support/FeatureType.js */ 88419);
/* harmony import */ var _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../layers/support/Field.js */ 23973);
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../rest/support/Query.js */ 28665);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/












class f extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__["default"] {
  constructor(e) {
    super(e), this.declaredClass = "esri.arcade.featureset.sources.FeatureLayerMemory", this._removeGeometry = !1, this._overrideFields = null, this._forceIsTable = !1, e.spatialReference && (this.spatialReference = e.spatialReference), this._transparent = !0, this._maxProcessing = 1e3, this._layer = e.layer, this._wset = null, !0 === e.isTable && (this._forceIsTable = !0), void 0 !== e.outFields && (this._overrideFields = e.outFields), void 0 !== e.includeGeometry && (this._removeGeometry = !1 === e.includeGeometry);
  }
  _maxQueryRate() {
    return _support_shared_js__WEBPACK_IMPORTED_MODULE_5__.defaultMaxRecords;
  }
  end() {
    return this._layer;
  }
  optimisePagingFeatureQueries() {}
  loadImpl() {
    var _this = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return !0 === _this._layer.loaded ? (_this._initialiseFeatureSet(), _this) : (yield _this._layer.load(), _this._initialiseFeatureSet(), _this);
    })();
  }
  get gdbVersion() {
    return "";
  }
  _initialiseFeatureSet() {
    if (null == this.spatialReference && (this.spatialReference = this._layer.spatialReference), this.geometryType = this._layer.geometryType, this.fields = this._layer.fields.slice(0), null !== this._overrideFields) if (1 === this._overrideFields.length && "*" === this._overrideFields[0]) this._overrideFields = null;else {
      const e = [],
        t = [];
      for (const r of this.fields) if ("oid" === r.type) e.push(r), t.push(r.name);else for (const s of this._overrideFields) if (s.toLowerCase() === r.name.toLowerCase()) {
        e.push(r), t.push(r.name);
        break;
      }
      this.fields = e, this._overrideFields = t;
    }
    this.objectIdField = this._layer.objectIdField;
    for (const e of this.fields) "global-id" === e.type && (this.globalIdField = e.name);
    this._databaseType = _support_shared_js__WEBPACK_IMPORTED_MODULE_5__.FeatureServiceDatabaseType.Standardised, this.hasZ = !0 === this._layer?.capabilities?.data?.supportsZ, this.hasM = !0 === this._layer?.capabilities?.data?.supportsM, this._layer instanceof _layers_SubtypeGroupLayer_js__WEBPACK_IMPORTED_MODULE_9__["default"] ? (this.typeIdField = this._layer.subtypeField ?? "", this.types = this._layer.subtypes) : (this.typeIdField = this._layer.typeIdField ?? "", this.types = this._layer.types);
  }
  isTable() {
    return this._forceIsTable || this._layer.isTable || "table" === this._layer.type || !this._layer.geometryType;
  }
  _isInFeatureSet() {
    return _support_shared_js__WEBPACK_IMPORTED_MODULE_5__.IdState.InFeatureSet;
  }
  _candidateIdTransform(e) {
    return e;
  }
  _getSet(e) {
    var _this2 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this2._wset) {
        yield _this2._ensureLoaded();
        const t = yield _this2._getFilteredSet("", null, null, null, e);
        return _this2._wset = t, t;
      }
      return _this2._wset;
    })();
  }
  _changeFeature(t) {
    const r = {};
    for (const e of this.fields) r[e.name] = t.attributes[e.name];
    return new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
      geometry: !0 === this._removeGeometry ? null : t.geometry,
      attributes: r
    });
  }
  _getFilteredSet(e, t, r, s, a) {
    var _this3 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let n = "",
        u = !1;
      if (null !== s && (n = s.constructClause(), u = !0), _this3.isTable() && t && null !== e && "" !== e) {
        return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"]([], [], !0, null);
      }
      const h = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_12__["default"]();
      h.returnZ = _this3.hasZ, h.returnM = _this3.hasM, h.where = null === r ? null === t ? "1=1" : "" : (0,_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_6__.toWhereClause)(r, _support_shared_js__WEBPACK_IMPORTED_MODULE_5__.FeatureServiceDatabaseType.Standardised), h.spatialRelationship = _this3._makeRelationshipEnum(e), h.outSpatialReference = _this3.spatialReference, h.orderByFields = "" !== n ? n.split(",") : null, h.geometry = null === t ? null : t, h.returnGeometry = !0, h.relationParameter = _this3._makeRelationshipParam(e);
      const y = yield _this3._layer.queryFeatures(h);
      if (null === y) return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"]([], [], u, null);
      _this3._checkCancelled(a);
      const c = [];
      y.features.forEach(e => {
        const t = e.attributes[_this3._layer.objectIdField];
        c.push(t), _this3._featureCache[t] = _this3._changeFeature(e);
      });
      return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"]([], c, u, null);
    })();
  }
  _makeRelationshipEnum(e) {
    if (e.includes("esriSpatialRelRelation")) return "relation";
    switch (e) {
      case "esriSpatialRelRelation":
        return "relation";
      case "esriSpatialRelIntersects":
        return "intersects";
      case "esriSpatialRelContains":
        return "contains";
      case "esriSpatialRelOverlaps":
        return "overlaps";
      case "esriSpatialRelWithin":
        return "within";
      case "esriSpatialRelTouches":
        return "touches";
      case "esriSpatialRelCrosses":
        return "crosses";
      case "esriSpatialRelEnvelopeIntersects":
        return "envelope-intersects";
    }
    return e;
  }
  _makeRelationshipParam(e) {
    return e.includes("esriSpatialRelRelation") ? e.split(":")[1] : "";
  }
  _queryAllFeatures() {
    var _this4 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (_this4._wset) return _this4._wset;
      const e = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_12__["default"]();
      if (e.where = "1=1", yield _this4._ensureLoaded(), _this4._layer.source && _this4._layer.source.items) {
        const e = [];
        return _this4._layer.source.items.forEach(t => {
          const r = t.attributes[_this4._layer.objectIdField];
          e.push(r), _this4._featureCache[r] = _this4._changeFeature(t);
        }), _this4._wset = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"]([], e, !1, null), _this4._wset;
      }
      e.returnZ = _this4.hasZ, e.returnM = _this4.hasM;
      const t = yield _this4._layer.queryFeatures(e),
        r = [];
      return t.features.forEach(e => {
        const t = e.attributes[_this4._layer.objectIdField];
        r.push(t), _this4._featureCache[t] = _this4._changeFeature(e);
      }), _this4._wset = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"]([], r, !1, null), _this4._wset;
    })();
  }
  _getFeatures(e, s, i) {
    var _this5 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const a = [];
      -1 !== s && void 0 === _this5._featureCache[s] && a.push(s);
      for (let t = e._lastFetchedIndex; t < e._known.length && (e._lastFetchedIndex += 1, !(void 0 === _this5._featureCache[e._known[t]] && (e._known[t] !== s && a.push(e._known[t]), a.length > i))); t++);
      if (0 === a.length) return "success";
      throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_2__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_2__.FeatureSetErrorCodes.MissingFeatures);
    })();
  }
  _refineSetBlock(e) {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return e;
    })();
  }
  _stat() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return {
        calculated: !1
      };
    })();
  }
  _canDoAggregates() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return !1;
    })();
  }
  relationshipMetaData() {
    return [];
  }
  static _cloneAttr(e) {
    const t = {};
    for (const r in e) t[r] = e[r];
    return t;
  }
  nativeCapabilities() {
    return {
      title: this._layer.title ?? "",
      canQueryRelated: !1,
      source: this,
      capabilities: this._layer.capabilities,
      databaseType: this._databaseType,
      requestStandardised: !0
    };
  }
  static create(e, t) {
    let r = e.layerDefinition.objectIdField;
    const s = e.layerDefinition.typeIdField ?? "",
      i = [];
    if (e.layerDefinition.types) for (const u of e.layerDefinition.types) i.push(_layers_support_FeatureType_js__WEBPACK_IMPORTED_MODULE_10__["default"].fromJSON(u));
    let a = e.layerDefinition.geometryType;
    void 0 === a && (a = e.featureSet.geometryType || "");
    let l = e.featureSet.features;
    const n = t.toJSON();
    if (!r) {
      let t = !1;
      for (const s of e.layerDefinition.fields) if ("oid" === s.type || "esriFieldTypeOID" === s.type) {
        r = s.name, t = !0;
        break;
      }
      if (!1 === t) {
        let t = "FID",
          s = !0,
          i = 0;
        for (; s;) {
          let r = !0;
          for (const s of e.layerDefinition.fields) if (s.name === t) {
            r = !1;
            break;
          }
          !0 === r ? s = !1 : (i++, t = "FID" + i.toString());
        }
        e.layerDefinition.fields.push({
          type: "esriFieldTypeOID",
          name: t,
          alias: t
        });
        const a = [];
        for (let r = 0; r < l.length; r++) a.push({
          geometry: e.featureSet.features[r].geometry,
          attributes: e.featureSet.features[r].attributes ? this._cloneAttr(e.featureSet.features[r].attributes) : {}
        }), a[r].attributes[t] = r;
        l = a, r = t;
      }
    }
    const o = [];
    for (const u of e.layerDefinition.fields) u instanceof _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_11__["default"] ? o.push(u) : o.push(_layers_support_Field_js__WEBPACK_IMPORTED_MODULE_11__["default"].fromJSON(u));
    let y = a;
    switch (y || (y = ""), y) {
      case "esriGeometryPoint":
        y = "point";
        break;
      case "esriGeometryPolyline":
        y = "polyline";
        break;
      case "esriGeometryPolygon":
        y = "polygon";
        break;
      case "esriGeometryEnvelope":
        y = "extent";
        break;
      case "esriGeometryMultipoint":
        y = "multipoint";
        break;
      case "":
      case "esriGeometryNull":
        y = "esriGeometryNull";
    }
    if ("esriGeometryNull" !== y) for (const h of l) h.geometry && h.geometry instanceof _geometry_Geometry_js__WEBPACK_IMPORTED_MODULE_7__["default"] == !1 && (h.geometry.type = y, void 0 === h.geometry.spatialReference && (h.geometry.spatialReference = n));else for (const u of l) u.geometry && (u.geometry = null);
    const p = {
        outFields: ["*"],
        source: l,
        fields: o,
        hasZ: !0 === e?.layerDefinition?.hasZ || !0 === e?.featureSet?.hasZ,
        hasM: !0 === e?.layerDefinition?.hasM || !0 === e?.featureSet?.hasM,
        types: i,
        typeIdField: s,
        objectIdField: r,
        spatialReference: t
      },
      m = "esriGeometryNull" === y || null === y;
    m || (p.geometryType = y);
    const _ = new _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_8__["default"](p);
    return new f({
      layer: _,
      spatialReference: t,
      isTable: m
    });
  }
  queryAttachments() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return [];
    })();
  }
  getFeatureByObjectId(e) {
    var _this6 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const t = new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_12__["default"]();
      t.where = _this6.objectIdField + "=" + e.toString(), t.returnZ = _this6.hasZ, t.returnM = _this6.hasM;
      const r = yield _this6._layer.queryFeatures(t);
      return 1 === r.features.length ? r.features[0] : null;
    })();
  }
  getOwningSystemUrl() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return "";
    })();
  }
  getIdentityUser() {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return "";
    })();
  }
  get preferredTimeZone() {
    return this._layer.preferredTimeZone ?? null;
  }
  get dateFieldsTimeZone() {
    return this._layer.dateFieldsTimeZone ?? null;
  }
  get datesInUnknownTimezone() {
    return this._layer?.datesInUnknownTimezone;
  }
  get editFieldsInfo() {
    return this._layer?.editFieldsInfo;
  }
  get timeInfo() {
    return this._layer?.timeInfo;
  }
  getFeatureSetInfo() {
    var _this7 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const e = _this7._layer.title && _this7._layer.parent;
      return _this7.fsetInfo ?? {
        layerId: null,
        layerName: null,
        itemId: null,
        serviceLayerUrl: null,
        webMapLayerId: e ? _this7._layer.id ?? null : null,
        webMapLayerTitle: e ? _this7._layer.title ?? null : null,
        className: null,
        objectClassId: null
      };
    })();
  }
}


/***/ }),

/***/ 69684:
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerRelated.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ 26763);
/* harmony import */ var _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/errorsupport.js */ 23373);
/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/FeatureSet.js */ 7014);
/* harmony import */ var _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/IdSet.js */ 85708);
/* harmony import */ var _support_shared_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/shared.js */ 84940);
/* harmony import */ var _rest_support_RelationshipQuery_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../rest/support/RelationshipQuery.js */ 76356);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/






class d extends _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_3__["default"] {
  constructor(e) {
    super(e), this.declaredClass = "esri.arcade.featureset.sources.FeatureLayerRelated", this._findObjectId = -1, this._requestStandardised = !1, this._removeGeometry = !1, this._overrideFields = null, this.featureObjectId = null, e.spatialReference && (this.spatialReference = e.spatialReference), this._transparent = !0, this._maxProcessing = 1e3, this._layer = e.layer, this._wset = null, this._findObjectId = e.objectId, this.featureObjectId = e.objectId, this.relationship = e.relationship, this._relatedLayer = e.relatedLayer, void 0 !== e.outFields && (this._overrideFields = e.outFields), void 0 !== e.includeGeometry && (this._removeGeometry = !1 === e.includeGeometry);
  }
  _maxQueryRate() {
    return _support_shared_js__WEBPACK_IMPORTED_MODULE_5__.defaultMaxRecords;
  }
  end() {
    return this._layer;
  }
  optimisePagingFeatureQueries() {}
  loadImpl() {
    var _this = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return yield Promise.all([_this._layer.load(), _this._relatedLayer?.load()]), _this._initialiseFeatureSet(), _this;
    })();
  }
  nativeCapabilities() {
    return this._relatedLayer.nativeCapabilities();
  }
  _initialiseFeatureSet() {
    if (null == this.spatialReference && (this.spatialReference = this._layer.spatialReference), this.geometryType = this._relatedLayer.geometryType, this.fields = this._relatedLayer.fields.slice(0), this.hasZ = this._relatedLayer.hasZ, this.hasM = this._relatedLayer.hasM, null !== this._overrideFields) if (1 === this._overrideFields.length && "*" === this._overrideFields[0]) this._overrideFields = null;else {
      const e = [],
        t = [];
      for (const r of this.fields) if ("oid" === r.type) e.push(r), t.push(r.name);else for (const i of this._overrideFields) if (i.toLowerCase() === r.name.toLowerCase()) {
        e.push(r), t.push(r.name);
        break;
      }
      this.fields = e, this._overrideFields = t;
    }
    const e = this._layer.nativeCapabilities();
    e && (this._databaseType = e.databaseType, this._requestStandardised = e.requestStandardised), this.objectIdField = this._relatedLayer.objectIdField, this.globalIdField = this._relatedLayer.globalIdField, this.hasM = this._relatedLayer.supportsM, this.hasZ = this._relatedLayer.supportsZ, this.typeIdField = this._relatedLayer.typeIdField, this.types = this._relatedLayer.types;
  }
  databaseType() {
    var _this2 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return yield _this2._relatedLayer.databaseType(), _this2._databaseType = _this2._relatedLayer._databaseType, _this2._databaseType;
    })();
  }
  isTable() {
    return this._relatedLayer.isTable();
  }
  _isInFeatureSet() {
    return _support_shared_js__WEBPACK_IMPORTED_MODULE_5__.IdState.InFeatureSet;
  }
  _candidateIdTransform(e) {
    return e;
  }
  _getSet(e) {
    var _this3 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (null === _this3._wset) {
        yield _this3._ensureLoaded();
        const t = yield _this3._getFilteredSet("", null, null, null, e);
        return _this3._wset = t, t;
      }
      return _this3._wset;
    })();
  }
  _changeFeature(t) {
    const r = {};
    for (const e of this.fields) r[e.name] = t.attributes[e.name];
    return new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
      geometry: !0 === this._removeGeometry ? null : t.geometry,
      attributes: r
    });
  }
  _getFilteredSet(e, t, r, i, a) {
    var _this4 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (yield _this4.databaseType(), _this4.isTable() && t && null !== e && "" !== e) {
        return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"]([], [], !0, null);
      }
      const n = _this4._layer.nativeCapabilities();
      if (!1 === n.canQueryRelated) {
        return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"]([], [], !0, null);
      }
      if (n.capabilities?.queryRelated && n.capabilities.queryRelated.supportsPagination) return _this4._getFilteredSetUsingPaging(e, t, r, i, a);
      let d = "",
        o = !1;
      null !== i && n.capabilities?.queryRelated && !0 === n.capabilities.queryRelated.supportsOrderBy && (d = i.constructClause(), o = !0);
      const u = new _rest_support_RelationshipQuery_js__WEBPACK_IMPORTED_MODULE_6__["default"]();
      u.objectIds = [_this4._findObjectId];
      const h = null !== _this4._overrideFields ? _this4._overrideFields : _this4._fieldsIncludingObjectId(_this4._relatedLayer.fields ? _this4._relatedLayer.fields.map(e => e.name) : ["*"]);
      u.outFields = h, u.relationshipId = _this4.relationship.id, u.where = "1=1";
      let c = !0;
      !0 === _this4._removeGeometry && (c = !1), u.returnGeometry = c, _this4._requestStandardised && (u.sqlFormat = "standard"), u.outSpatialReference = _this4.spatialReference, u.orderByFields = "" !== d ? d.split(",") : null;
      const y = yield n.source.queryRelatedFeatures(u);
      _this4._checkCancelled(a);
      const p = y[_this4._findObjectId] ? y[_this4._findObjectId].features : [],
        _ = [];
      for (let s = 0; s < p.length; s++) _this4._featureCache[p[s].attributes[_this4._relatedLayer.objectIdField]] = p[s], _.push(p[s].attributes[_this4._relatedLayer.objectIdField]);
      const f = t && null !== e && "" !== e,
        g = null != r;
      return new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"](f || g ? _ : [], f || g ? [] : _, o, null);
    })();
  }
  _fieldsIncludingObjectId(e) {
    if (null === e) return [this.objectIdField];
    const t = e.slice(0);
    if (t.includes("*")) return t;
    let r = !1;
    for (const i of t) if (i.toUpperCase() === this.objectIdField.toUpperCase()) {
      r = !0;
      break;
    }
    return !1 === r && t.push(this.objectIdField), t;
  }
  _getFilteredSetUsingPaging(e, t, r, i, a) {
    var _this5 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let n = "",
        l = !1;
      const d = _this5._layer.nativeCapabilities();
      null !== i && d?.capabilities?.queryRelated && !0 === d.capabilities.queryRelated.supportsOrderBy && (n = i.constructClause(), l = !0), yield _this5.databaseType();
      const o = "1=1";
      let u = _this5._maxQueryRate();
      const h = d.capabilities?.query.maxRecordCount;
      null != h && h < u && (u = h);
      const c = t && null !== e && "" !== e,
        y = null != r;
      let p = null,
        _ = !0;
      !0 === _this5._removeGeometry && (_ = !1);
      const f = null !== _this5._overrideFields ? _this5._overrideFields : _this5._fieldsIncludingObjectId(_this5._relatedLayer.fields ? _this5._relatedLayer.fields.map(e => e.name) : ["*"]);
      return p = new _support_IdSet_js__WEBPACK_IMPORTED_MODULE_4__["default"](c || y ? ["GETPAGES"] : [], c || y ? [] : ["GETPAGES"], l, {
        outFields: f.join(","),
        resultRecordCount: u,
        resultOffset: 0,
        objectIds: [_this5._findObjectId],
        where: o,
        orderByFields: n,
        returnGeometry: _,
        returnIdsOnly: "false",
        internal: {
          set: [],
          lastRetrieved: 0,
          lastPage: 0,
          fullyResolved: !1
        }
      }), yield _this5._expandPagedSet(p, u, 0, 0, a), p;
    })();
  }
  _expandPagedSet(e, t, r, i, s) {
    return this._expandPagedSetFeatureSet(e, t, r, i, s);
  }
  _clonePageDefinition(e) {
    return null === e ? null : !0 !== e.groupbypage ? {
      groupbypage: !1,
      outFields: e.outFields,
      resultRecordCount: e.resultRecordCount,
      resultOffset: e.resultOffset,
      where: e.where,
      objectIds: e.objectIds,
      orderByFields: e.orderByFields,
      returnGeometry: e.returnGeometry,
      returnIdsOnly: e.returnIdsOnly,
      internal: e.internal
    } : {
      groupbypage: !0,
      outFields: e.outFields,
      resultRecordCount: e.resultRecordCount,
      useOIDpagination: e.useOIDpagination,
      generatedOid: e.generatedOid,
      groupByFieldsForStatistics: e.groupByFieldsForStatistics,
      resultOffset: e.resultOffset,
      outStatistics: e.outStatistics,
      geometry: e.geometry,
      where: e.where,
      objectIds: e.objectIds,
      orderByFields: e.orderByFields,
      returnGeometry: e.returnGeometry,
      returnIdsOnly: e.returnIdsOnly,
      internal: e.internal
    };
  }
  _getPhysicalPage(e, t, r) {
    var _this6 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const i = e.pagesDefinition.internal.lastRetrieved,
        s = i,
        a = e.pagesDefinition.internal.lastPage,
        n = _this6._layer.nativeCapabilities(),
        d = new _rest_support_RelationshipQuery_js__WEBPACK_IMPORTED_MODULE_6__["default"]();
      !0 === _this6._requestStandardised && (d.sqlFormat = "standard"), d.relationshipId = _this6.relationship.id, d.objectIds = e.pagesDefinition.objectIds, d.resultOffset = e.pagesDefinition.internal.lastPage, d.resultRecordCount = e.pagesDefinition.resultRecordCount, d.outFields = e.pagesDefinition.outFields.split(","), d.where = e.pagesDefinition.where, d.orderByFields = "" !== e.pagesDefinition.orderByFields ? e.pagesDefinition.orderByFields.split(",") : null, d.returnGeometry = e.pagesDefinition.returnGeometry, d.outSpatialReference = _this6.spatialReference;
      const o = yield n.source.queryRelatedFeatures(d);
      if (_this6._checkCancelled(r), e.pagesDefinition.internal.lastPage !== a) return 0;
      const u = o[_this6._findObjectId] ? o[_this6._findObjectId].features : [];
      for (let l = 0; l < u.length; l++) e.pagesDefinition.internal.set[s + l] = u[l].attributes[_this6._relatedLayer.objectIdField];
      for (let l = 0; l < u.length; l++) _this6._featureCache[u[l].attributes[_this6._relatedLayer.objectIdField]] = u[l];
      const h = !o[_this6._findObjectId] || !1 === o[_this6._findObjectId].exceededTransferLimit;
      return u.length !== e.pagesDefinition.resultRecordCount && h && (e.pagesDefinition.internal.fullyResolved = !0), e.pagesDefinition.internal.lastRetrieved = i + u.length, e.pagesDefinition.internal.lastPage += e.pagesDefinition.resultRecordCount, u.length;
    })();
  }
  _getFeatures(e, i, s, a) {
    var _this7 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const n = [];
      -1 !== i && void 0 === _this7._featureCache[i] && n.push(i);
      const l = _this7._maxQueryRate();
      if (!0 === _this7._checkIfNeedToExpandKnownPage(e, l)) return yield _this7._expandPagedSet(e, l, 0, 0, a), _this7._getFeatures(e, i, s, a);
      let d = 0;
      for (let t = e._lastFetchedIndex; t < e._known.length && (d++, d <= s && (e._lastFetchedIndex += 1), !("GETPAGES" !== e._known[t] && void 0 === _this7._featureCache[e._known[t]] && (e._known[t] !== i && n.push(e._known[t]), n.length > s))) && !(d >= s && 0 === n.length); t++);
      if (0 === n.length) return "success";
      throw new _support_errorsupport_js__WEBPACK_IMPORTED_MODULE_2__.FeatureSetError(_support_errorsupport_js__WEBPACK_IMPORTED_MODULE_2__.FeatureSetErrorCodes.MissingFeatures);
    })();
  }
  _refineSetBlock(e, t, r) {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return e;
    })();
  }
  _stat(e, t, r, i, s, a, n) {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return {
        calculated: !1
      };
    })();
  }
  get gdbVersion() {
    return this._relatedLayer.gdbVersion;
  }
  _canDoAggregates(e, t, r, i, s) {
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return !1;
    })();
  }
  relationshipMetaData() {
    return this._relatedLayer.relationshipMetaData();
  }
  serviceUrl() {
    return this._relatedLayer.serviceUrl();
  }
  queryAttachments(e, t, r, i, s) {
    return this._relatedLayer.queryAttachments(e, t, r, i, s);
  }
  getFeatureByObjectId(e, t) {
    return this._relatedLayer.getFeatureByObjectId(e, t);
  }
  getOwningSystemUrl() {
    return this._relatedLayer.getOwningSystemUrl();
  }
  getIdentityUser() {
    return this._relatedLayer.getIdentityUser();
  }
  getDataSourceFeatureSet() {
    return this._relatedLayer;
  }
  get preferredTimeZone() {
    return this._relatedLayer?.preferredTimeZone ?? null;
  }
  get dateFieldsTimeZone() {
    return this._relatedLayer?.dateFieldsTimeZone ?? null;
  }
  get datesInUnknownTimezone() {
    return this._relatedLayer?.datesInUnknownTimezone;
  }
  get editFieldsInfo() {
    return this._relatedLayer?.editFieldsInfo ?? null;
  }
  get timeInfo() {
    return this._relatedLayer?.timeInfo ?? null;
  }
  getFeatureSetInfo() {
    var _this8 = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this8.fsetInfo ?? _this8._layer.featureSetInfo;
    })();
  }
}


/***/ }),

/***/ 84263:
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t, e) {
  return t === e ? 0 : null === t ? -1 : null === e ? 1 : t < e ? -1 : 1;
}
class e {
  constructor(t) {
    const e = t.split(",");
    this._fields = [], this._directions = [];
    for (let s = 0; s < e.length; s++) {
      const t = e[s].match(/\S+/g);
      this._fields.push(t[0]), 2 === t.length ? "asc" === t[1].toLowerCase() ? this._directions.push(1) : this._directions.push(0) : this._directions.push(1);
    }
  }
  constructClause() {
    let t = "";
    for (let e = 0; e < this._fields.length; e++) 0 !== e && (t += ","), t += this._fields[e], 1 === this._directions[e] ? t += " ASC" : t += " DESC";
    return t;
  }
  order(e) {
    e.sort((e, s) => {
      for (let i = 0; i < this._fields.length; i++) {
        const r = this.featureValue(e.feature, this._fields[i], i),
          l = this.featureValue(s.feature, this._fields[i], i);
        let o = 0;
        if (o = 1 === this._directions[i] ? t(r, l) : -1 * t(r, l), 0 !== o) return o;
      }
      return 0;
    });
  }
  scanForField(t) {
    for (let e = 0; e < this._fields.length; e++) if (this._fields[e].toLowerCase().trim() === t.toLowerCase().trim()) return !0;
    return !1;
  }
  replaceFields(t) {
    let s = "";
    for (let e = 0; e < this._fields.length; e++) {
      0 !== e && (s += ",");
      let i = this._fields[e];
      for (const e of t) if (i.toLowerCase() === e.field.toLowerCase()) {
        i = e.newfield;
        break;
      }
      s += i, 1 === this._directions[e] ? s += " ASC" : s += " DESC";
    }
    return new e(s);
  }
  featureValue(t, e, s) {
    const i = t.attributes[e];
    if (void 0 !== i) return i;
    for (const r in t.attributes) if (e.toLowerCase() === r.toLowerCase()) return this._fields[s] = r, t.attributes[r];
    return null;
  }
}


/***/ }),

/***/ 1940:
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/featureset/support/StatsField.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errorsupport.js */ 23373);
/* harmony import */ var _shared_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shared.js */ 84940);
/* harmony import */ var _sqlUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sqlUtils.js */ 48697);
/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/sql/WhereClause.js */ 63981);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/




function s(s) {
  if ("function" === s.parseTree.type) {
    if (0 === s.parseTree.args.value.length) return {
      name: s.parseTree.name,
      expr: null
    };
    if (s.parseTree.args.value.length > 1) throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.MissingStatisticParameters);
    const a = _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create((0,_sqlUtils_js__WEBPACK_IMPORTED_MODULE_2__.toWhereClauseFromTree)(s.parseTree.args.value[0], _shared_js__WEBPACK_IMPORTED_MODULE_1__.FeatureServiceDatabaseType.Standardised, s.parameters), s.fieldsIndex, s.timeZone);
    return {
      name: s.parseTree.name,
      expr: a
    };
  }
  return null;
}
class a {
  constructor() {
    this.field = "", this.tofieldname = "", this.typeofstat = "MIN", this.workingexpr = null;
  }
  clone() {
    const e = new a();
    return e.field = this.field, e.tofieldname = this.tofieldname, e.typeofstat = this.typeofstat, e.workingexpr = this.workingexpr, e;
  }
  static parseStatField(r, n, o, l) {
    const p = new a();
    p.field = r;
    const f = _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_3__.WhereClause.create(n, o, l),
      u = s(f);
    if (null === u) throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.UnsupportedSqlFunction, {
      function: ""
    });
    const c = u.name.toUpperCase().trim();
    if ("MIN" === c) {
      if (p.typeofstat = "MIN", p.workingexpr = u.expr, null === f) throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters, {
        function: "min"
      });
    } else if ("MAX" === c) {
      if (p.typeofstat = "MAX", p.workingexpr = u.expr, null === f) throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters, {
        function: "max"
      });
    } else if ("COUNT" === c) p.typeofstat = "COUNT", p.workingexpr = u.expr;else if ("STDEV" === c) {
      if (p.typeofstat = "STDDEV", p.workingexpr = u.expr, null === f) throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters, {
        function: "stdev"
      });
    } else if ("SUM" === c) {
      if (p.typeofstat = "SUM", p.workingexpr = u.expr, null === f) throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters, {
        function: "sum"
      });
    } else if ("MEAN" === c) {
      if (p.typeofstat = "AVG", p.workingexpr = u.expr, null === f) throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters, {
        function: c
      });
    } else if ("AVG" === c) {
      if (p.typeofstat = "AVG", p.workingexpr = u.expr, null === f) throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters, {
        function: "avg"
      });
    } else {
      if ("VAR" !== c) throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.UnsupportedSqlFunction, {
        function: c
      });
      if (p.typeofstat = "VAR", p.workingexpr = u.expr, null === f) throw new _errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlError(_errorsupport_js__WEBPACK_IMPORTED_MODULE_0__.SqlErrorCodes.InvalidFunctionParameters, {
        function: "var"
      });
    }
    return p;
  }
  toStatisticsName() {
    switch (this.typeofstat.toUpperCase()) {
      case "MIN":
        return "min";
      case "MAX":
        return "max";
      case "SUM":
        return "sum";
      case "COUNT":
      default:
        return "count";
      case "VAR":
        return "var";
      case "STDDEV":
        return "stddev";
      case "AVG":
        return "avg";
    }
  }
}


/***/ }),

/***/ 22683:
/*!**************************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/query/executeQuery.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "executeQuery": () => (/* binding */ f),
/* harmony export */   "executeRawQuery": () => (/* binding */ c),
/* harmony export */   "normalizeFields": () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ 32995);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/has.js */ 67087);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/promiseUtils.js */ 30801);
/* harmony import */ var _layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../layers/support/infoFor3D.js */ 11895);
/* harmony import */ var _layers_support_source_DataLayerSource_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../layers/support/source/DataLayerSource.js */ 66842);
/* harmony import */ var _executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./executeQueryJSON.js */ 60355);
/* harmony import */ var _executeQueryPBF_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./executeQueryPBF.js */ 82915);
/* harmony import */ var _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../support/FeatureSet.js */ 87096);
/* harmony import */ var _support_Query_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../support/Query.js */ 28665);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/









function f(_x, _x2, _x3, _x4) {
  return _f.apply(this, arguments);
}
function _f() {
  _f = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (t, o, r, e) {
    return m(o, yield c(t, o, r, e), r, e);
  });
  return _f.apply(this, arguments);
}
function c(_x5, _x6, _x7, _x8) {
  return _c.apply(this, arguments);
}
function _c() {
  _c = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (t, o, r, e) {
    const n = {
        ...e
      },
      i = p(o, r),
      u = null != o.outStatistics?.[0],
      f = (0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("featurelayer-pbf-statistics"),
      c = !u || f;
    let m;
    if ("pbf" === r?.format && c) try {
      m = yield (0,_executeQueryPBF_js__WEBPACK_IMPORTED_MODULE_7__.executeRawQueryPBF)(t, i, n);
    } catch (d) {
      if ("query:parsing-pbf" !== d.name) throw d;
      r.format = "json";
    }
    return "json" !== r?.format && c || (m = yield (0,_executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_6__.executeRawQueryJSON)(t, i, n)), l(r?.fieldsIndex, m.fields), m;
  });
  return _c.apply(this, arguments);
}
function l(t, o) {
  if (null != t && null != o) for (const r of o) {
    const o = t.get(r.name);
    o && Object.assign(r, o.toJSON());
  }
}
function m(_x9, _x10, _x11, _x12) {
  return _m.apply(this, arguments);
}
function _m() {
  _m = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (t, r, e, n) {
    const s = e?.infoFor3D;
    if (!d(t, s) || null == s || !r.assetMaps || !r.features?.length) return _support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_8__["default"].fromJSON(r);
    const {
      meshFeatureSetFromJSON: a
    } = yield (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.whenOrAbort)(Promise.all(/*! import() */[__webpack_require__.e("default-node_modules_arcgis_core_chunks_earcut_js"), __webpack_require__.e("default-node_modules_arcgis_core_geometry_support_buffer_BufferView_js"), __webpack_require__.e("default-node_modules_arcgis_core_chunks_quat_js-node_modules_arcgis_core_views_3d_webgl-engin-702758"), __webpack_require__.e("default-node_modules_arcgis_core_geometry_support_meshUtils_georeference_js"), __webpack_require__.e("default-node_modules_arcgis_core_chunks_vec32_js-node_modules_arcgis_core_geometry_projection-f1c31e"), __webpack_require__.e("default-node_modules_arcgis_core_geometry_Mesh_js-node_modules_arcgis_core_geometry_support_D-dfb100"), __webpack_require__.e("node_modules_arcgis_core_rest_support_meshFeatureSet_js")]).then(__webpack_require__.bind(__webpack_require__, /*! ../support/meshFeatureSet.js */ 21831)), n);
    return a(t, s, r);
  });
  return _m.apply(this, arguments);
}
function p(o, s) {
  let a = _support_Query_js__WEBPACK_IMPORTED_MODULE_9__["default"].from(o);
  a.sourceSpatialReference = a.sourceSpatialReference ?? s?.sourceSpatialReference ?? null, (s?.gdbVersion || s?.dynamicDataSource) && (a = a === o ? a.clone() : a, a.gdbVersion = o.gdbVersion || s.gdbVersion, a.dynamicDataSource = o.dynamicDataSource ? _layers_support_source_DataLayerSource_js__WEBPACK_IMPORTED_MODULE_5__.DataLayerSource.from(o.dynamicDataSource) : s.dynamicDataSource);
  const i = s?.infoFor3D;
  if (null != i && d(o, i)) {
    a = a === o ? a.clone() : a, a.formatOf3DObjects = null;
    const {
        supportedFormats: n,
        queryFormats: s
      } = i,
      u = (0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_4__.getMimeTypeFormatId)("model/gltf-binary", n) ?? (0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_4__.getFilenameFormatId)("glb", n),
      f = (0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_4__.getMimeTypeFormatId)("model/gltf+json", n) ?? (0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_4__.getFilenameFormatId)("gtlf", n);
    for (const t of s) {
      if (t === u) {
        a.formatOf3DObjects = t;
        break;
      }
      t !== f || a.formatOf3DObjects || (a.formatOf3DObjects = t);
    }
    if (!a.formatOf3DObjects) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("query:unsupported-3d-query-formats", "Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");
    if (null == a.outFields || !a.outFields.includes("*")) {
      a = a === o ? a.clone() : a, null == a.outFields && (a.outFields = []);
      const {
        originX: t,
        originY: r,
        originZ: e,
        translationX: n,
        translationY: s,
        translationZ: u,
        scaleX: f,
        scaleY: c,
        scaleZ: l,
        rotationX: m,
        rotationY: p,
        rotationZ: d,
        rotationDeg: y
      } = i.transformFieldRoles;
      a.outFields.push(t, r, e, n, s, u, f, c, l, m, p, d, y);
    }
  }
  return a;
}
function d(t, o) {
  return null != o && !0 === t.returnGeometry && "xyFootprint" !== t.multipatchOption && !t.outStatistics;
}


/***/ })

}]);
//# sourceMappingURL=default-node_modules_arcgis_core_arcade_featureSetUtils_js.js.map