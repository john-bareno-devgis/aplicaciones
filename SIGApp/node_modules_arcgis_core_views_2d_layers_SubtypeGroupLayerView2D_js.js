"use strict";
(self["webpackChunkrealgis"] = self["webpackChunkrealgis"] || []).push([["node_modules_arcgis_core_views_2d_layers_SubtypeGroupLayerView2D_js"],{

/***/ 96962:
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/SubtypeGroupLayerView2D.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ 18100);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/has.js */ 67087);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ 7521);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Logger.js */ 28191);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ 83382);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ 19420);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/Error.js */ 32995);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ 20891);
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../layers/support/FeatureFilter.js */ 84298);
/* harmony import */ var _FeatureLayerView2D_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./FeatureLayerView2D.js */ 58952);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/










function n(e, r) {
  return !e.visible || 0 !== e.minScale && r > e.minScale || 0 !== e.maxScale && r < e.maxScale;
}
let l = class extends _FeatureLayerView2D_js__WEBPACK_IMPORTED_MODULE_9__["default"] {
  initialize() {
    this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.watch)(() => this.view.scale, () => this._update(), _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.initial)], "constructor");
  }
  isUpdating() {
    const e = this.layer.sublayers.some(e => null != e.renderer),
      r = this._commandsQueue.updating,
      s = null != this._updatingRequiredFieldsPromise,
      i = !this._proxy || !this._proxy.isReady,
      t = this._pipelineIsUpdating,
      a = null == this.tileRenderer || this.tileRenderer?.updating,
      n = e && (r || s || i || t || a);
    return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-log-updating") && console.log(`Updating FLV2D: ${n}\n  -> hasRenderer ${e}\n  -> hasPendingCommand ${r}\n  -> updatingRequiredFields ${s}\n  -> updatingProxy ${i}\n  -> updatingPipeline ${t}\n  -> updatingTileRenderer ${a}\n`), n;
  }
  _injectOverrides(e) {
    let r = super._injectOverrides(e);
    const s = this.view.scale,
      i = this.layer.sublayers.filter(e => n(e, s)).map(e => e.subtypeCode);
    if (!i.length) return r;
    r = null != r ? r : new _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_8__["default"]().toJSON();
    const a = `NOT ${this.layer.subtypeField} IN (${i.join(",")})`;
    return r.where = r.where ? `(${r.where}) AND (${a})` : a, r;
  }
  _setLayersForFeature(e) {
    const r = this.layer.fieldsIndex.get(this.layer.subtypeField),
      s = e.attributes[r.name],
      i = this.layer.sublayers.find(e => e.subtypeCode === s);
    e.layer = e.sourceLayer = i;
  }
  _createSchemaConfig() {
    const e = {
        subtypeField: this.layer.subtypeField,
        sublayers: Array.from(this.layer.sublayers).map(e => ({
          featureReduction: null,
          geometryType: this.layer.geometryType,
          labelingInfo: e.labelingInfo,
          labelsVisible: e.labelsVisible,
          renderer: e.renderer,
          subtypeCode: e.subtypeCode,
          orderBy: null
        }))
      },
      r = this.layer.sublayers.map(e => e.subtypeCode).join(","),
      s = this.layer.sublayers.length ? `${this.layer.subtypeField} IN (${r})` : "1=2";
    let i = this.layer.definitionExpression ? this.layer.definitionExpression + " AND " : "";
    return i += s, {
      ...super._createSchemaConfig(),
      ...e,
      definitionExpression: i
    };
  }
};
l = (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.2d.layers.SubtypeGroupLayerView2D")], l);
const o = l;


/***/ })

}]);
//# sourceMappingURL=node_modules_arcgis_core_views_2d_layers_SubtypeGroupLayerView2D_js.js.map