{"version":3,"file":"node_modules_arcgis_core_views_2d_layers_SubtypeGroupLayerView2D_js.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACiD;AAAsC;AAAoE;AAAgC;AAAoD;AAAoC;AAA+B;AAAgF;AAAwD;AAAuC;AAAA,SAASW,CAAC,CAACV,CAAC,EAACG,CAAC,EAAC;EAAC,OAAM,CAACH,CAAC,CAACW,OAAO,IAAE,CAAC,KAAGX,CAAC,CAACY,QAAQ,IAAET,CAAC,GAACH,CAAC,CAACY,QAAQ,IAAE,CAAC,KAAGZ,CAAC,CAACa,QAAQ,IAAEV,CAAC,GAACH,CAAC,CAACa,QAAQ;AAAA;AAAC,IAAIC,CAAC,GAAC,cAAcL,8DAAC;EAACM,UAAU,GAAE;IAAC,IAAI,CAACC,UAAU,CAAC,CAACb,6DAAC,CAAE,MAAI,IAAI,CAACc,IAAI,CAACC,KAAK,EAAG,MAAI,IAAI,CAACC,OAAO,EAAE,EAAEd,2DAAC,CAAC,CAAC,EAAC,aAAa,CAAC;EAAA;EAACe,UAAU,GAAE;IAAC,MAAMpB,CAAC,GAAC,IAAI,CAACqB,KAAK,CAACC,SAAS,CAACC,IAAI,CAAEvB,CAAC,IAAE,IAAI,IAAEA,CAAC,CAACwB,QAAQ,CAAE;MAACrB,CAAC,GAAC,IAAI,CAACsB,cAAc,CAACC,QAAQ;MAACrB,CAAC,GAAC,IAAI,IAAE,IAAI,CAACsB,8BAA8B;MAACpB,CAAC,GAAC,CAAC,IAAI,CAACqB,MAAM,IAAE,CAAC,IAAI,CAACA,MAAM,CAACC,OAAO;MAACrB,CAAC,GAAC,IAAI,CAACsB,mBAAmB;MAACrB,CAAC,GAAC,IAAI,IAAE,IAAI,CAACsB,YAAY,IAAE,IAAI,CAACA,YAAY,EAAEL,QAAQ;MAAChB,CAAC,GAACV,CAAC,KAAGG,CAAC,IAAEE,CAAC,IAAEE,CAAC,IAAEC,CAAC,IAAEC,CAAC,CAAC;IAAC,OAAOR,wDAAG,CAAC,sBAAsB,CAAC,IAAE+B,OAAO,CAACC,GAAG,CAAE,mBAAkBvB,CAAE,sBAAqBV,CAAE,4BAA2BG,CAAE,iCAAgCE,CAAE,wBAAuBE,CAAE,2BAA0BC,CAAE,+BAA8BC,CAAE,IAAG,CAAC,EAACC,CAAC;EAAA;EAACwB,gBAAgB,CAAClC,CAAC,EAAC;IAAC,IAAIG,CAAC,GAAC,KAAK,CAAC+B,gBAAgB,CAAClC,CAAC,CAAC;IAAC,MAAMK,CAAC,GAAC,IAAI,CAACY,IAAI,CAACC,KAAK;MAACX,CAAC,GAAC,IAAI,CAACc,KAAK,CAACC,SAAS,CAACa,MAAM,CAAEnC,CAAC,IAAEU,CAAC,CAACV,CAAC,EAACK,CAAC,CAAC,CAAE,CAAC+B,GAAG,CAAEpC,CAAC,IAAEA,CAAC,CAACqC,WAAW,CAAE;IAAC,IAAG,CAAC9B,CAAC,CAAC+B,MAAM,EAAC,OAAOnC,CAAC;IAACA,CAAC,GAAC,IAAI,IAAEA,CAAC,GAACA,CAAC,GAAE,IAAIK,wEAAC,GAAE+B,MAAM,EAAE;IAAC,MAAM9B,CAAC,GAAE,OAAM,IAAI,CAACY,KAAK,CAACmB,YAAa,QAAOjC,CAAC,CAACkC,IAAI,CAAC,GAAG,CAAE,GAAE;IAAC,OAAOtC,CAAC,CAACuC,KAAK,GAACvC,CAAC,CAACuC,KAAK,GAAE,IAAGvC,CAAC,CAACuC,KAAM,UAASjC,CAAE,GAAE,GAACA,CAAC,EAACN,CAAC;EAAA;EAACwC,oBAAoB,CAAC3C,CAAC,EAAC;IAAC,MAAMG,CAAC,GAAC,IAAI,CAACkB,KAAK,CAACuB,WAAW,CAACC,GAAG,CAAC,IAAI,CAACxB,KAAK,CAACmB,YAAY,CAAC;MAACnC,CAAC,GAACL,CAAC,CAAC8C,UAAU,CAAC3C,CAAC,CAAC4C,IAAI,CAAC;MAACxC,CAAC,GAAC,IAAI,CAACc,KAAK,CAACC,SAAS,CAAC0B,IAAI,CAAEhD,CAAC,IAAEA,CAAC,CAACqC,WAAW,KAAGhC,CAAC,CAAE;IAACL,CAAC,CAACqB,KAAK,GAACrB,CAAC,CAACiD,WAAW,GAAC1C,CAAC;EAAA;EAAC2C,mBAAmB,GAAE;IAAC,MAAMlD,CAAC,GAAC;QAACwC,YAAY,EAAC,IAAI,CAACnB,KAAK,CAACmB,YAAY;QAAClB,SAAS,EAAC6B,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC/B,KAAK,CAACC,SAAS,CAAC,CAACc,GAAG,CAAEpC,CAAC,KAAG;UAACqD,gBAAgB,EAAC,IAAI;UAACC,YAAY,EAAC,IAAI,CAACjC,KAAK,CAACiC,YAAY;UAACC,YAAY,EAACvD,CAAC,CAACuD,YAAY;UAACC,aAAa,EAACxD,CAAC,CAACwD,aAAa;UAAChC,QAAQ,EAACxB,CAAC,CAACwB,QAAQ;UAACa,WAAW,EAACrC,CAAC,CAACqC,WAAW;UAACoB,OAAO,EAAC;QAAI,CAAC,CAAC;MAAE,CAAC;MAACtD,CAAC,GAAC,IAAI,CAACkB,KAAK,CAACC,SAAS,CAACc,GAAG,CAAEpC,CAAC,IAAEA,CAAC,CAACqC,WAAW,CAAE,CAACI,IAAI,CAAC,GAAG,CAAC;MAACpC,CAAC,GAAC,IAAI,CAACgB,KAAK,CAACC,SAAS,CAACgB,MAAM,GAAE,GAAE,IAAI,CAACjB,KAAK,CAACmB,YAAa,QAAOrC,CAAE,GAAE,GAAC,KAAK;IAAC,IAAII,CAAC,GAAC,IAAI,CAACc,KAAK,CAACqC,oBAAoB,GAAC,IAAI,CAACrC,KAAK,CAACqC,oBAAoB,GAAC,OAAO,GAAC,EAAE;IAAC,OAAOnD,CAAC,IAAEF,CAAC,EAAC;MAAC,GAAG,KAAK,CAAC6C,mBAAmB,EAAE;MAAC,GAAGlD,CAAC;MAAC0D,oBAAoB,EAACnD;IAAC,CAAC;EAAA;AAAC,CAAC;AAACO,CAAC,GAACd,uDAAC,CAAC,CAACO,sFAAC,CAAC,8CAA8C,CAAC,CAAC,EAACO,CAAC,CAAC;AAAC,MAAM6C,CAAC,GAAC7C,CAAC","sources":["./node_modules/@arcgis/core/views/2d/layers/SubtypeGroupLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import has from\"../../../core/has.js\";import{watch as r,initial as s}from\"../../../core/reactiveUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/Error.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../layers/support/FeatureFilter.js\";import a from\"./FeatureLayerView2D.js\";function n(e,r){return!e.visible||0!==e.minScale&&r>e.minScale||0!==e.maxScale&&r<e.maxScale}let l=class extends a{initialize(){this.addHandles([r((()=>this.view.scale),(()=>this._update()),s)],\"constructor\")}isUpdating(){const e=this.layer.sublayers.some((e=>null!=e.renderer)),r=this._commandsQueue.updating,s=null!=this._updatingRequiredFieldsPromise,i=!this._proxy||!this._proxy.isReady,t=this._pipelineIsUpdating,a=null==this.tileRenderer||this.tileRenderer?.updating,n=e&&(r||s||i||t||a);return has(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${n}\\n  -> hasRenderer ${e}\\n  -> hasPendingCommand ${r}\\n  -> updatingRequiredFields ${s}\\n  -> updatingProxy ${i}\\n  -> updatingPipeline ${t}\\n  -> updatingTileRenderer ${a}\\n`),n}_injectOverrides(e){let r=super._injectOverrides(e);const s=this.view.scale,i=this.layer.sublayers.filter((e=>n(e,s))).map((e=>e.subtypeCode));if(!i.length)return r;r=null!=r?r:(new t).toJSON();const a=`NOT ${this.layer.subtypeField} IN (${i.join(\",\")})`;return r.where=r.where?`(${r.where}) AND (${a})`:a,r}_setLayersForFeature(e){const r=this.layer.fieldsIndex.get(this.layer.subtypeField),s=e.attributes[r.name],i=this.layer.sublayers.find((e=>e.subtypeCode===s));e.layer=e.sourceLayer=i}_createSchemaConfig(){const e={subtypeField:this.layer.subtypeField,sublayers:Array.from(this.layer.sublayers).map((e=>({featureReduction:null,geometryType:this.layer.geometryType,labelingInfo:e.labelingInfo,labelsVisible:e.labelsVisible,renderer:e.renderer,subtypeCode:e.subtypeCode,orderBy:null})))},r=this.layer.sublayers.map((e=>e.subtypeCode)).join(\",\"),s=this.layer.sublayers.length?`${this.layer.subtypeField} IN (${r})`:\"1=2\";let i=this.layer.definitionExpression?this.layer.definitionExpression+\" AND \":\"\";return i+=s,{...super._createSchemaConfig(),...e,definitionExpression:i}}};l=e([i(\"esri.views.2d.layers.SubtypeGroupLayerView2D\")],l);const o=l;export{o as default};\n"],"names":["_","e","has","watch","r","initial","s","subclass","i","t","a","n","visible","minScale","maxScale","l","initialize","addHandles","view","scale","_update","isUpdating","layer","sublayers","some","renderer","_commandsQueue","updating","_updatingRequiredFieldsPromise","_proxy","isReady","_pipelineIsUpdating","tileRenderer","console","log","_injectOverrides","filter","map","subtypeCode","length","toJSON","subtypeField","join","where","_setLayersForFeature","fieldsIndex","get","attributes","name","find","sourceLayer","_createSchemaConfig","Array","from","featureReduction","geometryType","labelingInfo","labelsVisible","orderBy","definitionExpression","o","default"],"sourceRoot":"webpack:///","x_google_ignoreList":[0]}