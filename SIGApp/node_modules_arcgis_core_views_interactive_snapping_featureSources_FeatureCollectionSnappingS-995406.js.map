{"version":3,"file":"node_modules_arcgis_core_views_interactive_snapping_featureSources_FeatureCollectionSnappingS-995406.js","mappings":"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","sources":["./node_modules/@arcgis/core/core/memoize.js","./node_modules/@arcgis/core/views/interactive/snapping/featureSources/FeatureCollectionSnappingSource.js","./node_modules/@arcgis/core/views/interactive/snapping/hints/PointSnappingHint.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nfunction t(t){let r,e,i=[],u=!1;function f(...f){return u&&r===this&&n(f,i)||(e=t.apply(this,f),r=this,i=f,u=!0),e}return f}function n(t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==n[r])return!1;return!0}export{t as memoize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{memoize as i}from\"../../../../core/memoize.js\";import{throwIfAborted as o,whenOrAbort as n}from\"../../../../core/promiseUtils.js\";import{watch as r,initial as a,on as s}from\"../../../../core/reactiveUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{elevationContextAffectsAlignment as y}from\"../../../../support/elevationInfoUtils.js\";import{makeFilter as c,makeSnappingQuery as u}from\"../snappingUtils.js\";import{convertSnappingCandidate as g,makeGetGroundElevation as h}from\"./queryEngineUtils.js\";import{getSnappingCandidateElevationAligner as m}from\"./snappingCandidateElevationAlignment.js\";import{getSnappingCandidateElevationFilter as d}from\"./snappingCandidateElevationFilter.js\";import{getSymbologySnappingCandidatesFetcher as v}from\"./symbologySnappingCandidates.js\";let S=class extends t{get availability(){return 1}get updating(){return this.layerSource.updating}get _snappingElevationAligner(){const{view:e}=this,{layer:t}=this.layerSource,i=null!=e&&\"3d\"===e.type;if(!i||\"subtype-group\"===t.type)return m();const o=async(i,o)=>(await n(e.whenLayerView(t),o)).elevationAlignPointsInFeatures(i,o);return m(i,{elevationInfo:t.elevationInfo,alignPointsInFeatures:o})}get _snappingElevationFilter(){const{view:e}=this,t=null!=e&&\"3d\"===e.type&&\"subtype-group\"!==this.layerSource.layer.type;return d(t)}get _symbologySnappingFetcher(){const{view:e}=this,{layer:t}=this.layerSource;return null!=e&&\"3d\"===e.type&&\"subtype-group\"!==t.type?v(this._symbologySnappingSupported,(async(i,n)=>{const r=await e.whenLayerView(t);return o(n),r.queryForSymbologySnapping({candidates:i,spatialReference:e.spatialReference},n)})):v()}get _symbologySnappingSupported(){return null!=this._layerView3D&&this._layerView3D.symbologySnappingSupported}initialize(){const{view:e}=this,{layer:t}=this.layerSource;null!=e&&\"3d\"===e.type&&\"subtype-group\"!==t.type&&(e.whenLayerView(t).then((e=>this._layerView3D=e)),this.addHandles([e.elevationProvider.on(\"elevation-change\",(({context:e})=>{const{elevationInfo:i}=t;y(e,i)&&this._snappingElevationAligner.notifyElevationSourceChange()})),r((()=>t.elevationInfo),(()=>this._snappingElevationAligner.notifyElevationSourceChange()),a),r((()=>null!=this._layerView3D?this._layerView3D.processor?.renderer:null),(()=>this._symbologySnappingFetcher.notifySymbologyChange()),a),s((()=>this._layerView3D?.layer),[\"edits\",\"apply-edits\",\"graphic-update\"],(()=>this._symbologySnappingFetcher.notifySymbologyChange()))]))}constructor(e){super(e),this.view=null,this._layerView3D=null,this._memoizedMakeGetGroundElevation=i(h)}refresh(){}async fetchCandidates(e,t){const{layer:i}=this.layerSource,n=i.source;if(!n?.querySnapping)return[];const r=c(i),a=u(e,this.view?.type??\"2d\",r),s=await n.querySnapping(a,{signal:t});o(t);const p=e.coordinateHelper.spatialReference,l=await this._snappingElevationAligner.alignCandidates(s.candidates,p,t);o(t);const y=await this._symbologySnappingFetcher.fetch(l,t);o(t);const h=0===y.length?l:[...l,...y],m=this._snappingElevationFilter.filter(a,h),d=this._memoizedMakeGetGroundElevation(this.view,p);return m.map((e=>g(e,d)))}};e([p({constructOnly:!0})],S.prototype,\"layerSource\",void 0),e([p({constructOnly:!0})],S.prototype,\"view\",void 0),e([p()],S.prototype,\"_snappingElevationAligner\",null),e([p()],S.prototype,\"_snappingElevationFilter\",null),e([p()],S.prototype,\"_symbologySnappingFetcher\",null),e([p()],S.prototype,\"_layerView3D\",void 0),e([p()],S.prototype,\"_symbologySnappingSupported\",null),S=e([l(\"esri.views.interactive.snapping.featureSources.FeatureCollectionSnappingSource\")],S);export{S as FeatureCollectionSnappingSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{h as t}from\"../../../../chunks/vec3.js\";import{SnappingHint as s}from\"./SnappingHint.js\";class n extends s{constructor(t,s,n){super(s,n),this.point=t}equals(s){return s instanceof n&&t(this.point,s.point)}}export{n as PointSnappingHint};\n"],"names":["t","r","e","i","u","f","n","apply","length","memoize","_","throwIfAborted","o","whenOrAbort","watch","initial","a","on","s","property","p","subclass","l","elevationContextAffectsAlignment","y","makeFilter","c","makeSnappingQuery","convertSnappingCandidate","g","makeGetGroundElevation","h","getSnappingCandidateElevationAligner","m","getSnappingCandidateElevationFilter","d","getSymbologySnappingCandidatesFetcher","v","S","availability","updating","layerSource","_snappingElevationAligner","view","layer","type","whenLayerView","elevationAlignPointsInFeatures","elevationInfo","alignPointsInFeatures","_snappingElevationFilter","_symbologySnappingFetcher","_symbologySnappingSupported","queryForSymbologySnapping","candidates","spatialReference","_layerView3D","symbologySnappingSupported","initialize","then","addHandles","elevationProvider","context","notifyElevationSourceChange","processor","renderer","notifySymbologyChange","constructor","_memoizedMakeGetGroundElevation","refresh","fetchCandidates","source","querySnapping","signal","coordinateHelper","alignCandidates","fetch","filter","map","constructOnly","prototype","FeatureCollectionSnappingSource","SnappingHint","point","equals","PointSnappingHint"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1,2]}