"use strict";
(self["webpackChunkrealgis"] = self["webpackChunkrealgis"] || []).push([["node_modules_arcgis_core_views_2d_layers_StreamLayerView2D_js"],{

/***/ 66360:
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ 18100);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Error.js */ 32995);
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/handleUtils.js */ 70120);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ 7521);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ 9497);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ 83382);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ 19420);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/has.js */ 67087);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ 20891);
/* harmony import */ var _rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../rest/support/FeatureSet.js */ 87096);
/* harmony import */ var _FeatureLayerView2D_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./FeatureLayerView2D.js */ 58952);
/* harmony import */ var _support_util_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./support/util.js */ 88431);
/* harmony import */ var _layers_StreamLayerView_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../layers/StreamLayerView.js */ 57242);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/













function u(e, t) {
  if (null == e && null == t) return null;
  const r = {};
  return null != t && (r.geometry = t.toJSON()), null != e && (r.where = e), r;
}
let d = class extends (0,_layers_StreamLayerView_js__WEBPACK_IMPORTED_MODULE_13__["default"])(_FeatureLayerView2D_js__WEBPACK_IMPORTED_MODULE_11__["default"]) {
  constructor() {
    super(...arguments), this.pipelineConnectionStatus = "disconnected", this.pipelineErrorString = null, this._enabledEventTypes = new Set();
  }
  initialize() {
    this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)(() => this.layer.customParameters, e => this._proxy.updateCustomParameters(e)), this.layer.on("send-message-to-socket", e => this._proxy.sendMessageToSocket(e)), this.layer.on("send-message-to-client", e => this._proxy.sendMessageToClient(e)), (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)(() => this.layer.purgeOptions, () => this._update()), (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)(() => this.suspended, this._onSuspendedChange.bind(this))], "constructor");
  }
  get connectionError() {
    return this.pipelineErrorString ? new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("stream-controller", this.pipelineErrorString) : null;
  }
  on(e, t) {
    if (Array.isArray(e)) return (0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_3__.handlesGroup)(e.map(e => this.on(e, t)));
    const i = ["data-received", "message-received"].includes(e);
    i && (this._enabledEventTypes.add(e), this._proxy.enableEvent(e, !0));
    const n = super.on(e, t),
      o = this;
    return (0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_3__.makeHandle)(() => {
      n.remove(), i && (o._proxy.closed || o.hasEventListener(e) || o._proxy.enableEvent(e, !1));
    });
  }
  queryLatestObservations(e, r) {
    if (!(this.layer.timeInfo?.endField || this.layer.timeInfo?.startField || this.layer.timeInfo?.trackIdField)) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("streamlayer-no-timeField", "queryLatestObservation can only be used with services that define a TrackIdField");
    return this._proxy.queryLatestObservations(this._cleanUpQuery(e), r).then(e => {
      const t = _rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_10__["default"].fromJSON(e);
      return t.features.forEach(e => {
        e.layer = this.layer, e.sourceLayer = this.layer;
      }), t;
    });
  }
  detach() {
    super.detach(), this.pipelineConnectionStatus = "disconnected";
  }
  get _streamConnectionStatus() {
    return this.pipelineConnectionStatus;
  }
  _doPause() {
    this._proxy?.pauseStream();
  }
  _doResume() {
    this._proxy?.resumeStream();
  }
  _createClientOptions() {
    return {
      ...super._createClientOptions(),
      setProperty: e => {
        this.set(e.propertyName, e.value);
      }
    };
  }
  _createTileRendererHash(e) {
    const t = `${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(u(this.layer.definitionExpression, this.layer.geometryDefinition))})`;
    return super._createTileRendererHash(e) + t;
  }
  _createServiceOptions() {
    var _this = this;
    return (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const e = _this.layer,
        {
          objectIdField: t
        } = e,
        r = e.fields.map(e => e.toJSON()),
        s = (0,_support_util_js__WEBPACK_IMPORTED_MODULE_12__.toJSONGeometryType)(e.geometryType),
        i = e.timeInfo?.toJSON() || null,
        n = e.spatialReference ? e.spatialReference.toJSON() : null;
      return {
        type: "stream",
        isPaused: _this._isUserPaused,
        fields: r,
        fieldsIndex: _this.layer.fieldsIndex.toJSON(),
        geometryType: s,
        objectIdField: t,
        timeInfo: i,
        source: _this.layer.parsedUrl,
        serviceFilter: u(_this.layer.definitionExpression, _this.layer.geometryDefinition),
        purgeOptions: _this.layer.purgeOptions.toJSON(),
        enabledEventTypes: Array.from(_this._enabledEventTypes.values()),
        spatialReference: n,
        maxReconnectionAttempts: _this.layer.maxReconnectionAttempts,
        maxReconnectionInterval: _this.layer.maxReconnectionInterval,
        updateInterval: _this.layer.updateInterval,
        customParameters: e.customParameters
      };
    })();
  }
};
(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()], d.prototype, "pipelineConnectionStatus", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()], d.prototype, "pipelineErrorString", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({
  readOnly: !0
})], d.prototype, "connectionError", null), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({
  readOnly: !0
})], d.prototype, "_streamConnectionStatus", null), d = (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.2d.layers.StreamLayerView2D")], d);
const y = d;


/***/ }),

/***/ 57242:
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/StreamLayerView.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ 18100);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ 9497);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ 83382);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/arrayUtils.js */ 19420);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/has.js */ 67087);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ 20891);
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../layers/support/FeatureFilter.js */ 84298);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/







const o = o => {
  let i = class extends o {
    resume() {
      this._isUserPaused = !1, this.suspended || this._doResume();
    }
    pause() {
      this._isUserPaused = !0, this.suspended || this._doPause();
    }
    constructor(...s) {
      super(...s), this._isUserPaused = !1, this.filter = null;
    }
    get connectionStatus() {
      return this._isUserPaused ? "paused" : this._streamConnectionStatus;
    }
    _onSuspendedChange(s) {
      s ? this._doPause() : this._isUserPaused || this._doResume();
    }
  };
  return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)()], i.prototype, "_isUserPaused", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)({
    readOnly: !0
  })], i.prototype, "connectionStatus", null), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)({
    type: _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_6__["default"]
  })], i.prototype, "filter", void 0), i = (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)("esri.layers.mixins.StreamLayerView")], i), i;
};


/***/ })

}]);
//# sourceMappingURL=node_modules_arcgis_core_views_2d_layers_StreamLayerView2D_js.js.map