{"version":3,"file":"default-node_modules_arcgis_core_layers_support_TilemapCache_js.js","mappings":"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","sources":["./node_modules/@arcgis/core/geometry/support/UintArray.js","./node_modules/@arcgis/core/layers/support/Tilemap.js","./node_modules/@arcgis/core/layers/support/TilemapCache.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{nativeArrayMaxSize as r,isArray as n}from\"../../core/typedArrayUtil.js\";function t(n,t=!1){return n<=r?t?new Array(n).fill(0):new Array(n):new Uint32Array(n)}function e(t){return(n(t)?t.length:t.byteLength/8)<=r?Array.from(t):new Uint32Array(t)}function y(r,n,t){return Array.isArray(r)?r.slice(n,n+t):r.subarray(n,n+t)}export{t as newUintArray,e as uintArrayFrom,y as uintSubArray};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import{constant as i}from\"../../core/arrayUtils.js\";import e from\"../../core/Error.js\";import{clone as a}from\"../../core/lang.js\";import{estimateSize as o}from\"../../core/typedArrayUtil.js\";import{newUintArray as l}from\"../../geometry/support/UintArray.js\";class r{constructor(t){this._validateJSON(t);const{location:i,data:e}=t;this.location=Object.freeze(a(i));const r=this.location.width,n=this.location.height;let s=!0,h=!0;const c=Math.ceil(r*n/32),m=l(c);let f=0;for(let a=0;a<e.length;a++){const t=a%32;e[a]?(h=!1,m[f]|=1<<t):s=!1,31===t&&++f}h?(this._availability=\"unavailable\",this.byteSize=40):s?(this._availability=\"available\",this.byteSize=40):(this._availability=m,this.byteSize=40+o(m))}getAvailability(t,i){if(\"unavailable\"===this._availability||\"available\"===this._availability)return this._availability;const e=(t-this.location.top)*this.location.width+(i-this.location.left),a=e%32,o=e>>5,l=this._availability;return o<0||o>l.length?\"unknown\":l[o]&1<<a?\"available\":\"unavailable\"}static fromDefinition(a,o){const l=a.service.request||t,{row:n,col:h,width:c,height:m}=a,f={query:{f:\"json\"}};return o=o?{...f,...o}:f,l(s(a),o).then((t=>t.data)).catch((t=>{if(t&&t.details&&422===t.details.httpStatus)return{location:{top:n,left:h,width:c,height:m},valid:!0,data:i(c*m,0)};throw t})).then((t=>{if(t.location&&(t.location.top!==n||t.location.left!==h||t.location.width!==c||t.location.height!==m))throw new e(\"tilemap:location-mismatch\",\"Tilemap response for different location than requested\",{response:t,definition:{top:n,left:h,width:c,height:m}});return r.fromJSON(t)}))}static fromJSON(t){return Object.freeze(new r(t))}_validateJSON(t){if(!t?.location)throw new e(\"tilemap:missing-location\",\"Location missing from tilemap response\");if(!1===t.valid)throw new e(\"tilemap:invalid\",\"Tilemap response was marked as invalid\");if(!t.data)throw new e(\"tilemap:missing-data\",\"Data missing from tilemap response\");if(!Array.isArray(t.data))throw new e(\"tilemap:data-mismatch\",\"Data must be an array of numbers\");if(t.data.length!==t.location.width*t.location.height)throw new e(\"tilemap:data-mismatch\",\"Number of data items does not match width/height of tilemap\")}}function n(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function s(t){let i;if(t.service.tileServers?.length){const e=t.service.tileServers;i=`${e&&e.length?e[t.row%e.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}else i=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;const e=t.service.query;return e&&(i=`${i}?${e}`),i}export{r as Tilemap,n as tilemapDefinitionId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import i from\"../../core/Accessor.js\";import{ByteSizeUnit as r}from\"../../core/ByteSizeUnit.js\";import s from\"../../core/Error.js\";import{makeHandle as l}from\"../../core/handleUtils.js\";import{LRUCache as o}from\"../../core/LRUCache.js\";import a from\"../../core/PooledArray.js\";import{onAbort as n,createAbortError as c,isAbortError as h,isAborted as p}from\"../../core/promiseUtils.js\";import{watch as m,initial as f}from\"../../core/reactiveUtils.js\";import{waitTicks as u}from\"../../core/scheduling.js\";import{objectToQuery as v}from\"../../core/urlUtils.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as d}from\"../../core/accessorSupport/decorators/subclass.js\";import{TileKey as _}from\"./TileKey.js\";import{tilemapDefinitionId as b,Tilemap as g}from\"./Tilemap.js\";var w;let T=w=class extends i{constructor(e){super(e),this._pendingTilemapRequests={},this.request=t,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new o(2*r.MEGABYTES),this.addHandles([m((()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]}),(()=>this._initializeTilemapDefinition()),f)])}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}fetchTilemap(e,t,i,r){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return Promise.reject(new s(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`));const l=this._tmpTilemapDefinition,o=this._tilemapFromCache(e,t,i,l);if(o)return Promise.resolve(o);const a=r?.signal;return r={...r,signal:null},new Promise(((e,t)=>{n(a,(()=>t(c())));const i=b(l);let s=this._pendingTilemapRequests[i];if(!s){s=g.fromDefinition(l,r).then((e=>(this._tilemapCache.put(i,e,e.byteSize),e)));const e=()=>{delete this._pendingTilemapRequests[i]};this._pendingTilemapRequests[i]=s,s.then(e,e)}s.then(e,t)}))}getAvailability(e,t,i){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return\"unavailable\";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):\"unknown\"}fetchAvailability(e,t,i,r){return!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD?Promise.reject(new s(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:e,row:t,col:i})):this.fetchTilemap(e,t,i,r).catch((e=>e)).then((r=>{if(r instanceof g){const l=r.getAvailability(t,i);if(\"unavailable\"===l)throw new s(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:e,row:t,col:i});return l}if(h(r))throw r;return\"unknown\"}))}fetchAvailabilityUpsample(e,t,i,r,s){r.level=e,r.row=t,r.col=i;const l=this.layer.tileInfo;l.updateTileInfo(r);const o=this.fetchAvailability(e,t,i,s).catch((e=>{if(h(e))throw e;if(l.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r,s);throw e}));return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,s,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,s,o){if(!this._prefetchingEnabled||null==e)return;const a=`prefetch-${e}`;if(this.hasHandles(a))return;const n=new AbortController;o.then((()=>n.abort()),(()=>n.abort()));let c=!1;const h=l((()=>{c||(c=!0,n.abort())}));if(this.addHandles(h,a),await u(10,n.signal).catch((()=>{})),c||(c=!0,this.removeHandles(a)),p(n))return;const m=new _(e,t,i,r),f={...s,signal:n.signal},v=this.layer.tileInfo;for(let l=0;w._prefetches.length<w._maxPrefetch&&v.upsampleTile(m);++l){const e=this.fetchAvailability(m.level,m.row,m.col,f);w._prefetches.push(e);const t=()=>{w._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:v({...e.query,...i,token:t??e.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const s=b(r);return this._tilemapCache.get(s)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,i,r)=>!!e._tilemapFromCache(t,i,r,e._tmpTilemapDefinition)}}};T._maxPrefetch=4,T._prefetches=new a({initialSize:w._maxPrefetch}),e([y({constructOnly:!0})],T.prototype,\"layer\",void 0),e([y({constructOnly:!0})],T.prototype,\"minLOD\",void 0),e([y({constructOnly:!0})],T.prototype,\"maxLOD\",void 0),e([y({constructOnly:!0})],T.prototype,\"request\",void 0),e([y({constructOnly:!0})],T.prototype,\"size\",void 0),T=w=e([d(\"esri.layers.support.TilemapCache\")],T);export{T as TilemapCache};\n"],"names":["nativeArrayMaxSize","r","isArray","n","t","Array","fill","Uint32Array","e","length","byteLength","from","y","slice","subarray","newUintArray","uintArrayFrom","uintSubArray","constant","i","clone","a","estimateSize","o","l","constructor","_validateJSON","location","data","Object","freeze","width","height","s","h","c","Math","ceil","m","f","_availability","byteSize","getAvailability","top","left","fromDefinition","service","request","row","col","query","then","catch","details","httpStatus","valid","response","definition","fromJSON","level","tileServers","url","Tilemap","tilemapDefinitionId","_","ByteSizeUnit","makeHandle","LRUCache","onAbort","createAbortError","isAbortError","isAborted","p","watch","initial","waitTicks","u","objectToQuery","v","property","subclass","d","TileKey","b","g","w","T","_pendingTilemapRequests","size","_prefetchingEnabled","initialize","_tilemapCache","MEGABYTES","addHandles","layer","parsedUrl","apiKey","customParameters","_initializeTilemapDefinition","effectiveMinLOD","minLOD","tileInfo","lods","effectiveMaxLOD","maxLOD","fetchTilemap","lodAt","Promise","reject","_tmpTilemapDefinition","_tilemapFromCache","resolve","signal","put","fetchAvailability","fetchAvailabilityUpsample","updateTileInfo","upsampleTile","_fetchAvailabilityUpsamplePrefetch","id","hasHandles","AbortController","abort","removeHandles","_prefetches","_maxPrefetch","push","removeUnordered","clear","path","token","get","test","prefetchingEnabled","hasTilemap","initialSize","constructOnly","prototype","TilemapCache"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1,2]}