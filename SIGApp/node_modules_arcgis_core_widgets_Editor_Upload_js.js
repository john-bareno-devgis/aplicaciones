"use strict";
(self["webpackChunkrealgis"] = self["webpackChunkrealgis"] || []).push([["node_modules_arcgis_core_widgets_Editor_Upload_js"],{

/***/ 82577:
/*!************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Editor/Upload.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Upload": () => (/* binding */ f),
/* harmony export */   "clearPromptForFilesStub": () => (/* binding */ j),
/* harmony export */   "stubFilePickerToSelect": () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ 18100);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Accessor.js */ 2299);
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/asyncUtils.js */ 11823);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/Error.js */ 32995);
/* harmony import */ var _core_events_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/events.js */ 83627);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/promiseUtils.js */ 30801);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ 9497);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ 83382);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/arrayUtils.js */ 19420);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/has.js */ 67087);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ 20891);
/* harmony import */ var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../geometry/Point.js */ 72062);
/* harmony import */ var _layers_graphics_sources_support_uploadProgressWeights_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../layers/graphics/sources/support/uploadProgressWeights.js */ 32927);
/* harmony import */ var _layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../layers/support/infoFor3D.js */ 11895);
/* harmony import */ var _support_progressUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../support/progressUtils.js */ 12928);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/















let f = class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__["default"] {
  constructor() {
    super({}), this.files = [], this.progress = 0, this._uploadTask = null, this._layer = null;
  }
  destroy() {
    this.cancel(), this.files = [], this._layer = null, this._uploadTask = null;
  }
  get state() {
    const e = this._uploadTask;
    return e && 0 !== this.files.length ? e.finished ? e.error ? "error" : "success" : "pending" : "default";
  }
  get result() {
    return this._uploadTask?.value ?? null;
  }
  get error() {
    return this._uploadTask?.error ?? null;
  }
  uploadTo(e) {
    var _this = this;
    this.cancel(), this.files = [], this._layer = e, this._uploadTask = (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_3__.createTask)( /*#__PURE__*/function () {
      var _ref = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (r) {
        const o = yield y(e);
        (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.throwIfAborted)(r), _this.progress = 0, _this.files = o;
        const t = (0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_15__.makeProgressManager)(_layers_graphics_sources_support_uploadProgressWeights_js__WEBPACK_IMPORTED_MODULE_13__.uploadProgressWeights.upload, e => {
          _this.progress = e;
        }, "Upload.uploadTo");
        if (0 === o.length) return null;
        const {
          default: l
        } = yield Promise.all(/*! import() */[__webpack_require__.e("default-node_modules_arcgis_core_chunks_earcut_js"), __webpack_require__.e("default-node_modules_arcgis_core_geometry_support_buffer_BufferView_js"), __webpack_require__.e("default-node_modules_arcgis_core_chunks_quat_js-node_modules_arcgis_core_views_3d_webgl-engin-702758"), __webpack_require__.e("default-node_modules_arcgis_core_geometry_support_meshUtils_georeference_js"), __webpack_require__.e("default-node_modules_arcgis_core_chunks_vec32_js-node_modules_arcgis_core_geometry_projection-f1c31e"), __webpack_require__.e("default-node_modules_arcgis_core_geometry_Mesh_js-node_modules_arcgis_core_geometry_support_D-dfb100")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../geometry/Mesh.js */ 9970));
        (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.throwIfAborted)(r);
        const a = yield l.extractAndFilterFiles(o, e);
        (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.throwIfAborted)(r), a.length > 0 && (_this.files = a);
        const n = new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_12__["default"]({
            x: 0,
            y: 0,
            z: 0,
            spatialReference: e.spatialReference
          }),
          u = yield l.createFromFiles(n, a, {
            layer: e,
            signal: r,
            onProgress: t.makeOnProgress("createFromFiles")
          });
        if ((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.throwIfAborted)(r), !u) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_4__["default"]("editor:upload", "could not upload or convert model");
        const f = a.reduce((e, r) => e + r.size, 0),
          h = t.simulate("loadMesh", (0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_15__.estimatedTransferTime)(f));
        try {
          yield u.load();
        } finally {
          h.remove();
        }
        return u;
      });
      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }());
  }
  retry() {
    this._layer && this.uploadTo(this._layer);
  }
  cancel() {
    this._uploadTask?.abort();
  }
};
(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()], f.prototype, "files", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()], f.prototype, "progress", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()], f.prototype, "state", null), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()], f.prototype, "result", null), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()], f.prototype, "error", null), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()], f.prototype, "_uploadTask", void 0), (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()], f.prototype, "_layer", void 0), f = (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_1__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_11__.subclass)("esri.widgets.Editor.Upload")], f);
let h = null;
function y(_x2) {
  return _y.apply(this, arguments);
}
function _y() {
  _y = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e) {
    const {
        resolve: r,
        promise: o
      } = (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.createResolver)(),
      s = document.createElement("input");
    s.type = "file", s.multiple = !1, s.accept = [...(0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_14__.getSupportedExtensions)(e.infoFor3D), ".zip"].join(","), s.style.display = "none", document.body.appendChild(s);
    const i = (0,_core_events_js__WEBPACK_IMPORTED_MODULE_5__.on)(s, "change", () => r(s.files ? Array.from(s.files) : []));
    return h ? h(s) : s.click(), o.finally(() => {
      i.remove(), s.remove();
    });
  });
  return _y.apply(this, arguments);
}
function g(e) {
  h = r => {
    Promise.resolve().then(() => e).then(e => {
      if (!h) return;
      const o = new DataTransfer();
      e.forEach(e => o.items.add(e)), r.files = o.files, r.dispatchEvent(new Event("change"));
    });
  };
}
function j() {
  h = null;
}


/***/ })

}]);
//# sourceMappingURL=node_modules_arcgis_core_widgets_Editor_Upload_js.js.map