{"version":3,"file":"node_modules_arcgis_core_rest_support_meshFeatureSet_js.js","mappings":"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","sources":["./node_modules/@arcgis/core/rest/support/meshFeatureSet.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Logger.js\";import{getOrCreateMapValue as r}from\"../../core/MapUtils.js\";import{f as o}from\"../../chunks/vec3f64.js\";import n from\"../../geometry/Extent.js\";import s from\"../../geometry/Mesh.js\";import i from\"../../geometry/Point.js\";import a from\"../../geometry/SpatialReference.js\";import u from\"../../geometry/support/MeshGeoreferencedRelativeVertexSpace.js\";import c from\"../../geometry/support/MeshLocalVertexSpace.js\";import f from\"../../geometry/support/MeshTransform.js\";import{ServiceAssetPart as m,ServiceAsset as p}from\"../../geometry/support/meshUtils/External.js\";import{getFormatIdMimeType as l}from\"../../layers/support/infoFor3D.js\";import g from\"./FeatureSet.js\";const h=()=>t.getLogger(\"esri.rest.support.meshFeatureSet\");function y(t,r,o){const n=o.features;o.features=[],delete o.geometryType;const s=g.fromJSON(o);if(s.geometryType=\"mesh\",!o.assetMaps)return s;const i=M(r,o.assetMaps),u=t.sourceSpatialReference??a.WGS84,c=o.globalIdFieldName,{outFields:f}=t,m=null!=f&&f.length>0?E(f.includes(\"*\")?null:new Set(f)):()=>({});for(const a of n){const t=S(a,c,u,r,i);null!=t&&s.features.push(new e({geometry:t,attributes:m(a)}))}return s}function E(e){return({attributes:t})=>{if(!t)return{};if(!e)return t;for(const r in t)e.has(r)||delete t[r];return t}}function S(e,t,r,o,i){const a=e.attributes[t],f=i.get(a);if(null==f)return h().error(\"mesh-feature-set:asset-not-found\",\"Service returned a feature which was not found in the asset map\",e),null;if(!e.geometry)return h().error(\"mesh-feature-set:no-geometry\",\"Service returned a feature without geometry\",e),null;const{originPoint:m,originVector:p}=d(e,r,o),l=n.fromJSON(e.geometry);l.spatialReference=r;const g=j(e.attributes,o),y=f.projectVertices?new u({origin:p}):new c({origin:p}),E=T(f);return E?s.createWithExternalSource(m,E,{extent:l,transform:g,vertexSpace:y}):s.createIncomplete(m,{extent:l,transform:g,vertexSpace:y})}function d({attributes:e},t,{transformFieldRoles:r}){const n=e[r.originX],s=e[r.originY],a=e[r.originZ];return{originPoint:new i({x:n,y:s,z:a,spatialReference:t}),originVector:o(n,s,a)}}function j(e,{transformFieldRoles:t}){return new f({translation:[e[t.translationX],-e[t.translationZ],e[t.translationY]],rotationAxis:[e[t.rotationX],-e[t.rotationZ],e[t.rotationY]],rotationAngle:e[t.rotationDeg],scale:[e[t.scaleX],e[t.scaleZ],e[t.scaleY]]})}var w;function M(e,t){const o=new Map;for(const n of t){const t=n.parentGlobalId;if(null==t)continue;const s=n.assetName,i=n.assetType,a=n.assetHash,u=n.assetURL,c=n.conversionStatus,f=n.seqNo,m=l(i,e.supportedFormats);if(!m){h().error(\"mesh-feature-set:unknown-format\",`Service returned an asset of type ${i}, but it does not list it as a supported type`);continue}const p=r(o,t,(()=>({projectVertices:P(n.flags).projectVertices,files:new Map})));r(p.files,s,(()=>({name:s,type:i,mimeType:m,status:D(c),parts:[]}))).parts[f]={hash:a,url:u}}return o}function T(e){const t=Array.from(e.files.values()),r=new Array;for(const o of t){if(o.status!==w.COMPLETED)return null;const e=new Array;for(const t of o.parts){if(!t)return null;e.push(new m(t.url,t.hash))}r.push(new p(o.name,o.mimeType,e))}return r}function D(e){switch(e){case\"COMPLETED\":case\"SUBMITTED\":return w.COMPLETED;case\"INPROGRESS\":return w.PENDING;default:return w.FAILED}}function P(e){return{projectVertices:e.includes(\"PROJECT_VERTICES\")}}!function(e){e[e.FAILED=0]=\"FAILED\",e[e.PENDING=1]=\"PENDING\",e[e.COMPLETED=2]=\"COMPLETED\"}(w||(w={}));export{M as assetMapFromAssetMapsJSON,S as extractMesh,y as meshFeatureSetFromJSON};\n"],"names":["e","t","getOrCreateMapValue","r","f","o","n","s","i","a","u","c","ServiceAssetPart","m","ServiceAsset","p","getFormatIdMimeType","l","g","h","getLogger","y","features","geometryType","fromJSON","assetMaps","M","sourceSpatialReference","WGS84","globalIdFieldName","outFields","length","E","includes","Set","S","push","geometry","attributes","has","get","error","originPoint","originVector","d","spatialReference","j","projectVertices","origin","T","createWithExternalSource","extent","transform","vertexSpace","createIncomplete","transformFieldRoles","originX","originY","originZ","x","z","translation","translationX","translationZ","translationY","rotationAxis","rotationX","rotationZ","rotationY","rotationAngle","rotationDeg","scale","scaleX","scaleZ","scaleY","w","Map","parentGlobalId","assetName","assetType","assetHash","assetURL","conversionStatus","seqNo","supportedFormats","P","flags","files","name","type","mimeType","status","D","parts","hash","url","Array","from","values","COMPLETED","PENDING","FAILED","assetMapFromAssetMapsJSON","extractMesh","meshFeatureSetFromJSON"],"sourceRoot":"webpack:///","x_google_ignoreList":[0]}