{"version":3,"file":"node_modules_arcgis_core_views_3d_support_PBFDecoderWorker_js.js","mappings":"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","sources":["./node_modules/@arcgis/core/rest/query/operations/pbfDehydratedFeatureSet.js","./node_modules/@arcgis/core/views/3d/support/PBFDecoderWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{neverReached as t}from\"../../../core/compilerUtils.js\";import{generateUID as e}from\"../../../core/uid.js\";import r from\"../../../geometry/SpatialReference.js\";import{getGeometryZScaler as s}from\"../../../geometry/support/zscale.js\";import{DehydratedFeatureSetClass as o,DehydratedFeatureClass as i}from\"../../../layers/graphics/dehydratedFeatures.js\";import{unquantizeOptimizedGeometry as n,convertToGeometry as a}from\"../../../layers/graphics/featureConversionUtils.js\";import h from\"../../../layers/support/Field.js\";function l(t,e){return e}function u(t,e,r,s){switch(r){case 0:return f(t,e+s,0);case 1:return\"lowerLeft\"===t.originPosition?f(t,e+s,1):y(t,e+s,1)}}function p(t,e,r,s){return 2===r?f(t,e,2):u(t,e,r,s)}function c(t,e,r,s){return 2===r?f(t,e,3):u(t,e,r,s)}function d(t,e,r,s){return 3===r?f(t,e,3):p(t,e,r,s)}function f({translate:t,scale:e},r,s){return t[s]+r*e[s]}function y({translate:t,scale:e},r,s){return t[s]-r*e[s]}class m{constructor(t){this._options=t,this.geometryTypes=[\"point\",\"multipoint\",\"polyline\",\"polygon\"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=l,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return new o}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const e=s(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(null!=e)for(const r of t.features)e(r.geometry)}createSpatialReference(){return new r}addField(t,e){t.fields.push(h.fromJSON(e));const r=t.fields.map((t=>t.name));this._attributesConstructor=function(){for(const t of r)this[t]=null}}addFeature(t,e){const r=this._options.maxStringAttributeLength??0;if(r>0)for(const s in e.attributes){const t=e.attributes[s];\"string\"==typeof t&&t.length>r&&(e.attributes[s]=\"\")}t.features.push(e)}addQueryGeometry(t,e){const{queryGeometry:r,queryGeometryType:s}=e,o=n(r.clone(),r,!1,!1,this._transform),i=a(o,s,!1,!1);let h=null;switch(s){case\"esriGeometryPoint\":h=\"point\";break;case\"esriGeometryPolygon\":h=\"polygon\";break;case\"esriGeometryPolyline\":h=\"polyline\";break;case\"esriGeometryMultipoint\":h=\"multipoint\"}i.type=h,t.queryGeometryType=s,t.queryGeometry=i}prepareFeatures(e){switch(this._transform=e.transform??null,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++,e.geometryType){case\"point\":this.addCoordinate=(t,e,r)=>this.addCoordinatePoint(t,e,r),this.createGeometry=t=>this.createPointGeometry(t);break;case\"polygon\":this.addCoordinate=(t,e,r)=>this._addCoordinatePolygon(t,e,r),this.createGeometry=t=>this._createPolygonGeometry(t);break;case\"polyline\":this.addCoordinate=(t,e,r)=>this._addCoordinatePolyline(t,e,r),this.createGeometry=t=>this._createPolylineGeometry(t);break;case\"multipoint\":this.addCoordinate=(t,e,r)=>this._addCoordinateMultipoint(t,e,r),this.createGeometry=t=>this._createMultipointGeometry(t);break;case\"mesh\":case\"extent\":break;default:t(e.geometryType)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,new i(e(),null,new this._attributesConstructor)}allocateCoordinates(){const t=this._lengths.reduce(((t,e)=>t+e),0);this._coordinateBuffer=new Float64Array(t*this._vertexDimension),this._coordinateBufferPtr=0}addLength(t,e){0===this._lengths.length&&(this._toAddInCurrentPath=e),this._lengths.push(e)}createPointGeometry(t){const e={type:\"point\",x:0,y:0,spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM};return e.hasZ&&(e.z=0),e.hasM&&(e.m=0),e}addCoordinatePoint(t,e,r){const s=this._transform?this._applyTransform(this._transform,e,r,0):e;if(null!=s)switch(r){case 0:t.x=s;break;case 1:t.y=s;break;case 2:t.hasZ?t.z=s:t.m=s;break;case 3:t.m=s}}_transformPathLikeValue(t,e){let r=0;return e<=1&&(r=this._previousCoordinate[e],this._previousCoordinate[e]+=t),this._transform?this._applyTransform(this._transform,t,e,r):t}_addCoordinatePolyline(t,e,r){this._dehydratedAddPointsCoordinate(t.paths,e,r)}_addCoordinatePolygon(t,e,r){this._dehydratedAddPointsCoordinate(t.rings,e,r)}_addCoordinateMultipoint(t,e,r){0===r&&t.points.push([]);const s=this._transformPathLikeValue(e,r);t.points[t.points.length-1].push(s)}_createPolygonGeometry(t){return{type:\"polygon\",rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{type:\"polyline\",paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{type:\"multipoint\",points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,e,r){0===r&&0==this._toAddInCurrentPath--&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(e,r),o=t[t.length-1],i=this._coordinateBuffer;if(i){if(0===r){const t=this._coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT;o.push(new Float64Array(i.buffer,t,this._vertexDimension))}i[this._coordinateBufferPtr++]=s}}_deriveApplyTransform(t){const{hasZ:e,hasM:r}=t;return e&&r?d:e?p:r?c:u}}export{m as DehydratedFeatureSetParserContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{DehydratedFeatureSetParserContext as e}from\"../../../rest/query/operations/pbfDehydratedFeatureSet.js\";import{parsePBFFeatureQuery as r}from\"../../../rest/query/operations/pbfQueryUtils.js\";class t{_parseFeatureQuery(t){const s=r(t.buffer,new e(t.options)),o={...s,spatialReference:s.spatialReference?.toJSON(),fields:s.fields?s.fields.map((e=>e.toJSON())):void 0};return Promise.resolve(o)}}function s(){return new t}export{s as default};\n"],"names":["neverReached","t","generateUID","e","r","getGeometryZScaler","s","DehydratedFeatureSetClass","o","DehydratedFeatureClass","i","unquantizeOptimizedGeometry","n","convertToGeometry","a","h","l","u","f","originPosition","y","p","c","d","translate","scale","m","constructor","_options","geometryTypes","_previousCoordinate","_transform","_applyTransform","_lengths","_currentLengthIndex","_toAddInCurrentPath","_vertexDimension","_coordinateBuffer","_coordinateBufferPtr","_attributesConstructor","createFeatureResult","finishFeatureResult","applyTransform","transform","length","hasZ","geometryType","sourceSpatialReference","spatialReference","features","geometry","createSpatialReference","addField","fields","push","fromJSON","map","name","addFeature","maxStringAttributeLength","attributes","addQueryGeometry","queryGeometry","queryGeometryType","clone","type","prepareFeatures","_deriveApplyTransform","hasM","addCoordinate","addCoordinatePoint","createGeometry","createPointGeometry","_addCoordinatePolygon","_createPolygonGeometry","_addCoordinatePolyline","_createPolylineGeometry","_addCoordinateMultipoint","_createMultipointGeometry","createFeature","allocateCoordinates","reduce","Float64Array","addLength","x","z","_transformPathLikeValue","_dehydratedAddPointsCoordinate","paths","rings","points","BYTES_PER_ELEMENT","buffer","DehydratedFeatureSetParserContext","parsePBFFeatureQuery","_parseFeatureQuery","options","toJSON","Promise","resolve","default"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1]}