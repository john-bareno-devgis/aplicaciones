"use strict";
(self["webpackChunkrealgis"] = self["webpackChunkrealgis"] || []).push([["node_modules_arcgis_core_webdoc_webdocSaveUtils_js"],{

/***/ 58787:
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/accessorSupport/originUtils.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "updateOrigins": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../multiOriginJSONSupportUtils.js */ 65341);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/

function i(i) {
  i?.writtenProperties && i.writtenProperties.forEach(({
    target: i,
    propName: t,
    newOrigin: e
  }) => {
    (0,_multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_0__.isMultiOriginJSONMixin)(i) && e && i.originOf(t) !== e && i.updateOrigin(t, e);
  });
}


/***/ }),

/***/ 65341:
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isMultiOriginJSONMixin": () => (/* binding */ i)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(i) {
  return i && "getAtOrigin" in i && "originOf" in i;
}


/***/ }),

/***/ 90486:
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/portal/support/resourceUtils.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "addOrUpdateResource": () => (/* binding */ s),
/* harmony export */   "contentToBlob": () => (/* binding */ p),
/* harmony export */   "fetchResources": () => (/* binding */ o),
/* harmony export */   "getSiblingOfSameType": () => (/* binding */ d),
/* harmony export */   "getSiblingOfSameTypeI": () => (/* binding */ m),
/* harmony export */   "removeAllResources": () => (/* binding */ l),
/* harmony export */   "removeResource": () => (/* binding */ n),
/* harmony export */   "splitPrefixFileNameAndExtension": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../request.js */ 1897);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Error.js */ 32995);
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/urlUtils.js */ 55050);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/



function o(_x) {
  return _o.apply(this, arguments);
}
function _o() {
  _o = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t = {}, a) {
    yield e.load(a);
    const o = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(e.itemUrl, "resources"),
      {
        start: s = 1,
        num: n = 10,
        sortOrder: l = "asc",
        sortField: u = "created"
      } = t,
      c = {
        query: {
          start: s,
          num: n,
          sortOrder: l,
          sortField: u,
          token: e.apiKey
        },
        signal: a?.signal
      },
      i = yield e.portal.request(o, c);
    return {
      total: i.total,
      nextStart: i.nextStart,
      resources: i.resources.map(({
        created: t,
        size: r,
        resource: a
      }) => ({
        created: new Date(t),
        size: r,
        resource: e.resourceFromPath(a)
      }))
    };
  });
  return _o.apply(this, arguments);
}
function s(_x2, _x3, _x4, _x5) {
  return _s.apply(this, arguments);
}
function _s() {
  _s = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, a, o, s) {
    if (!e.hasPath()) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"](`portal-item-resource-${a}:invalid-path`, "Resource does not have a valid path");
    const n = e.portalItem;
    yield n.load(s);
    const l = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(n.userItemUrl, "add" === a ? "addResources" : "updateResources"),
      [c, i] = u(e.path),
      p = new FormData();
    return c && "." !== c && p.append("resourcesPrefix", c), null != s && s.compress && p.append("compress", "true"), p.append("fileName", i), p.append("file", o, i), p.append("f", "json"), s?.access && p.append("access", s.access), yield n.portal.request(l, {
      method: "post",
      body: p,
      signal: s?.signal
    }), e;
  });
  return _s.apply(this, arguments);
}
function n(_x6, _x7, _x8) {
  return _n.apply(this, arguments);
}
function _n() {
  _n = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, a, o) {
    if (!a.hasPath()) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("portal-item-resources-remove:invalid-path", "Resource does not have a valid path");
    yield e.load(o);
    const s = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(e.userItemUrl, "removeResources");
    yield e.portal.request(s, {
      method: "post",
      query: {
        resource: a.path
      },
      signal: o?.signal
    }), a.portalItem = null;
  });
  return _n.apply(this, arguments);
}
function l(_x9, _x10) {
  return _l.apply(this, arguments);
}
function _l() {
  _l = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t) {
    yield e.load(t);
    const a = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(e.userItemUrl, "removeResources");
    return e.portal.request(a, {
      method: "post",
      query: {
        deleteAll: !0
      },
      signal: t?.signal
    });
  });
  return _l.apply(this, arguments);
}
function u(e) {
  const t = e.lastIndexOf("/");
  return -1 === t ? [".", e] : [e.slice(0, t), e.slice(t + 1)];
}
function c(e) {
  const [t, r] = i(e),
    [a, o] = u(t);
  return [a, o, r];
}
function i(e) {
  const t = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.getPathExtension)(e);
  return null == t ? [e, ""] : [e.slice(0, e.length - t.length - 1), `.${t}`];
}
function p(_x11) {
  return _p.apply(this, arguments);
}
function _p() {
  _p = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (t) {
    if ("blob" === t.type) return t.blob;
    if ("json" === t.type) return new Blob([t.jsonString], {
      type: "application/json"
    });
    return (yield (0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(t.url, {
      responseType: "blob"
    })).data;
  });
  return _p.apply(this, arguments);
}
function d(e, t) {
  if (!e.hasPath()) return null;
  const [a,, o] = c(e.path);
  return e.portalItem.resourceFromPath((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(a, t + o));
}
function m(e, t) {
  if (!e.hasPath()) return null;
  const [a,, o] = c(e.path);
  return e.portalItem.resourceFromPath((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(a, t + o));
}


/***/ }),

/***/ 86502:
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/webdoc/saveAPIKeyUtils.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "validateSaveAPIKey": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config.js */ 68327);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Error.js */ 32995);
/* harmony import */ var _support_apiKeyUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/apiKeyUtils.js */ 22660);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/



function i(i) {
  if (_config_js__WEBPACK_IMPORTED_MODULE_0__["default"].apiKey && (0,_support_apiKeyUtils_js__WEBPACK_IMPORTED_MODULE_2__.supportsApiKey)(i.portal.url)) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("save-api-key-utils:api-key-not-supported", `Saving is not supported on ${i.portal.url} when using an api key`);
}


/***/ }),

/***/ 90190:
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/webdoc/support/saveUtils.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "beforeSave": () => (/* binding */ m),
/* harmony export */   "saveResources": () => (/* binding */ u),
/* harmony export */   "updateItemWithResources": () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/asyncUtils.js */ 11823);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Error.js */ 32995);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/promiseUtils.js */ 30801);
/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/uuid.js */ 28772);
/* harmony import */ var _portal_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../portal/support/resourceUtils.js */ 90486);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/





function u(_x, _x2) {
  return _u.apply(this, arguments);
}
function _u() {
  _u = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, r, o = null) {
    const t = yield i(e, r, o);
    yield h(t, r, o);
  });
  return _u.apply(this, arguments);
}
function p(_x3, _x4, _x5, _x6) {
  return _p.apply(this, arguments);
}
function _p() {
  _p = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, r, o, t, s = null) {
    const a = yield i(o, t, s);
    yield e.update({
      data: r
    }), yield h(a, t, s);
  });
  return _p.apply(this, arguments);
}
function i(_x7, _x8) {
  return _i.apply(this, arguments);
}
function _i() {
  _i = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, s, n = null) {
    if (!s?.resources) return;
    const u = s.portalItem === e.portalItem ? new Set(e.paths) : new Set();
    e.paths.length = 0, e.portalItem = s.portalItem;
    const p = new Set(s.resources.toKeep.map(e => e.resource.path)),
      i = new Set(),
      h = [];
    p.forEach(r => {
      u.delete(r), e.paths.push(r);
    });
    for (const r of s.resources.toUpdate) if (u.delete(r.resource.path), p.has(r.resource.path) || i.has(r.resource.path)) {
      const {
          resource: o,
          content: t,
          finish: s,
          error: u
        } = r,
        p = (0,_portal_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_5__.getSiblingOfSameTypeI)(o, (0,_core_uuid_js__WEBPACK_IMPORTED_MODULE_4__.generateUUID)());
      e.paths.push(p.path), h.push(f({
        resource: p,
        content: t,
        compress: r.compress,
        finish: s,
        error: u
      }, n));
    } else e.paths.push(r.resource.path), h.push(l(r, n)), i.add(r.resource.path);
    for (const r of s.resources.toAdd) e.paths.push(r.resource.path), u.has(r.resource.path) ? u.delete(r.resource.path) : h.push(f(r, n));
    if (0 === h.length) return u;
    const m = yield (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.allSettledErrors)(h);
    if ((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(n), m.length > 0) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("save:resources", "Failed to save one or more resources", {
      errors: m
    });
    return u;
  });
  return _i.apply(this, arguments);
}
function h(_x9, _x10) {
  return _h.apply(this, arguments);
}
function _h() {
  _h = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, r, o = null) {
    if (!e || !r.portalItem) return;
    const t = [];
    for (const s of e) {
      const e = r.portalItem.resourceFromPath(s);
      t.push(e.portalItem.removeResource(e, o));
    }
    yield (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.eachAlways)(t);
  });
  return _h.apply(this, arguments);
}
function f(_x11, _x12) {
  return _f.apply(this, arguments);
}
function _f() {
  _f = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (r, o) {
    const t = {
        ...(null != o ? o : {}),
        compress: r.compress
      },
      s = yield (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_1__.result)(r.resource.portalItem.addResource(r.resource, yield (0,_portal_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_5__.contentToBlob)(r.content), t));
    if (!0 !== s.ok) throw r.error?.(s.error), s.error;
    r.finish?.(r.resource);
  });
  return _f.apply(this, arguments);
}
function l(_x13, _x14) {
  return _l.apply(this, arguments);
}
function _l() {
  _l = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (r, o) {
    const t = yield (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_1__.result)(r.resource.update(yield (0,_portal_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_5__.contentToBlob)(r.content), o));
    if (!0 !== t.ok) throw r.error?.(t.error), t.error;
    r.finish?.(r.resource);
  });
  return _l.apply(this, arguments);
}
function m(_x15) {
  return _m.apply(this, arguments);
}
function _m() {
  _m = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e) {
    const r = [];
    for (const o of e.allLayers) if ("beforeSave" in o && "function" == typeof o.beforeSave) {
      const e = o.beforeSave();
      e && r.push(e);
    }
    yield Promise.allSettled(r);
  });
  return _m.apply(this, arguments);
}


/***/ }),

/***/ 80417:
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/webdoc/webdocSaveUtils.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "save": () => (/* binding */ j),
/* harmony export */   "saveAs": () => (/* binding */ A)
/* harmony export */ });
/* harmony import */ var _home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 71670);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Error.js */ 32995);
/* harmony import */ var _core_MultiOriginJSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/MultiOriginJSONSupport.js */ 20635);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/reactiveUtils.js */ 7521);
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/urlUtils.js */ 55050);
/* harmony import */ var _core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/accessorSupport/originUtils.js */ 58787);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../geometry/SpatialReference.js */ 68230);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../geometry/support/spatialReferenceUtils.js */ 53492);
/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../geometry/support/webMercatorUtils.js */ 83550);
/* harmony import */ var _layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../layers/support/arcgisLayerUrl.js */ 4583);
/* harmony import */ var _layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../layers/support/layerUtils.js */ 63719);
/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../portal/Portal.js */ 9058);
/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../portal/PortalItem.js */ 28518);
/* harmony import */ var _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../portal/support/portalItemUtils.js */ 39712);
/* harmony import */ var _rest_geometryService_project_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../rest/geometryService/project.js */ 46395);
/* harmony import */ var _rest_support_ProjectParameters_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../rest/support/ProjectParameters.js */ 19569);
/* harmony import */ var _support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../support/basemapUtils.js */ 4977);
/* harmony import */ var _saveAPIKeyUtils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./saveAPIKeyUtils.js */ 86502);
/* harmony import */ var _support_saveUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./support/saveUtils.js */ 90190);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/


















const I = ["NatGeo_World_Map", "Ocean_Basemap", "USA_Topo_Maps", "World_Imagery", "World_Street_Map", "World_Terrain_Base", "World_Topo_Map", "World_Hillshade", "Canvas/World_Light_Gray_Base", "Canvas/World_Light_Gray_Reference", "Canvas/World_Dark_Gray_Base", "Canvas/World_Dark_Gray_Reference", "Ocean/World_Ocean_Base", "Ocean/World_Ocean_Reference", "Reference/World_Boundaries_and_Places", "Reference/World_Reference_Overlay", "Reference/World_Transportation"].map(e => e.toLowerCase());
function j(_x, _x2, _x3) {
  return _j.apply(this, arguments);
}
function _j() {
  _j = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t, a) {
    a ??= {}, S(e, t), yield (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.whenOnce)(() => !t.updatingFromView), yield t.load(), yield k(t), yield (0,_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_18__.beforeSave)(t), yield T(e, t);
    const i = t.portalItem,
      n = (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.urlToObject)(i.itemUrl),
      s = {
        origin: "web-map",
        messages: [],
        writtenProperties: [],
        url: n,
        portal: i.portal || _portal_Portal_js__WEBPACK_IMPORTED_MODULE_11__["default"].getDefault(),
        portalItem: i,
        verifyItemRelativeUrls: n ? {
          rootPath: n.path,
          writtenUrls: []
        } : null,
        blockedRelativeUrls: [],
        resources: {
          toAdd: [],
          toUpdate: [],
          toKeep: [],
          pendingOperations: []
        }
      },
      l = t.write({}, s);
    return yield Promise.all(s.resources.pendingOperations), D(e, s, a), yield E(t, i), yield ue(e, t, i, l, s), yield Promise.all([t.updateItemThumbnail(), (0,_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_18__.saveResources)(t.resourceReferences, s, null)]), i;
  });
  return _j.apply(this, arguments);
}
function A(_x4, _x5, _x6, _x7) {
  return _A.apply(this, arguments);
}
function _A() {
  _A = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t, o, a) {
    a ??= {};
    const i = M(e, o);
    yield (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.whenOnce)(() => !t.updatingFromView), yield t.load(), yield k(t), yield (0,_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_18__.beforeSave)(t), yield T(e, t);
    const n = {
        origin: "web-map",
        messages: [],
        writtenProperties: [],
        url: null,
        portal: i.portal,
        portalItem: i,
        blockedRelativeUrls: [],
        resources: {
          toAdd: [],
          toUpdate: [],
          toKeep: [],
          pendingOperations: []
        }
      },
      s = t.write({}, n);
    yield Promise.all(n.resources.pendingOperations), D(e, n, a), yield z(t, i);
    const l = t.getThumbnailState();
    return (yield me(e, t, i, s, n, a)) && (t.resourceReferences.portalItem = i), t.restoreThumbnailFromState(l), yield Promise.all([t.updateItemThumbnail(), (0,_support_saveUtils_js__WEBPACK_IMPORTED_MODULE_18__.saveResources)(t.resourceReferences, n, null)]), i;
  });
  return _A.apply(this, arguments);
}
function S(t, r) {
  if (!r.portalItem) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](`${t.name}:portal-item-not-set`, "Portal item to save to has not been set on the WebMap");
  (0,_saveAPIKeyUtils_js__WEBPACK_IMPORTED_MODULE_17__.validateSaveAPIKey)(r.portalItem), O(t, r.portalItem);
}
function O(t, r) {
  if (r.type !== t.itemType) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](`${t.name}:portal-item-wrong-type`, `Portal item needs to have type "${t.itemType}"`);
}
function T(_x8, _x9) {
  return _T.apply(this, arguments);
}
function _T() {
  _T = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (t, o) {
    if (!o.basemap?.baseLayers.length) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](`${t.name}:save`, "Map does not have a valid basemap with a base layer.");
    let a = null;
    if (yield (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.whenOnce)(() => {
      const e = (0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_16__.findSpatialReference)(o.initialViewProperties, o.basemap);
      return a = e.spatialReference, !e.updating;
    }), !(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__.equals)(a, o.initialViewProperties.spatialReference)) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](`${t.name}:save`, "The spatial reference of the basemap is not compatible with the one from the map.", {
      expected: o.initialViewProperties.spatialReference,
      actual: a
    });
  });
  return _T.apply(this, arguments);
}
function M(e, t) {
  let r = _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_12__["default"].from(t);
  return r.id && (r = r.clone(), r.id = null), r.type || (r.type = e.itemType), r.portal || (r.portal = _portal_Portal_js__WEBPACK_IMPORTED_MODULE_11__["default"].getDefault()), (0,_saveAPIKeyUtils_js__WEBPACK_IMPORTED_MODULE_17__.validateSaveAPIKey)(r), O(e, r), r;
}
function k(e) {
  const t = [];
  return e.basemap && t.push(e.basemap.load()), e.ground && t.push(e.ground.load()), Promise.allSettled(t).then(() => {});
}
function D(t, r, o) {
  let a = (r.messages ?? []).filter(e => "error" === e.type).map(t => new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](t.name, t.message, t.details));
  if (r.blockedRelativeUrls && (a = a.concat(r.blockedRelativeUrls.map(t => new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("url:unsupported", `Relative url '${t}' is not supported in Web Map`)))), o.ignoreUnsupported && (a = a.filter(e => "layer:unsupported" !== e.name && "symbol:unsupported" !== e.name && "symbol-layer:unsupported" !== e.name && "property:unsupported" !== e.name && "url:unsupported" !== e.name)), a.length > 0) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](`${t.name}:save`, "Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information", {
    errors: a
  });
}
function E(_x10, _x11) {
  return _E.apply(this, arguments);
}
function _E() {
  _E = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t) {
    t.extent = yield ne(e.portalItem, e.initialViewProperties.viewpoint.targetGeometry), yield Q(e, t);
  });
  return _E.apply(this, arguments);
}
const V = _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.TypeKeyword.JSAPI,
  C = "CollectorDisabled",
  G = "Collector",
  L = "Data Editing",
  $ = "OfflineDisabled",
  B = "Offline",
  K = "Workforce Project",
  x = "Workforce Worker",
  F = "Workforce Dispatcher",
  N = "Offline Map Areas",
  H = "FieldMapsDisabled",
  J = _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.TypeKeyword.DEVELOPER_BASEMAP,
  q = "UtilityNetwork";
function z(_x12, _x13) {
  return _z.apply(this, arguments);
}
function _z() {
  _z = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t) {
    (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, C), (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, H), (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.TypeKeyword.METADATA), (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, $), (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, N), (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, F), (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, K), (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, x), yield E(e, t);
  });
  return _z.apply(this, arguments);
}
function Q(_x14, _x15) {
  return _Q.apply(this, arguments);
}
function _Q() {
  _Q = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t) {
    (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t, V), yield X(e), te(e, t), re(e, t), oe(e, t), ae(e, t), ie(e, t), t.typeKeywords && (t.typeKeywords = t.typeKeywords.filter((e, t, r) => r.indexOf(e) === t));
  });
  return _Q.apply(this, arguments);
}
function X(e) {
  const t = Y(e).map(e => e.load()).toArray();
  return Promise.allSettled(t).then(() => {});
}
function Y(e) {
  return e.allLayers.concat(e.allTables);
}
function Z(e) {
  return Y(e).some(e => e.loaded && (0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_10__.isLayerWithFeatureLayerSource)(e) && e.capabilities.operations.supportsEditing && e.editingEnabled && ("subtype-group" !== e.type || e.sublayers.some(e => e.editingEnabled)));
}
function ee(e) {
  return Y(e).filter(e => "group" !== e.type).every(t => t.loaded && pe(e, t));
}
function te(e, t) {
  (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.hasTypeKeyword)(t, C) || (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.hasTypeKeyword)(t, K) || (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.hasTypeKeyword)(t, x) || (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.hasTypeKeyword)(t, F) || !Z(e) ? (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, G) : (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t, G);
}
function re(e, t) {
  Z(e) ? (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t, L) : (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, L);
}
function oe(e, t) {
  !(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.hasTypeKeyword)(t, $) && ee(e) ? (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t, B) : (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, B);
}
function ae(e, t) {
  (0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_16__.hasDeveloperBasemapLayer)(e.basemap) ? (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t, J) : (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, J);
}
function ie(e, t) {
  e.utilityNetworks?.length ? (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t, q) : (0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t, q);
}
function ne(_x16, _x17) {
  return _ne.apply(this, arguments);
}
function _ne() {
  _ne = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t) {
    const r = t.clone().normalize();
    let o;
    if (r.length > 1) for (const a of r) o ? a.width > o.width && (o = a) : o = a;else o = r[0];
    return se(e, o);
  });
  return _ne.apply(this, arguments);
}
function se(_x18, _x19) {
  return _se.apply(this, arguments);
}
function _se() {
  _se = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t) {
    const r = t.spatialReference;
    if (r.isWGS84) return t.clone();
    if (r.isWebMercator) return (0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_8__.webMercatorToGeographic)(t);
    const {
        getGeometryServiceURL: o
      } = yield __webpack_require__.e(/*! import() */ "common").then(__webpack_require__.bind(__webpack_require__, /*! ../portal/support/geometryServiceUtils.js */ 11567)),
      a = yield o(e),
      i = new _rest_support_ProjectParameters_js__WEBPACK_IMPORTED_MODULE_15__["default"]();
    i.geometries = [t], i.outSpatialReference = _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__["default"].WGS84;
    return (yield (0,_rest_geometryService_project_js__WEBPACK_IMPORTED_MODULE_14__.project)(a, i))[0];
  });
  return _se.apply(this, arguments);
}
function le(e) {
  return (0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_10__.isFeatureCollectionLayer)(e) || "map-notes" === e.type || "route" === e.type;
}
function pe(e, t) {
  return (0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_10__.isLayerWithFeatureLayerSource)(t) && t.capabilities.operations.supportsSync || le(t) && !t.portalItem || ("tile" === t.type || "vector-tile" === t.type) && (t.capabilities.operations.supportsExportTiles || ce(t) || (0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_16__.isDeveloperBasemapLayer)(t)) && t.spatialReference.equals(e.initialViewProperties.spatialReference);
}
function ce(e) {
  return "tile" === e.type && (0,_layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_9__.isServerOrServicesAGOLUrl)(e.url) && I.some(t => e.url?.toLowerCase().includes("/" + t + "/"));
}
function ue(_x20, _x21, _x22, _x23, _x24) {
  return _ue.apply(this, arguments);
}
function _ue() {
  _ue = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t, r, o, a) {
    yield r.update({
      data: o
    }), we(e, t, r, o, a);
  });
  return _ue.apply(this, arguments);
}
function me(_x25, _x26, _x27, _x28, _x29, _x30) {
  return _me.apply(this, arguments);
}
function _me() {
  _me = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (t, r, o, a, i, n) {
    const s = r.portalItem,
      l = {
        item: s,
        authenticated: !(!s?.id || !s.portal.user)
      },
      p = o.portal;
    yield p.signIn();
    const {
      copyAllowed: c,
      itemReloaded: u
    } = yield de(l, p);
    if (l.authenticated ||= u, !c) throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](`${t.name}:save-as-copy-not-allowed`, "Owner of this map does not allow others to save a copy");
    const m = yield fe(o, l, a, n);
    return r.portalItem = o, we(t, r, o, a, i), m;
  });
  return _me.apply(this, arguments);
}
function de(_x31, _x32) {
  return _de.apply(this, arguments);
}
function _de() {
  _de = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t) {
    const {
      item: r,
      authenticated: o
    } = e;
    return r?.id && r.typeKeywords?.includes("useOnly") ? r.portal.portalHostname !== t.portalHostname ? {
      copyAllowed: !1,
      itemReloaded: !1
    } : (o || (yield r.reload()), {
      copyAllowed: "admin" === r.itemControl || "update" === r.itemControl,
      itemReloaded: !0
    }) : {
      copyAllowed: !0,
      itemReloaded: !1
    };
  });
  return _de.apply(this, arguments);
}
function fe(_x33, _x34, _x35, _x36) {
  return _fe.apply(this, arguments);
}
function _fe() {
  _fe = (0,_home_ohnj_Documentos_realG4Life_1_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e, t, r, o) {
    const i = e.portal,
      {
        item: n
      } = t,
      {
        folder: s,
        copyAllResources: l
      } = o;
    let p = !1;
    if (l && n?.id && (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.hasSameCanonicalPortal)(n.portal.url, i.url) && parseInt(n.portal.currentVersion, 10) >= 2023) {
      const {
        total: e
      } = yield n.fetchResources();
      p = !!e;
    }
    if (p) {
      const t = yield n.copy({
        copyResources: "all",
        folder: s
      });
      e.id = t.id, e.portal = t.portal;
      const o = e.toJSON();
      yield e.load(), e.read(o), yield e.update({
        data: r
      });
    } else yield i.user?.addItem({
      item: e,
      folder: s,
      data: r
    });
    return p;
  });
  return _fe.apply(this, arguments);
}
function we(e, r, a, n, s) {
  _core_MultiOriginJSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.MultiOriginJSONSupport.prototype.read.call(r, {
    version: n.version,
    authoringApp: n.authoringApp,
    authoringAppVersion: n.authoringAppVersion
  }, {
    origin: e.origin,
    ignoreDefaults: !0,
    url: a.itemUrl ? (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.urlToObject)(a.itemUrl) : void 0
  }), (0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_5__.updateOrigins)(s), r.resourceInfo = n;
}


/***/ })

}]);
//# sourceMappingURL=node_modules_arcgis_core_webdoc_webdocSaveUtils_js.js.map