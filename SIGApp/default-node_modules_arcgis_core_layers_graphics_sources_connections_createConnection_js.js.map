{"version":3,"file":"default-node_modules_arcgis_core_layers_graphics_sources_connections_createConnection_js.js","mappings":"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","sources":["./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js","./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js","./node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js","./node_modules/@arcgis/core/layers/support/ClientSideConnection.js","./node_modules/@arcgis/core/layers/support/StreamConnection.js","./node_modules/@arcgis/core/rest/operations/urlUtils.js","./node_modules/@arcgis/core/rest/query/operations/query.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import t from\"../../../../request.js\";import r from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{createResolver as o}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as i}from\"../../../../core/urlUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{WebSocketConnection as a}from\"./WebSocketConnection.js\";import{executeQuery as c}from\"../../../../rest/query/operations/query.js\";import u from\"../../../../rest/support/Query.js\";import{fromJSON as l}from\"../../../../geometry/support/jsonUtils.js\";import f from\"../../../../geometry/SpatialReference.js\";const h=1e4,d={maxQueryDepth:5,maxRecordCountFactor:3};let g=class extends a{constructor(e){super({...d,...e}),this._buddyServicesQuery=null,this._relatedFeatures=null}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||s.getLogger(this).warn(\"GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.\");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){if(\"attributes\"in e){let o;try{o=this._enrich(e),null!=this._featureZScaler&&this._featureZScaler(o.geometry)}catch(t){return void s.getLogger(this).error(new r(\"geoevent-connection\",\"Failed to parse message\",t))}this.onFeature(o)}else this.onMessage(e)}async _fetchServiceDefinition(e){const r={f:\"json\",...this._config.customParameters},s=t(e.path,{query:r,responseType:\"json\"}),o=(await s).data;return this._serviceDefinition=o,o}_fetchWebSocketUrl(e,t){const r=e[0],{urls:s,token:o}=r,n=this._inferWebSocketBaseUrl(s);return i(`${n}/subscribe`,{outSR:\"\"+t.wkid,token:o})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes(\"wss\"))return t;return s.getLogger(this).error(new r(\"geoevent-connection\",\"Unable to infer WebSocket url\",e)),null}async _setFilter(e,t){const i=this._websocket;if(null==i||null==e&&null==t)return;const n=JSON.stringify({filter:this._serializeFilter(e,t)});let a=!1;const c=o(),u=()=>{a||(this.destroyed||this._websocket!==i||s.getLogger(this).error(new r(\"geoevent-connection\",\"Server timed out when setting filter\")),c.reject())},l=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(s.getLogger(this).error(new r(\"geoevent-connection\",\"Failed to set service filter\",t.error)),this._set(\"errorString\",`Could not set service filter - ${t.error}`),c.reject(t.error)),this._setWebSocketJSONParseHandler(i),a=!0,c.resolve())};return i.onmessage=l,i.send(n),setTimeout(u,h),c.promise}_serializeFilter(e,t){const o={};if(null==e&&null==t)return o;if(e?.geometry)try{const t=l(e.geometry);if(\"extent\"!==t.type)throw new r(`Expected extent but found type ${t.type}`);o.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(i){s.getLogger(this).error(new r(\"geoevent-connection\",\"Encountered an error when setting connection geometryDefinition\",i))}return e?.where&&\"1 = 1\"!==e.where&&\"1=1\"!==e.where&&(o.where=e.where),null!=t&&(o.outFields=t.join(\",\")),o}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t],i=this._relatedFeatures.get(o);if(!i)return s.getLogger(this).warn(\"geoevent-connection\",\"Feature join failed. Is the join field configured correctly?\",e),e;const{attributes:n,geometry:a}=i;for(const r in n)e.attributes[r]=n[r];return a&&(e.geometry=a),e.geometry||e.centroid||s.getLogger(this).error(new r(\"geoevent-connection\",\"Found malformed feature - no geometry found\",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),s=this._queryArchive(t);await r;const o=await s;if(!o)return;for(const i of o.features)this.onFeature(this._enrich(i))}catch(e){s.getLogger(this).error(new r(\"geoevent-connection\",\"Encountered an error when querying buddy services\",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await import(\"../../../FeatureLayer.js\")).default)({url:e}),{capabilities:r}=await t.load(),s=r.query.supportsMaxRecordCountFactor,o=r.query.supportsPagination,i=r.query.supportsCentroid,n=this._config.maxRecordCountFactor,a=t.capabilities.query.maxRecordCount,l=s?a*n:a,h=new u;if(h.outFields=this._config.outFields??[\"*\"],h.where=this._config.filter?.where??\"1=1\",h.returnGeometry=!0,h.returnExceededLimitFeatures=!0,h.outSpatialReference=f.fromJSON(this._config.spatialReference),i&&(h.returnCentroid=!0),s&&(h.maxRecordCountFactor=n),o)return h.num=l,t.destroy(),this._queryPages(e,h);const d=await c(e,h,this._config.sourceSpatialReference);return t.destroy(),d.data}async _queryPages(e,t,r=[],s=0){t.start=null!=t.num?s*t.num:null;const{data:o}=await c(e,t,this._config.sourceSpatialReference);return o.exceededTransferLimit&&s<(this._config.maxQueryDepth??0)?(o.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,s+1)):(r.forEach((e=>o.features.push(e))),o)}_addRelatedFeatures(e){const t=new Map,r=e.features,s=this._serviceDefinition.relatedFeatures.joinField;for(const o of r){const e=o.attributes[s];t.set(e,o)}this._relatedFeatures=t}};g=e([n(\"esri.layers.graphics.sources.connections.GeoEventConnection\")],g);const y=g;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Error.js\";import o from\"../../../../core/Logger.js\";import{after as s,createResolver as r}from\"../../../../core/promiseUtils.js\";import{addQueryParameters as n}from\"../../../../core/urlUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getGeometryZScaler as a}from\"../../../../geometry/support/zscale.js\";import l from\"../../../support/StreamConnection.js\";var h;!function(e){e[e.CONNECTING=0]=\"CONNECTING\",e[e.OPEN=1]=\"OPEN\",e[e.CLOSING=2]=\"CLOSING\",e[e.CLOSED=3]=\"CLOSED\"}(h||(h={}));let d=class extends l{constructor(e){super(),this._outstandingMessages=[],this.errorString=null;const{geometryType:t,spatialReference:o,sourceSpatialReference:s}=e;this._config=e,this._featureZScaler=a(t,s,o),this._open()}async _open(){await this._tryCreateWebSocket(),this.destroyed||await this._handshake()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return\"disconnected\";switch(this._websocket.readyState){case h.CONNECTING:case h.OPEN:return\"connected\";case h.CLOSING:case h.CLOSED:return\"disconnected\"}}sendMessageToSocket(e){null!=this._websocket?this._websocket.send(JSON.stringify(e)):this._outstandingMessages.push(e)}sendMessageToClient(e){this._onMessage(e)}updateCustomParameters(e){this._config.customParameters=e,null!=this._websocket&&this._websocket.close()}async _tryCreateWebSocket(e=this._config.source.path,r=1e3,i=0){try{if(this.destroyed)return;const t=n(e,this._config.customParameters??{});this._websocket=await this._createWebSocket(t),this.notifyChange(\"connectionStatus\")}catch(c){const n=r/1e3;return this._config.maxReconnectionAttempts&&i>=this._config.maxReconnectionAttempts?(o.getLogger(this).error(new t(\"websocket-connection\",\"Exceeded maxReconnectionAttempts attempts. No further attempts will be made\")),void this.destroy()):(o.getLogger(this).error(new t(\"websocket-connection\",`Failed to connect. Attempting to reconnect in ${n}s`,c)),await s(r),this._tryCreateWebSocket(e,Math.min(1.5*r,1e3*this._config.maxReconnectionInterval),i+1))}}_setWebSocketJSONParseHandler(e){e.onmessage=e=>{try{const t=JSON.parse(e.data);this._onMessage(t)}catch(s){return void o.getLogger(this).error(new t(\"websocket-connection\",\"Failed to parse message, invalid JSON\",{error:s}))}}}_createWebSocket(e){return new Promise(((t,o)=>{const s=new WebSocket(e);s.onopen=()=>{if(s.onopen=null,this.destroyed)return s.onclose=null,void s.close();s.onclose=e=>this._onClose(e),s.onerror=e=>this._onError(e),this._setWebSocketJSONParseHandler(s),t(s)},s.onclose=e=>{s.onopen=s.onclose=null,o(e)}}))}async _handshake(e=1e4){const s=this._websocket;if(null==s)return;const n=r(),i=s.onmessage,{filter:c,outFields:a,spatialReference:l}=this._config;return n.timeout(e),s.onmessage=e=>{let r=null;try{r=JSON.parse(e.data)}catch(h){}r&&\"object\"==typeof r||(o.getLogger(this).error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - malformed message\",e.data)),n.reject(),this.destroy()),r.spatialReference?.wkid!==l?.wkid&&(o.getLogger(this).error(new t(\"websocket-connection\",`Protocol violation. Handshake failed - expected wkid of ${l.wkid}`,e.data)),n.reject(),this.destroy()),\"json\"!==r.format&&(o.getLogger(this).error(new t(\"websocket-connection\",\"Protocol violation. Handshake failed - format is not set\",e.data)),n.reject(),this.destroy()),c&&r.filter!==c&&o.getLogger(this).error(new t(\"websocket-connection\",\"Tried to set filter, but server doesn't support it\")),a&&r.outFields!==a&&o.getLogger(this).error(new t(\"websocket-connection\",\"Tried to set outFields, but server doesn't support it\")),s.onmessage=i;for(const t of this._outstandingMessages)s.send(JSON.stringify(t));this._outstandingMessages=[],n.resolve()},s.send(JSON.stringify({filter:c,outFields:a,format:\"json\",spatialReference:{wkid:l.wkid}})),n.promise}_onMessage(e){if(this.onMessage(e),\"type\"in e)switch(e.type){case\"features\":case\"featureResult\":for(const t of e.features)null!=this._featureZScaler&&this._featureZScaler(t.geometry),this.onFeature(t)}}_onError(e){const t=\"Encountered an error over WebSocket connection\";this._set(\"errorString\",t),o.getLogger(this).error(\"websocket-connection\",t)}_onClose(e){this._websocket=null,this.notifyChange(\"connectionStatus\"),1e3!==e.code&&o.getLogger(this).error(\"websocket-connection\",`WebSocket closed unexpectedly with error code ${e.code}`),this.destroyed||this._open()}};e([i()],d.prototype,\"connectionStatus\",null),e([i()],d.prototype,\"errorString\",void 0),d=e([c(\"esri.layers.graphics.sources.connections.WebSocketConnection\")],d);export{d as WebSocketConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"./GeoEventConnection.js\";import{WebSocketConnection as t}from\"./WebSocketConnection.js\";import{ClientSideConnection as n}from\"../../../support/ClientSideConnection.js\";function o(o,r,s,i,c,a,m,p){const f={source:o,sourceSpatialReference:r,spatialReference:s,geometryType:i,filter:c,maxReconnectionAttempts:a,maxReconnectionInterval:m,customParameters:p};if(!o)return new n(f);return o.path.startsWith(\"wss://\")||o.path.startsWith(\"ws://\")?new t(f):new e(f)}export{o as createConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{getGeometryZScaler as o}from\"../../geometry/support/zscale.js\";import s from\"./StreamConnection.js\";let c=class extends s{constructor(e){super(),this.connectionStatus=\"connected\",this.errorString=null;const{geometryType:r,spatialReference:t,sourceSpatialReference:s}=e;this._featureZScaler=o(r,s,t)}updateCustomParameters(e){}sendMessageToSocket(e){}sendMessageToClient(e){if(\"type\"in e)switch(e.type){case\"features\":case\"featureResult\":for(const r of e.features)null!=this._featureZScaler&&this._featureZScaler(r.geometry),this.onFeature(r)}this.onMessage(e)}};e([r()],c.prototype,\"connectionStatus\",void 0),e([r()],c.prototype,\"errorString\",void 0),c=e([t(\"esri.layers.support.ClientSideConnection\")],c);export{c as ClientSideConnection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Error.js\";import o from\"../../core/Evented.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";let c=class extends o.EventedAccessor{destroy(){this.emit(\"destroy\")}get connectionError(){return this.errorString?new e(\"stream-connection\",this.errorString):null}onFeature(r){this.emit(\"data-received\",r)}onMessage(r){this.emit(\"message-received\",r)}};r([s({readOnly:!0})],c.prototype,\"connectionError\",null),c=r([t(\"esri.layers.support.StreamConnection\")],c);const i=c;export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nfunction t(n){const o={};for(const e in n){if(\"declaredClass\"===e)continue;const r=n[e];if(null!=r&&\"function\"!=typeof r)if(Array.isArray(r)){o[e]=[];for(let n=0;n<r.length;n++)o[e][n]=t(r[n])}else\"object\"==typeof r?r.toJSON&&(o[e]=JSON.stringify(r)):o[e]=r}return o}export{t as mapParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{urlToObject as e,join as n}from\"../../../core/urlUtils.js\";import{getJsonType as r}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as i}from\"../../../geometry/support/normalizeUtils.js\";import{srToRESTValue as a}from\"../../../geometry/support/spatialReferenceUtils.js\";import{mapParameters as o}from\"../../operations/urlUtils.js\";import{parsePBFFeatureQuery as u}from\"./pbfQueryUtils.js\";import{applyFeatureSetZUnitScaling as l}from\"./queryZScale.js\";const s=\"Layer does not support extent calculation.\";function m(t,e){if(e&&\"extent\"===t.type)return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&\"point\"===t.type)return`${t.x},${t.y}`;const n=t.toJSON();return delete n.spatialReference,JSON.stringify(n)}function y(t,e){const n=t.geometry,i=t.toJSON();delete i.compactGeometryEnabled,delete i.defaultSpatialReferenceEnabled;const o=i;let u,l,s;if(null!=n&&(l=n.spatialReference,s=a(l),o.geometryType=r(n),o.geometry=m(n,t.compactGeometryEnabled),o.inSR=s),i.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(\",\")),i.objectIds&&(o.objectIds=i.objectIds.join(\",\")),i.orderByFields&&(o.orderByFields=i.orderByFields.join(\",\")),!i.outFields||!i.returnDistinctValues&&(e?.returnCountOnly||e?.returnExtentOnly||e?.returnIdsOnly)?delete o.outFields:i.outFields.includes(\"*\")?o.outFields=\"*\":o.outFields=i.outFields.join(\",\"),i.outSR?(o.outSR=a(i.outSR),u=t.outSpatialReference):n&&(i.returnGeometry||i.returnCentroid)&&(o.outSR=o.inSR,u=l),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(o.outStatistics=JSON.stringify(i.outStatistics)),i.fullText&&(o.fullText=JSON.stringify(i.fullText)),i.pixelSize&&(o.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&null!=l&&null!=t.quantizationParameters?.extent&&l.equals(t.quantizationParameters.extent.spatialReference)&&delete i.quantizationParameters.extent.spatialReference,o.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(o.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(o.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(o.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const t=i.timeExtent,{start:e,end:n}=t;null==e&&null==n||(o.time=e===n?e:`${e??\"null\"},${n??\"null\"}`),delete i.timeExtent}return t.defaultSpatialReferenceEnabled&&null!=l&&null!=u&&l.equals(u)&&(o.defaultSR=o.inSR,delete o.inSR,delete o.outSR),o}async function c(t,e,n,r){const i=null!=e.timeExtent&&e.timeExtent.isEmpty?{data:{features:[]}}:await E(t,e,\"json\",r);return l(e,n,i.data),i}async function f(t,e,n,r){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:n.createFeatureResult()};const i=await d(t,e,r),a=i;return a.data=u(i.data,n),a}function d(t,e,n){return E(t,e,\"pbf\",n)}function p(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):E(t,e,\"json\",n,{returnIdsOnly:!0})}function S(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):E(t,e,\"json\",n,{returnIdsOnly:!0,returnCountOnly:!0})}async function x(t,e,n){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await E(t,e,\"json\",n,{returnExtentOnly:!0,returnCountOnly:!0}),i=r.data;if(i.hasOwnProperty(\"extent\"))return r;if(i.features)throw new Error(s);if(i.hasOwnProperty(\"count\"))throw new Error(s);return r}async function E(r,a,u,l={},s={}){const m=\"string\"==typeof r?e(r):r,c=a.geometry?[a.geometry]:[],f=await i(c,null,{signal:l.signal}),d=f?.[0];null!=d&&((a=a.clone()).geometry=d);const p=o({...m.query,f:u,...s,...y(a,s)});return t(n(m.path,g(a,s)?\"query3d\":\"query\"),{...l,responseType:\"pbf\"===u?\"array-buffer\":\"json\",query:{...p,...l.query}})}function g(t,e){return null!=t.formatOf3DObjects&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}export{m as encodeGeometry,c as executeQuery,S as executeQueryForCount,x as executeQueryForExtent,p as executeQueryForIds,f as executeQueryPBF,d as executeQueryPBFBuffer,y as queryToQueryStringParameters,E as runQuery};\n"],"names":["_","e","t","r","s","createResolver","o","addQueryParameters","i","subclass","n","WebSocketConnection","a","executeQuery","c","u","fromJSON","l","f","h","d","maxQueryDepth","maxRecordCountFactor","g","constructor","_buddyServicesQuery","_relatedFeatures","_open","_fetchServiceDefinition","_config","source","timeInfo","trackIdField","getLogger","warn","_fetchWebSocketUrl","streamUrls","spatialReference","_queryBuddyServices","_tryCreateWebSocket","filter","outFields","destroyed","_setFilter","_onMessage","_enrich","_featureZScaler","geometry","error","onFeature","onMessage","customParameters","path","query","responseType","data","_serviceDefinition","urls","token","_inferWebSocketBaseUrl","outSR","wkid","length","includes","_websocket","JSON","stringify","_serializeFilter","reject","parse","_set","_setWebSocketJSONParseHandler","resolve","onmessage","send","setTimeout","promise","type","shiftCentralMeridian","where","join","relatedFeatures","joinField","attributes","get","centroid","keepLatestArchive","_queryRelatedFeatures","_queryArchive","features","_queryBuddy","featuresUrl","_addRelatedFeatures","default","url","capabilities","load","supportsMaxRecordCountFactor","supportsPagination","supportsCentroid","maxRecordCount","returnGeometry","returnExceededLimitFeatures","outSpatialReference","returnCentroid","num","destroy","_queryPages","sourceSpatialReference","start","exceededTransferLimit","forEach","push","Map","set","y","after","property","getGeometryZScaler","CONNECTING","OPEN","CLOSING","CLOSED","_outstandingMessages","errorString","geometryType","_handshake","onopen","onclose","onerror","close","connectionStatus","readyState","sendMessageToSocket","sendMessageToClient","updateCustomParameters","_createWebSocket","notifyChange","maxReconnectionAttempts","Math","min","maxReconnectionInterval","Promise","WebSocket","_onClose","_onError","timeout","format","code","prototype","ClientSideConnection","m","p","startsWith","createConnection","EventedAccessor","emit","connectionError","readOnly","Array","isArray","toJSON","mapParameters","urlToObject","getJsonType","normalizeCentralMeridian","srToRESTValue","parsePBFFeatureQuery","applyFeatureSetZUnitScaling","xmin","ymin","xmax","ymax","x","compactGeometryEnabled","defaultSpatialReferenceEnabled","inSR","groupByFieldsForStatistics","objectIds","orderByFields","returnDistinctValues","returnCountOnly","returnExtentOnly","returnIdsOnly","outStatistics","fullText","pixelSize","quantizationParameters","extent","equals","parameterValues","rangeValues","dynamicDataSource","layer","timeExtent","end","time","defaultSR","isEmpty","E","createFeatureResult","S","count","hasOwnProperty","Error","signal","clone","formatOf3DObjects","encodeGeometry","executeQueryForCount","executeQueryForExtent","executeQueryForIds","executeQueryPBF","executeQueryPBFBuffer","queryToQueryStringParameters","runQuery"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1,2,3,4,5,6]}